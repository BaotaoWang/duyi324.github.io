<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Fy.L 的个人博客</title>
  
  <subtitle>自学尚未成才的码农0=0</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.lifayu.com/"/>
  <updated>2019-01-09T11:50:32.159Z</updated>
  <id>http://www.lifayu.com/</id>
  
  <author>
    <name>Fy.L</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>树莓派安装KodExplorer变身私人云桌面</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85KodExplorer%E5%8F%98%E8%BA%AB%E7%A7%81%E4%BA%BA%E4%BA%91%E6%A1%8C%E9%9D%A2/"/>
    <id>http://www.lifayu.com/2019/01/10/树莓派安装KodExplorer变身私人云桌面/</id>
    <published>2019-01-09T19:49:56.000Z</published>
    <updated>2019-01-09T11:50:32.159Z</updated>
    
    <content type="html"><![CDATA[<p>标签（空格分隔）： 树莓派 KodExplorer</p><hr><p>【参考链接】<br><a href="http://www.immortalt.com/archives/306" target="_blank" rel="noopener">旧手机安装KodExplorer可道云变身云桌面</a><br><a href="http://blog.csdn.net/emperor10juv/article/details/52705590" target="_blank" rel="noopener">Ubuntu14.04下配置PHP7.0+Apache2+Mysql5.7</a><br><a href="http://m.php.cn/article/341528.html" target="_blank" rel="noopener">ubuntu下使用 apt-get install 安装php扩展库mcrypt、curl、gd</a></p><p>本文主要目的是在树莓派上搭建Apache2 + php7.0 环境，并安装<a href="https://kodcloud.com/download/" target="_blank" rel="noopener">KodCLoud</a>实现私人云。因KodExplorer不需要Mysql环境， 所以暂不安装。</p><p><strong>【更新软件源仓库】</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></p><p><strong>【安装Apache2】</strong></p><ul><li>安装apache2<br>在树莓派上的终端执行如下命令，<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y apache2</span><br></pre></td></tr></table></figure></li></ul><p>编辑apache主配置文件/etc/apache2/apache2.conf，修改KeepAlive设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KeepAlive Off</span><br></pre></td></tr></table></figure></p><p>Apache默认的multi-processing模块(MPM ) 是一个event 模块，但是 php默认是使用 prefork模块，禁用event模块，启用prefork模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo a2dismod mpm_event</span><br><span class="line">sudo a2enmod mpm_prefork</span><br></pre></td></tr></table></figure></p><p>重启Apache<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure></p><ul><li>修改端口<br>进入<code>/etc/apache2/</code>目录下，修改<code>ports.conf</code>文件，添加<code>Listen 端口号</code>即可监听对应端口：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/apache2/</span><br><span class="line">sudo nano ports.conf</span><br></pre></td></tr></table></figure></li></ul><p>添加内容，每行一条记录:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># If you just change the port or add more ports here, you will likely also</span><br><span class="line"># have to change the VirtualHost statement in</span><br><span class="line"># /etc/apache2/sites-enabled/000-default.conf</span><br><span class="line"></span><br><span class="line">Listen 80</span><br><span class="line">Listen 8000</span><br><span class="line"></span><br><span class="line">...其他内容..</span><br></pre></td></tr></table></figure></p><p>同时，按照文件头部的说明，还要修改<code>/etc/apache2/sites-enabled/000-default.conf</code>文件中的<code>VirtualHost</code>声明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/apache2/sites-enabled/</span><br><span class="line">sudo nano 000-default.conf</span><br></pre></td></tr></table></figure></p><p>在<code>VirtualHost *:80&gt;</code>节点修改端口号即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:8000&gt;</span><br><span class="line">    **其他内容**</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><p><strong>【安装PHP7.0】</strong><br>如果系统是jessie，需要假如stretch源才能安装php7，速度相比php5快一倍：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure></p><p>添加一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi</span><br></pre></td></tr></table></figure></p><p>接着创建一个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/apt/preferences</span><br></pre></td></tr></table></figure></p><p>添加以下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Package: *</span><br><span class="line">Pin: release n=jessie</span><br><span class="line">Pin-Priority: 600</span><br></pre></td></tr></table></figure></p><p>更新源并安装php7.0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install -t stretch php7.0 php7.0-curl php7.0-gd php7.0-fpm php7.0-cli php7.0-opcache php7.0-mbstring php7.0-xml php7.0-zip</span><br></pre></td></tr></table></figure></p><p>安装好之后执行 php -v 可以查看版本。</p><blockquote><p>如果这一步出现公钥问题，参照另一篇文章：<br><a href="https://www.jianshu.com/p/8a1921413fad" target="_blank" rel="noopener">https://www.jianshu.com/p/8a1921413fad</a><br>即可解决问题。</p></blockquote><p><strong>【LAMP】</strong></p><ul><li>整合PHP和Apache2<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libapache2-mod-php7.0</span><br><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure></li></ul><p><strong>【验证环境】</strong></p><ul><li><p>显示PHP的版本信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br></pre></td></tr></table></figure></li><li><p><strong>Apache默认的网站根目录位于<code>/var/www/html/</code></strong>,进入这个目录，并创建info.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /var/www/html/info.php</span><br></pre></td></tr></table></figure></li></ul><p>写入如下内容：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>在浏览器中输入<a href="http://localhost/info.php进行验证。" target="_blank" rel="noopener">http://localhost/info.php进行验证。</a><br><strong>【KodExplorer】</strong><br>按照 <a href="https://kodcloud.com/download/" target="_blank" rel="noopener">https://kodcloud.com/download/</a> 页面的说明，下载KodExplorer并安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/html/</span><br><span class="line">wget http://static.kodcloud.com/update/download/kodexplorer4.25.zip</span><br><span class="line">unzip kodexplorer4.25.zip</span><br><span class="line">chmod -Rf 777 ./*</span><br></pre></td></tr></table></figure></p><p>最后在浏览器输入<code>http://localhost:8000/index.php</code>，如果一切正常即可看到网盘页面。<br><strong>【内网穿透】</strong><br>这一部分不是重点，所以简单介绍一种方法来实现远程访问。<br>从 <a href="https://ngrok.com/download" target="_blank" rel="noopener">https://ngrok.com/download</a> 页面下载<code>ngrok</code>，树莓派选择<code>Linux(ARM)</code>版本进行下载。<br>或者从这里下载并上传到树莓派：<a href="https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip" target="_blank" rel="noopener">https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /home/pi/Desktop/</span><br><span class="line">wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip</span><br><span class="line">sudo unzip ngrok-stable-linux-arm.zip</span><br><span class="line">sudo ./ngrok http 80  #这里演示的是80端口，其他端口未测试。</span><br></pre></td></tr></table></figure></p><p>然后在<code>Forwarding</code>后面跟着的<code>ip:ports -&gt; localhost:80</code>即为远程映射地址。<br>在任意浏览器输入上面的<code>ip:ports</code>即可访问到本地服务。</p><p><strong>【安装Mysql5.7】</strong></p><ul><li><p>因为Ubuntu14.04下没有Mysql5.7的源，需要连接外部资源库进行下载</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http://dev.mysql.com/get/mysql-apt-config_0.6.0-1_all.deb</span><br><span class="line">sudo dpkg -i mysql-apt-config_0.6.0-1_all.deb</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install mysql-server</span><br><span class="line"># 在安装过程中要输入root的密码</span><br></pre></td></tr></table></figure></li><li><p>安装完成后，执行mysql_secure_installation，根据提示完成安全设置</p><blockquote><p>这一步骤中，在手机上用<code>linux deploy</code>部署linux执行有可能出现错误<br>W: GPG error: <a href="http://rep.mysql.com/apt/debian" target="_blank" rel="noopener">http://rep.mysql.com/apt/debian</a> jessie InRelease: The following signatures were invalid: KEYEXPIRED 1487236823  KEYEXPIRED 1487236823  KEYEXPIRED 1487236823<br>w: The repository ‘<a href="http://repo.mysql.com/apt/debian" target="_blank" rel="noopener">http://repo.mysql.com/apt/debian</a> jessie InRelease’ is not signed.<br>按照<a href="https://askubuntu.com/questions/131601/gpg-error-release-the-following-signatures-were-invalid-badsig" target="_blank" rel="noopener">https://askubuntu.com/questions/131601/gpg-error-release-the-following-signatures-were-invalid-badsig</a>中的方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo apt-get clean</span><br><span class="line">&gt; sudo mv /var/lib/apt/lists /tmp</span><br><span class="line">&gt; sudo mkdir -p /var/lib/apt/lists/partial  #这一句可以不执行，update的时候会自动执行</span><br><span class="line">&gt; sudo apt-get clean</span><br><span class="line">&gt; sudo apt-get update</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote></li></ul><blockquote><p>依次执行上面的命令后即可重新安装其他版本的mysql。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签（空格分隔）： 树莓派 KodExplorer&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;【参考链接】&lt;br&gt;&lt;a href=&quot;http://www.immortalt.com/archives/306&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;旧手机安装KodEx
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="KodExplorer" scheme="http://www.lifayu.com/tags/KodExplorer/"/>
    
  </entry>
  
  <entry>
    <title>Raspbian 中国软件源</title>
    <link href="http://www.lifayu.com/2019/01/10/Raspbian-%E4%B8%AD%E5%9B%BD%E8%BD%AF%E4%BB%B6%E6%BA%90/"/>
    <id>http://www.lifayu.com/2019/01/10/Raspbian-中国软件源/</id>
    <published>2019-01-09T19:46:59.000Z</published>
    <updated>2019-01-09T11:47:40.902Z</updated>
    
    <content type="html"><![CDATA[<p>标签： 树莓派</p><hr><p>本文来自：<a href="http://shumeipai.nxez.com/" title="http://shumeipai.nxez.com/" target="_blank" rel="noopener">树莓派实验室</a><br>链接地址：<a href="http://shumeipai.nxez.com/2013/08/31/raspbian-chinese-software-source.html" target="_blank" rel="noopener">http://shumeipai.nxez.com/2013/08/31/raspbian-chinese-software-source.html</a></p><p>花了些时间整理了目前最新的树莓派中国大陆地区的软件源，记下来，希望对大家有帮助。</p><p>中国科学技术大学<br>Raspbian <a href="http://mirrors.ustc.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/raspbian/raspbian/</a></p><p>阿里云<br>Raspbian <a href="http://mirrors.aliyun.com/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.aliyun.com/raspbian/raspbian/</a></p><p>清华大学<br>Raspbian <a href="http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/</a></p><p>华中科技大学<br>Raspbian <a href="http://mirrors.hustunique.com/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.hustunique.com/raspbian/raspbian/</a><br>Arch Linux ARM <a href="http://mirrors.hustunique.com/archlinuxarm/" target="_blank" rel="noopener">http://mirrors.hustunique.com/archlinuxarm/</a></p><p>华南农业大学（华南用户）<br>Raspbian <a href="http://mirrors.scau.edu.cn/raspbian/" target="_blank" rel="noopener">http://mirrors.scau.edu.cn/raspbian/</a></p><p>大连东软信息学院源（北方用户）<br>Raspbian <a href="http://mirrors.neusoft.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.neusoft.edu.cn/raspbian/raspbian/</a></p><p>重庆大学源（中西部用户）<br>Raspbian <a href="http://mirrors.cqu.edu.cn/Raspbian/raspbian/" target="_blank" rel="noopener">http://mirrors.cqu.edu.cn/Raspbian/raspbian/</a></p><p>中山大学 已跳转至中国科学技术大学源<br>Raspbian <a href="http://mirror.sysu.edu.cn/raspbian/raspbian/" target="_blank" rel="noopener">http://mirror.sysu.edu.cn/raspbian/raspbian/</a></p><p>新加坡国立大学<br>Raspbian <a href="http://mirror.nus.edu.sg/raspbian/raspbian" target="_blank" rel="noopener">http://mirror.nus.edu.sg/raspbian/raspbian</a></p><p>牛津大学<br>Raspbian <a href="http://mirror.ox.ac.uk/sites/archive.raspbian.org/archive/raspbian/" target="_blank" rel="noopener">http://mirror.ox.ac.uk/sites/archive.raspbian.org/archive/raspbian/</a></p><p>韩国KAIST大学<br>Raspbian <a href="http://ftp.kaist.ac.kr/raspbian/raspbian/" target="_blank" rel="noopener">http://ftp.kaist.ac.kr/raspbian/raspbian/</a></p><p>使用说明<br>编辑<code>/etc/apt/sources.list</code> 文件，参考如下命令：<br><code>sudo nano /etc/apt/sources.list</code><br>删除原文件所有内容，jessie 用以下内容取代：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirror.sysu.edu.cn/raspbian/raspbian/ jessie main contrib non-free</span><br><span class="line">deb-src http://mirror.sysu.edu.cn/raspbian/raspbian/ jessie main contrib non-free</span><br></pre></td></tr></table></figure></p><p>wheezy 用以下内容取代：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free</span><br><span class="line">deb-src http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free</span><br></pre></td></tr></table></figure></p><p>注：网址末尾的raspbian重复两次是必须的。因为Raspbian的仓库中除了APT软件源还包含其他代码。APT软件源不在仓库的根目录，而在raspbian/子目录下。</p><p>编辑镜像站后，请使用<code>sudo apt-get update</code>命令，更新软件源列表，同时检查您的编辑是否正确。<br>如果需要, 你可以执行以下命令将Raspbian public key加入你的 apt-get keyring :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://archive.raspbian.org/raspbian.public.key -O - | sudo apt-key add -</span><br></pre></td></tr></table></figure></p><blockquote><p>2015.11.23 add a update from comments：<br>现在版本升级了，版本号要更改，把 wheezy 改成 jessie &gt; 这样大部分源是在中国，不然像楼上那样升级，大部分源在国外</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签： 树莓派&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;本文来自：&lt;a href=&quot;http://shumeipai.nxez.com/&quot; title=&quot;http://shumeipai.nxez.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;树莓派实验室&lt;/a
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="软件源" scheme="http://www.lifayu.com/tags/%E8%BD%AF%E4%BB%B6%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>【转载】Linux启动项管理：Update-rc.d 命令用法详解</title>
    <link href="http://www.lifayu.com/2019/01/10/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91Linux%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%AE%A1%E7%90%86%EF%BC%9AUpdate-rc-d-%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/"/>
    <id>http://www.lifayu.com/2019/01/10/【转载】Linux启动项管理：Update-rc-d-命令用法详解/</id>
    <published>2019-01-09T19:45:34.000Z</published>
    <updated>2019-01-09T11:46:44.526Z</updated>
    
    <content type="html"><![CDATA[<p>标签： Linux Update-rc.d</p><hr><p><strong><em>[原文链接：<a href="http://blog.csdn.net/shb_derek1/article/details/8489112" target="_blank" rel="noopener">Update-rc.d 命令用法详解</a>]</em></strong><br><strong><em>[原文作者：<a href="http://blog.csdn.net/shb_derek1" target="_blank" rel="noopener">Shb_derek</a>]</em></strong></p><p>Ubuntu或者Debian系统中update-rc.d命令，是用来更新系统启动项的脚本。这些脚本的链接位于/etc/rcN.d/目录，对应脚本位于/etc/init.d/目录。在了解update-rc.d命令之前，你需要知道的是有关Linux 系统主要启动步骤，以及Ubuntu中运行级别的知识。</p><p> <strong>一、Linux 系统主要启动步骤</strong><br>读取 MBR 的信息，启动 Boot Manager。<br>加载系统内核，启动 init 进程， init 进程是 Linux 的根进程，所有的系统进程都是它的子进程。<br>init 进程读取 /etc/inittab 文件中的信息，并进入预设的运行级别。通常情况下 /etc/rcS.d/ 目录下的启动脚本首先被执行，然后是/etc/rcN.d/ 目录。<br>根据 /etc/rcS.d/ 文件夹中对应的脚本启动 Xwindow 服务器 xorg，Xwindow 为 Linux 下的图形用户界面系统。<br>启动登录管理器，等待用户登录。</p><p><strong>二、运行级别</strong><br>Ubuntu中的运行级别</p><blockquote><p>0（关闭系统）<br>1（单用户模式，只允许root用户对系统进行维护。）<br>2 到 5（多用户模式，其中3为字符界面，5为图形界面。）<br>6（重启系统）</p></blockquote><p>切换运行级别<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">init [0123456Ss]</span><br><span class="line">例如：init 0 命令关机； init 6 命令重新启动</span><br></pre></td></tr></table></figure></p><p>启动项管理工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo install sysv-rc-conf //或者使用带gui的工具bum</span><br><span class="line">sudo sysv-rc-conf</span><br></pre></td></tr></table></figure></p><p><strong>三、update-rc.d命令详解</strong></p><p>从所有的运行级别中删除指定启动项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d -f ＜basename＞ remove</span><br></pre></td></tr></table></figure></p><p>按指定顺序、在指定运行级别中启动或关闭<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d ＜basename＞ start|stop ＜order＞ ＜runlevels＞</span><br></pre></td></tr></table></figure></p><p>实例：<code>update-rc.d apachectl start 20 2 3 4 5 . stop 20 0 1 6 .</code></p><p>解析：表示在2、3、4、5这五个运行级别中，由小到大，第20个开始运行apachectl；在 0 1 6这3个运行级别中，第20个关闭apachectl。这是合并起来的写法，注意它有2个点号，效果等于下面方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d apachectl defaults</span><br></pre></td></tr></table></figure></p><p>A启动后B才能启动，B关闭后A才关闭<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d A defaults 80 20</span><br><span class="line">update-rc.d B defaults 90 10</span><br></pre></td></tr></table></figure></p><p>启动和关闭顺序为90，级别默认<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d ＜basename＞ defaults 90</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签： Linux Update-rc.d&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;[原文链接：&lt;a href=&quot;http://blog.csdn.net/shb_derek1/article/details/8489112&quot; target=&quot;_blank&quot; rel
      
    
    </summary>
    
      <category term="Linux" scheme="http://www.lifayu.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://www.lifayu.com/tags/Linux/"/>
    
      <category term="Update-rc.d" scheme="http://www.lifayu.com/tags/Update-rc-d/"/>
    
  </entry>
  
  <entry>
    <title>树莓派：实现物联网第一步之控制LED</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%A0%91%E8%8E%93%E6%B4%BE%EF%BC%9A%E5%AE%9E%E7%8E%B0%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%AC%E4%B8%80%E6%AD%A5%E4%B9%8B%E6%8E%A7%E5%88%B6LED/"/>
    <id>http://www.lifayu.com/2019/01/10/树莓派：实现物联网第一步之控制LED/</id>
    <published>2019-01-09T19:41:51.000Z</published>
    <updated>2019-01-09T11:43:22.428Z</updated>
    
    <content type="html"><![CDATA[<p><strong>硬件部分</strong></p><p> 准备材料：</p><ul><li>树莓派</li><li>面包板（可选）</li><li>杜邦线（可选）</li><li>LED</li><li>继电器</li></ul><blockquote><p>LED、继电器等连接到面包板上，继电器连接到树莓派的GPIO11和GPIO13，LED连接到继电器，具体链接方法不再详述；<br><img src="http://z4a.net/images/2016/09/17/1da6087feb34689b.jpg" alt="硬件连接"></p></blockquote><ol><li>安装FLask(<a href="http://www.pythondoc.com/flask-mega-tutorial/helloworld.html" target="_blank" rel="noopener">Flask安装教程</a>)</li><li>创建led.py，相同目录下创建templates文件夹，里面放一个led.html，代码分别如下：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template , request</span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BOARD)</span><br><span class="line">GPIO.setup(<span class="number">11</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">13</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">3</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">5</span>, GPIO.OUT)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">time.sleep(<span class="number">0.1</span>)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.LOW)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">a = <span class="string">'checked'</span></span><br><span class="line"><span class="meta">@app.route('/',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method ==<span class="string">'POST'</span>:</span><br><span class="line">        GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line">        time.sleep(<span class="number">0.001</span>)</span><br><span class="line">        GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">        a = request.form[<span class="string">"on2"</span>]</span><br><span class="line">        b = request.form[<span class="string">"radio"</span>]</span><br><span class="line">        <span class="keyword">if</span> b == <span class="string">'one'</span>:</span><br><span class="line">            <span class="keyword">if</span> a == <span class="string">'on'</span>:</span><br><span class="line">                GPIO.output(<span class="number">11</span>, GPIO.LOW)</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,i = <span class="string">'ON'</span>,a = <span class="string">'checked'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,i = <span class="string">'OFF'</span>,a = <span class="string">'checked'</span>)</span><br><span class="line">        <span class="keyword">if</span> b == <span class="string">'two'</span>:</span><br><span class="line">                <span class="keyword">if</span> a == <span class="string">'on'</span>:</span><br><span class="line">                        GPIO.output(<span class="number">13</span>, GPIO.LOW)</span><br><span class="line">                        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,j = <span class="string">'ON'</span>,b = <span class="string">'checked'</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                        GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">                        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,j = <span class="string">'OFF'</span>,b = <span class="string">'checked'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,w = <span class="string">'please choose the botton!'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">        app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">8888</span>, debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>led开关<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"favicon.ico"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">.aa&#123;</span></span><br><span class="line"><span class="undefined">fontcolor:FOO;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>led控制<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;w&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span> <span class="attr">name</span>=<span class="string">"form1"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"radio"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"one"</span> &#123;&#123;<span class="attr">a</span>&#125;&#125;=<span class="string">"&#123;&#123;a&#125;&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"radio"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">开关1   </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"two"</span> &#123;&#123;<span class="attr">b</span>&#125;&#125;=<span class="string">"&#123;&#123;b&#125;&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"radio2"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">开关2</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>状态:&#123;&#123;i&#125;&#125;     状态:&#123;&#123;j&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:300px; height:75px; background-color: #0F0; font-size:24px; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color:#FFF"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"on2"</span> <span class="attr">id</span>=<span class="string">"on2"</span> <span class="attr">value</span>=<span class="string">"on"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:300px; height:75px; background-color:#F00;font-size:24px; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color:#FFF"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"on2"</span> <span class="attr">id</span>=<span class="string">"on2"</span> <span class="attr">value</span>=<span class="string">"off"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在同一局域网中的其他手机或电脑中输入树莓派的IP地址:8888，即可看到效果：<br><img src="http://z4a.net/images/2016/09/17/IOT.png" alt="网页效果图"></p><p>最后，选择开关1或者开关2，然后点击on或者off，即可看到LED灯会点亮或熄灭。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;硬件部分&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; 准备材料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;树莓派&lt;/li&gt;
&lt;li&gt;面包板（可选）&lt;/li&gt;
&lt;li&gt;杜邦线（可选）&lt;/li&gt;
&lt;li&gt;LED&lt;/li&gt;
&lt;li&gt;继电器&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;

      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="物联网" scheme="http://www.lifayu.com/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>Git连接Coding.net远程仓库时无法push</title>
    <link href="http://www.lifayu.com/2019/01/10/Git%E8%BF%9E%E6%8E%A5Coding-net%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%97%B6%E6%97%A0%E6%B3%95push/"/>
    <id>http://www.lifayu.com/2019/01/10/Git连接Coding-net远程仓库时无法push/</id>
    <published>2019-01-09T19:40:38.000Z</published>
    <updated>2019-01-09T11:41:25.287Z</updated>
    
    <content type="html"><![CDATA[<p>树莓派上安装了Git软件，在Coding.net上创建了版本库，然后clone下来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi:~ $ git clone git@git.coding.net:username/projectname.git</span><br></pre></td></tr></table></figure></p><p>成功clone下来，然后完成一次提交再push回去的时候却报错了，总结原因，写下我的折腾记录。。。</p><p>首先要生成ssh密钥，用命令<code>$ ssh-keygen -t rsa -C &quot;username@host.com&quot;</code>生成密钥，默认保存在<code>/home/user/.ssh</code> 目录下，包括<code>id_rsa</code>和<code>id_rsa.pub</code>两个文件，其中第一个是私钥，、第二个是公钥。<br>打开公钥，将所有内容复制，然后去coding.net的<code>我的账户-&gt;SSH公钥</code>，将复制的公钥内容粘贴进去，名称和有效日期按照自己的需求定义，最后点击添加。</p><p>然后再次push，还是报错，内容大致为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br></pre></td></tr></table></figure></p><p>于是继续百度……发现需要把专用密钥添加到ssh-agent的高速缓存中。该命令位置在/usr/bin/ssh-add。来自: <a href="http://man.linuxde.net/ssh-add" target="_blank" rel="noopener">http://man.linuxde.net/ssh-add</a><br>于是，执行上述命令，发现又报错了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-add ~/.ssh/rsa</span><br><span class="line">Could not open a connection to your authentication agent.</span><br></pre></td></tr></table></figure></p><p>继续搜索解决方案，最终按照以下方法解决了这个问题：<br>先执行  </p><pre><code>eval `ssh-agent` （是～键上面的那个`）</code></pre><p>再执行 <code>$ ssh-add ~/.ssh/rsa</code>成功，最后 <code>$ ssh-add -l</code> 就可以看到新加的rsa了。<br>完成如上步骤，再次尝试<code>$ git push</code>，发现终于可以推送成功了~~~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;树莓派上安装了Git软件，在Coding.net上创建了版本库，然后clone下来：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/sp
      
    
    </summary>
    
      <category term="Git" scheme="http://www.lifayu.com/categories/Git/"/>
    
    
      <category term="Git" scheme="http://www.lifayu.com/tags/Git/"/>
    
      <category term="Coding.net" scheme="http://www.lifayu.com/tags/Coding-net/"/>
    
  </entry>
  
  <entry>
    <title>解决树莓派软件源更新时公钥问题</title>
    <link href="http://www.lifayu.com/2019/01/10/%E8%A7%A3%E5%86%B3%E6%A0%91%E8%8E%93%E6%B4%BE%E8%BD%AF%E4%BB%B6%E6%BA%90%E6%9B%B4%E6%96%B0%E6%97%B6%E5%85%AC%E9%92%A5%E9%97%AE%E9%A2%98/"/>
    <id>http://www.lifayu.com/2019/01/10/解决树莓派软件源更新时公钥问题/</id>
    <published>2019-01-09T19:39:46.000Z</published>
    <updated>2019-01-09T11:40:22.652Z</updated>
    
    <content type="html"><![CDATA[<p>标签： 树莓派 软件源 公钥</p><hr><p>【参考链接】<br><a href="https://zhidao.baidu.com/question/137305372429911925.html" target="_blank" rel="noopener">如何更新Debian源和导入公钥</a><br><a href="https://www.cnblogs.com/arrongao/archive/2012/12/15/Hash_Sum_mismatch_key.html" target="_blank" rel="noopener">Ubuntu的软件源更新常见问题及解决</a></p><h1 id="【问题说明】"><a href="#【问题说明】" class="headerlink" title="【问题说明】"></a><strong>【问题说明】</strong></h1><p>在另一篇文章（<a href="https://www.jianshu.com/p/c8b20ff9ab6a" target="_blank" rel="noopener">树莓派安装KodExplorer变身私人云桌面</a>）中，为了安装PHP7.0(通过软件仓库安装而不是编译安装)，需要编辑文件<code>sudo vim /etc/apt/sources.list</code>，添加软件源：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi</span><br></pre></td></tr></table></figure></p><p>结果添加了软件源之后进行<code>sudo apt-get update</code>的时候报错，错误信息大致如下：</p><blockquote><p>W: GPG error: <a href="http://mirrordirector.raspbian.org/raspbian" target="_blank" rel="noopener">http://mirrordirector.raspbian.org/raspbian</a> stretch InRelease: The following signatures couldn’t be verified because the public key is not available: NO_PUBKEY 9165938D90FDDD2E<br>W: The repository ‘<a href="http://mirrordirector.raspbian.org/raspbian" target="_blank" rel="noopener">http://mirrordirector.raspbian.org/raspbian</a> stretch InRelease’ is not signed.<br>N: Data from such a repository can’t be authenticated and is therefore potentially dangerous to use.<br>N: See apt-secure(8) manpage for repository creation and user configuration details.<br>W: There is no public key available for the following key IDs:<br>9165938D90FDDD2E<br>E: Failed to fetch <a href="http://mirrordirector.raspbian.org/raspbian/dists/stretch/main/binary-armhf/Packages.xz" target="_blank" rel="noopener">http://mirrordirector.raspbian.org/raspbian/dists/stretch/main/binary-armhf/Packages.xz</a>  Hash Sum mismatch<br>E: Some index files failed to download. They have been ignored, or old ones used instead.</p></blockquote><p>错误信息大致意思为没有找到对应的公钥，所以软件源地址不被信任。</p><h1 id="【解决方案】"><a href="#【解决方案】" class="headerlink" title="【解决方案】"></a><strong>【解决方案】</strong></h1><p>解决方案就是导入对应仓库的公钥，命令格式为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --keyserver &lt;KeyServer&gt; --recv &lt;公钥签名&gt; gpg --export --armor &lt;公钥签名&gt; | sudo apt-key add</span><br></pre></td></tr></table></figure></p><p>也可以用如下格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-key adv --keyserver &lt;KeyServer&gt; --recv-keys &lt;公钥签名&gt;</span><br><span class="line">gpg --export --armor 40976EAF437D05B5 | sudo apt-key add -</span><br></pre></td></tr></table></figure></p><p>其中：<br><code>&lt;KeyServer&gt;</code>，key服务器，可以填 <code>keyserver.ubuntu.com</code> ，当然也可以填其他的。<br>在本例中，按照上面的格式，执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --keyserver  keyserver.ubuntu.com --recv-keys 9165938D90FDDD2E</span><br><span class="line">gpg --export --armor  9165938D90FDDD2E | sudo apt-key add -</span><br></pre></td></tr></table></figure></p><p>然后再执行<code>sudo apt-get update</code>即可解决问题。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签： 树莓派 软件源 公钥&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;【参考链接】&lt;br&gt;&lt;a href=&quot;https://zhidao.baidu.com/question/137305372429911925.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;如
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="软件源" scheme="http://www.lifayu.com/tags/%E8%BD%AF%E4%BB%B6%E6%BA%90/"/>
    
      <category term="公钥" scheme="http://www.lifayu.com/tags/%E5%85%AC%E9%92%A5/"/>
    
  </entry>
  
  <entry>
    <title>A Quick Guide to Using the MySQL APT Repository</title>
    <link href="http://www.lifayu.com/2019/01/10/A-Quick-Guide-to-Using-the-MySQL-APT-Repository/"/>
    <id>http://www.lifayu.com/2019/01/10/A-Quick-Guide-to-Using-the-MySQL-APT-Repository/</id>
    <published>2019-01-09T19:38:15.000Z</published>
    <updated>2019-01-09T11:39:29.949Z</updated>
    
    <content type="html"><![CDATA[<p>标签： MySQL APT Repository</p><hr><p>【来自：<a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/】" target="_blank" rel="noopener">https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/】</a></p><p><strong>Abstract</strong></p><p>This is a quick guide to using the MySQL APT repository, which provides <code>deb</code> packages for installing and managing the MySQL server, client, and other components on the following Linux platforms:</p><ul><li><p>Debian 7.x (“Wheezy”)</p></li><li><p>Debian 8.x (“Jessie”)</p></li><li><p>Debian 9.x (“Stretch”)</p></li><li><p>Ubuntu 14.04 LTS (“Trusty Tahr”)</p></li><li><p>Ubuntu 16.04 (“Xenial Xerus”)</p></li><li><p>Ubuntu 17.04 (“Zesty Zapu”)</p></li><li><p>Ubuntu 17.10 (“Artful Aardvark”)</p></li></ul><p>For legal information, see the <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#legalnotice" target="_blank" rel="noopener">Legal Notices</a>.</p><p>For help with using MySQL, please visit either the <a href="http://forums.mysql.com/" target="_blank" rel="noopener">MySQL Forums</a> or <a href="http://lists.mysql.com/" target="_blank" rel="noopener">MySQL Mailing Lists</a>, where you can discuss your issues with other MySQL users.</p><p>For additional documentation on MySQL products, including translations of the documentation into other languages, and downloadable versions in variety of formats, including HTML and PDF formats, see the <a href="http://dev.mysql.com/doc" target="_blank" rel="noopener">MySQL Documentation Library</a>.</p><p>Document generated on: 2018-01-06 (revision: 55374)</p><hr><p><strong>Table of Contents</strong></p><hr><ol><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-fresh-install" target="_blank" rel="noopener">Steps for a Fresh Installation of MySQL</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-select-series" target="_blank" rel="noopener">Selecting a Major Release Version</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-install-components" target="_blank" rel="noopener">Installing Additional MySQL Products and Components with APT</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qp-apt-install-from-source" target="_blank" rel="noopener">Installing MySQL from Source with the MySQL APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-upgrading" target="_blank" rel="noopener">Upgrading MySQL with the MySQL APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replacing" target="_blank" rel="noopener">Replacing a Native Distribution of MySQL Using the MySQL APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replace-direct" target="_blank" rel="noopener">Replacing a MySQL Server Installed by a Direct deb Package Download</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-remove" target="_blank" rel="noopener">Removing MySQL with APT</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#updating-apt-repo-client-lib" target="_blank" rel="noopener">Special Notes on Upgrading the Shared Client Libraries</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-cluster-install" target="_blank" rel="noopener">Installing MySQL NDB Cluster Using the APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-install-cluster-components" target="_blank" rel="noopener">Installing Additional MySQL NDB Cluster Products and Components</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-available" target="_blank" rel="noopener">Available Packages from the MySQL APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-repo-manual-setup" target="_blank" rel="noopener">Appendix A: Adding and Configuring the MySQL APT Repository Manually</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-repo-non-insteractive" target="_blank" rel="noopener">Appendix B: Installing MySQL Non-interactively with MySQL APT Repository</a></p></li><li><p><a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-repo-errors-sources-list" target="_blank" rel="noopener">Appendix C: Errors with Missing Entries in the Repository Sources List</a></p></li></ol><p><strong>Steps for a Fresh Installation of MySQL</strong></p><blockquote><p><strong>Note</strong><br>The following instructions assume that no versions of MySQL (whether distributed by Oracle or other parties) have already been installed on your system; if that is not the case, follow the instructions given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replacing" target="_blank" rel="noopener">Replacing a Native Distribution of MySQL Using the MySQL APT Repository</a> or <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replace-direct" target="_blank" rel="noopener">Replacing a MySQL Server Installed by a Direct deb Package Download</a> instead.</p></blockquote><h1 id="1-Adding-the-MySQL-APT-Repository"><a href="#1-Adding-the-MySQL-APT-Repository" class="headerlink" title="1.Adding the MySQL APT Repository"></a>1.Adding the MySQL APT Repository</h1><p>First, add the MySQL APT repository to your system’s software repository list. Follow these steps:</p><ol><li><p>Go to the download page for the MySQL APT repository at <a href="http://dev.mysql.com/downloads/repo/apt/" target="_blank" rel="noopener">http://dev.mysql.com/downloads/repo/apt/</a>.</p></li><li><p>Select and download the release package for your Linux distribution.</p></li><li><p>Install the downloaded release package with the following command, replacing <strong><em>version-specific-package-name</em></strong> with the name of the downloaded package (preceded by its path, if you are not running the command inside the folder where the package is):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg -i /PATH/version-specific-package-name.deb</span><br></pre></td></tr></table></figure></li></ol><p>For example, for version <strong><em>w.x.y-z</em></strong> of the package, the command is:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg -i mysql-apt-config_w.x.y-z_all.deb</span><br></pre></td></tr></table></figure></p><p>Note that the same package works on all supported Debian and Ubuntu platforms.</p><ol start="4"><li>During the installation of the package, you will be asked to choose the versions of the MySQL server and other components (for example, the MySQL Workbench) that you want to install. If you are not sure which version to choose, do not change the default options selected for you. You can also choose <strong>none</strong> if you do not want a particular component to be installed. After making the choices for all components, choose <strong>Ok</strong> to finish the configuration and installation of the release package.</li></ol><p>You can always change your choices for the versions later; see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-select-series" target="_blank" rel="noopener">Selecting a Major Release Version</a> for instructions.</p><ol start="5"><li>Update package information from the MySQL APT repository with the following command (<em>this step is mandatory</em>):<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get update</span><br></pre></td></tr></table></figure></li></ol><p>Instead of using the release package, you can also add and configure the MySQL APT repository manually; see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-repo-manual-setup" target="_blank" rel="noopener">Appendix A: Adding and Configuring the MySQL APT Repository Manually</a> for details.</p><blockquote><p><strong>Note</strong><br>Once the MySQL APT repository is enabled on your system, you will no longer be able to install any MySQL packages from your platform’s native software repositories until the MySQL APT repository is disabled.</p></blockquote><p>#2.Installing MySQL with APT<br>Install MySQL by the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure></p><p>This installs the package for the MySQL server, as well as the packages for the client and for the database common files.</p><p>During the installation, you are asked to supply a password for the root user for your MySQL installation.</p><blockquote><p><strong>Important</strong><br>Make sure you remember the root password you set. Users who want to set a password later can leave the <strong>password</strong> field blank in the dialogue box and just press <strong>Ok</strong>; in that case, root access to the server will be authenticated by <a href="https://dev.mysql.com/doc/refman/5.7/en/socket-pluggable-authentication.html" target="_blank" rel="noopener">Socket Peer-Credential Pluggable Authentication</a> for connections using a Unix socket file. You can set the root password later using the program <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-secure-installation.html" target="_blank" rel="noopener"><strong>mysql_secure_installation</strong></a>.</p></blockquote><p>#3.Starting and Stopping the MySQL Server<br>The MySQL server is started automatically after installation. You can check the status of the MySQL server with the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysql status</span><br></pre></td></tr></table></figure></p><p>Stop the MySQL server with the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysql stop</span><br></pre></td></tr></table></figure></p><p>To restart the MySQL server, use the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysql start</span><br></pre></td></tr></table></figure></p><blockquote><p><strong>Note</strong><br>A few third-party native repository packages that have dependencies on the native MySQL packages may not work with the MySQL APT repository packages and should not be used together with them; these include akonadi-backend-mysql, handlersocket-mysql-5.5, and zoneminder.</p></blockquote><p><strong>Selecting a Major Release Version</strong><br>By default, all installations and upgrades for your MySQL server and the other required components come from the release series of the major version you have selected during the installation of the configuration package (see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-setup" target="_blank" rel="noopener">Adding the MySQL APT Repository</a>). However, you can switch to another supported major release series at any time by reconfiguring the configuration package you have installed. Use the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg-reconfigure mysql-apt-config</span><br></pre></td></tr></table></figure></p><p>A dialogue box then asks you to choose the major release version you want. Make your selection and choose <strong>Ok</strong>. After returning to the command prompt, update package information from the MySQL APT repository with this command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>The latest version in the selected series will then be installed when you use the <strong>apt-get install</strong> command next time.</p><p>You can use the same method to change the version for any other MySQL component you want to install with the MySQL APT repository.</p><p><strong>Installing Additional MySQL Products and Components</strong><br>You can use APT to install individual components of MySQL from the MySQL APT repository. Assuming you already have the MySQL APT repository on your system’s repository list (see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-setup" target="_blank" rel="noopener">Adding the MySQL APT Repository for instructions</a>), first, use the following command to get the latest package information from the MySQL APT repository:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>Install any packages of your choice with the following command, replacing <strong><em>package-name</em></strong> with name of the package (<a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-available" target="_blank" rel="noopener">here</a> is a list of available packages):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install package-name</span><br></pre></td></tr></table></figure></p><p>For example, to install the MySQL Workbench:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install mysql-workbench-community</span><br></pre></td></tr></table></figure></p><p>To install the shared client libraries:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install libmysqlclient18</span><br></pre></td></tr></table></figure></p><p><strong>Installing MySQL from Source with the MySQL APT Repository</strong></p><blockquote><p><strong>Note</strong><br>This feature is only supported on 64-bit systems.</p></blockquote><p>You can download the source code for MySQL and build it using the MySQL APT Repository:</p><ol><li><p>Add the MySQL APT repository to your system’s repository list and choose the major release series you want (see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-setup" target="_blank" rel="noopener">Adding the MySQL APT Repository</a> for instructions).</p></li><li><p>Update package information from the MySQL APT repository with the following command (<em>this step is mandatory</em>):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>Install packages that the build process depends on:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get build-dep mysql-server</span><br></pre></td></tr></table></figure></li><li><p>Download the source code for the major components of MySQL and then build them (run this command in the folder in which you want the downloaded files and the builds to be located):</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; apt-get source -b mysql-server</span><br></pre></td></tr></table></figure></li></ol><p><code>deb</code> packages for installing the various MySQL components are created.</p><ol start="5"><li>Pick the <code>deb</code> packages for the MySQL components you need and install them with the command:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg -i package-name.deb</span><br></pre></td></tr></table></figure></li></ol><p>Notice that dependency relationships exist among the MySQL packages. For a basic installation of the MySQL server, install the database common files package, the client package, the client metapackage, the server package, and the server metapackage (in that order) with the following steps:</p><ul><li>Preconfigure the MySQL server package with the following command:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg-preconfigure mysql-community-server_version-and-platform-specific-part.deb</span><br></pre></td></tr></table></figure></li></ul><p>You will be asked to provide a password for the root user for your MySQL installation; see important information on root password given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-installing" target="_blank" rel="noopener">Installing MySQL with APT</a> above. You might also be asked other questions regarding the installation.</p><ul><li><p>Install the required packages with a single command:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo dpkg -i mysql-&#123;common,community-client,client,community-server,server&#125;_*.deb</span><br></pre></td></tr></table></figure></li><li><p>If you are being warned of unmet dependencies by <strong>dpkg</strong>, you can fix them using <strong>apt-get</strong>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install</span><br></pre></td></tr></table></figure></li></ul><p>Here are where the files are installed on the system:</p><ul><li><p>All configuration files (like <code>my.cnf</code>) are under <code>/etc/mysql</code></p></li><li><p>All binaries, libraries, headers, etc., are under <code>/usr/bin</code> and <code>/usr/sbin</code></p></li><li><p>The data directory is under <code>/var/lib/mysql</code></p></li></ul><p>See also information given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-starting-and-stopping-server" target="_blank" rel="noopener">Starting and Stopping the MySQL Server</a>.</p><p><strong>Upgrading MySQL with the MySQL APT Repository</strong></p><blockquote><p><strong>Notes</strong></p></blockquote><blockquote><ul><li>Before performing any upgrade to MySQL, follow carefully the instructions in <a href="https://dev.mysql.com/doc/refman/5.7/en/upgrading.html" target="_blank" rel="noopener">Upgrading MySQL</a>. Among other instructions discussed there, <strong><em>it is especially important to back up your database before the upgrade</em></strong>.</li></ul></blockquote><blockquote><ul><li>The following instructions assume that MySQL has been installed on your system using the MySQL APT repository; if that is not the case, follow the instructions given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replacing" target="_blank" rel="noopener">Replacing a Native Distribution of MySQL Using the MySQL APT Repository</a> or <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-replace-direct" target="_blank" rel="noopener">Replacing a MySQL Server Installed by a Direct deb Package Download</a> instead. Also notice that you cannot use the MySQL APT repository to upgrade a distribution of MySQL that you have installed from a nonnative software repository (for example, from MariaDB or Percona).</li></ul></blockquote><p>Use the MySQL APT repository to perform an in-place upgrade for your MySQL installation (that is, replacing the old version and then running the new version off the old data files) by following these steps:</p><ol><li><p>Make sure you already have the MySQL APT repository on your system’s repository list (see <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-setup" target="_blank" rel="noopener">Adding the MySQL APT Repository</a> for instructions).</p></li><li><p>Make sure you have the most up-to-date package information on the MySQL APT repository by running:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get update</span><br></pre></td></tr></table></figure></li><li><p>Note that, by default, the MySQL APT repository will update MySQL to the release series you have selected when you were <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-select-series" target="_blank" rel="noopener">adding the MySQL APT repository to your system</a>. If you want to upgrade to another release series, select it by following the steps given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-select-series" target="_blank" rel="noopener">Selecting a Major Release Version</a>.</p></li></ol><p>As a general rule, to upgrade from one release series to another, go to the next series rather than skipping a series. For example, if you are currently running MySQL 5.5 and wish to upgrade to a newer series, upgrade to MySQL 5.6 first before upgrading to 5.7, and so on.</p><blockquote><p><strong>Important</strong></p></blockquote><blockquote><ul><li>For important information about upgrading from MySQL 5.5 to 5.6, see U<a href="https://dev.mysql.com/doc/refman/5.6/en/upgrading-from-previous-series.html" target="_blank" rel="noopener">pgrading from MySQL 5.5 to 5.6</a>.</li></ul></blockquote><blockquote><ul><li>For important information about upgrading from MySQL 5.6 to 5.7, see <a href="https://dev.mysql.com/doc/refman/5.7/en/upgrading-from-previous-series.html" target="_blank" rel="noopener">Upgrading from MySQL 5.6 to 5.7</a>.</li></ul></blockquote><blockquote><ul><li>For important information about upgrading from MySQL 5.7 to 8.0, see <a href="https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html" target="_blank" rel="noopener">Upgrading from MySQL 5.7 to 8.0</a>.</li></ul></blockquote><blockquote><ul><li>In-place downgrading of MySQL is not supported by the MySQL APT repository. Follow the instructions in <a href="https://dev.mysql.com/doc/refman/5.7/en/downgrading.html" target="_blank" rel="noopener">Downgrading MySQL</a>.</li></ul></blockquote><ol start="4"><li>Upgrade MySQL by the following command:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure></li></ol><p>The MySQL server, client, and the database common files are upgraded if newer versions are available. To upgrade any other MySQL package, use the same <strong>apt-get install</strong> command and supply the name for the package you want to upgrade:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo apt-get install package-name</span><br></pre></td></tr></table></figure></p><p>To see the names of the packages you have installed from the MySQL APT repository, use the following command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; dpkg -l | grep mysql | grep ii</span><br></pre></td></tr></table></figure></p><blockquote><p><strong>Note</strong><br>If you perform a system-wide upgrade by the <strong>apt-get upgrade</strong>, only the library and development packages for MySQL will get upgraded with newer versions (if available). To upgrade other components including the server, client, test suite, etc., use the <strong>apt-get install</strong> command, as explained precedingly.</p></blockquote><ol start="5"><li>The MySQL server always restarts after an update by APT. Once the server restarts, you should run <strong>mysql_upgrade</strong> to check and possibly resolve any incompatibilities between the old data and the upgraded software. <strong>mysql_upgrade</strong> also performs other functions; see <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-upgrade.html" target="_blank" rel="noopener"><strong>mysql_upgrade</strong> — Check and Upgrade MySQL Tables</a> for details.</li></ol><p><strong>Replacing a Native Distribution of MySQL Using the MySQL APT Repository</strong><br>Variants and forks of MySQL are distributed by different parties through their own software repositories or download sites. You can replace a native distribution of MySQL installed from your Linux platform’s software repository with a distribution from the MySQL APT repository in a few steps.</p><blockquote><p><strong>Note</strong><br>The MySQL APT repository can only replace distributions of MySQL maintained and distributed by Debian or Ubuntu. It cannot replace any MySQL forks found either inside or outside of the distributions’ native repositories. To replace such MySQL forks, you have to uninstall them first before you install MySQL using the MySQL APT repository. Follow the instructions for uninstallation from the forks’ distributors and, before you proceed, make sure you back up your data and you know how to restore them to a new server.</p></blockquote><blockquote><p><strong>Warning</strong><br>A few third-party native repository packages that have dependencies on the native MySQL packages may not work with the MySQL APT repository packages and should not be used together with them; these include akonadi-backend-mysql, handlersocket-mysql-5.5, and zoneminder.</p></blockquote><p><strong>1.Backing Up Your Database</strong><br>To avoid loss of data, always back up your database before trying to replace your MySQL installation using the MySQL APT repository. See Backup and Recovery for instructions.</p><p><strong>2.Adding the MySQL APT Repository and Selecting a Release Series</strong><br>Add the MySQL APT repository to your system’s repository list and select the release series you want by following the instructions given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-setup" target="_blank" rel="noopener">Adding the MySQL APT Repository</a>.</p><p><strong>3.Replacing the Native Distribution by an APT Update</strong><br>By design, the MySQL APT repository replaces your native distribution of MySQL when you perform upgrades on the MySQL packages. To perform the upgrades, follow the same instructions given in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#apt-repo-upgrade-step4" target="_blank" rel="noopener">Step 4</a> in <a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/index.html#repo-qg-apt-upgrading" target="_blank" rel="noopener">Upgrading MySQL with the MySQL APT Repository</a>.</p><blockquote><p><strong>Warning</strong><br>Once the native distribution of MySQL has been replaced using the MySQL APT repository, purging the old MySQL packages from the native repository using the <strong>apt-get purge, apt-get remove –purge</strong>, or <strong>dpkg -P</strong> command might impact the newly installed MySQL server in various ways. Therefore, <em>do not purge the old MySQL packages from the native repository packages</em>.</p></blockquote><p><strong>Replacing a MySQL Server Installed by a Direct deb Package Download</strong><br><code>deb</code> packages from MySQL for installing the MySQL server and its components can either be downloaded from the MySQL Developer Zone’s MySQL Download page or from the MySQL APT repository. The deb packages from the two sources are different, and they install and configure MySQL in different ways.</p><p>If you have installed MySQL with the MySQL Developer Zone’s deb packages and now want to replace the installation using the ones from the MySQL APT repository, follow these steps:</p><p>Back up your database. See Backup and Recovery for instructions.</p><p>Follow the steps given previously for adding the MySQL APT repository.</p><p>Remove the old installation of MySQL by running:</p><p>shell&gt; sudo dpkg -P mysql<br>Install MySQL from the MySQL APT repository:</p><p>shell&gt; sudo apt-get install mysql-server<br>If needed, restore the data on the new MySQL installation. See Backup and Recovery for instructions.</p><p>Removing MySQL with APT<br>To uninstall the MySQL server and the related components that have been installed using the MySQL APT repository, first, remove the MySQL server using the following command:</p><p>shell&gt; sudo apt-get remove mysql-server<br>Then, remove any other software that was installed automatically with the MySQL server:</p><p>shell&gt; sudo apt-get autoremove<br>To uninstall other components, use the following command, replacing package-name with the name of the package of the component you want to remove:</p><p>shell&gt; sudo apt-get remove package-name<br>To see a list of packages you have installed from the MySQL APT repository, use the following command:</p><p>shell&gt; dpkg -l | grep mysql | grep ii<br>Special Notes on Upgrading the Shared Client Libraries<br>You can install the shared client libraries from MySQL APT repository by the following command (see Installing Additional MySQL Products and Components with APT for more details):</p><p>shell&gt; sudo apt-get install libmysqlclient20<br>If you already have the shared client libraries installed from you Linux platform’s software repository, it can be updated by the MySQL APT repository with its own package by using the same command (see Replacing the Native Distribution by an APT Update for more details).</p><p>After updating MySQL using the APT repository, applications compiled with older versions of the shared client libraries should continue to work.</p><p>If you recompile applications and dynamically link them with the updated libraries: as typical with new versions of shared libraries, any applications compiled using the updated, newer shared libraries might require those updated libraries on systems where the applications are deployed. If those libraries are not in place, the applications requiring the shared libraries might fail. Therefore, it is recommended that the packages for the shared libraries from MySQL be deployed on those systems. You can do this by adding the MySQL APT repository to the systems (see Adding the MySQL APT Repository) and installing the latest shared client libraries using the command given at the beginning of this section.</p><p>Installing MySQL NDB Cluster Using the APT Repository<br>Notes<br>The MySQL APT repository supports installation of MySQL NDB Cluster only for release 7.5.6 and later, and only for Debian 7.x and 8.x, and Ubuntu 14.04 and 16.04. For other methods of installing NDB Cluster, see Installation of NDB Cluster on Linux, or Installation of NDB Cluster on Linux, depending on the release series that you are using.</p><p>If you already have the MySQL server or MySQL NDB Cluster installed on your system, make sure it is stopped and you have your data and configuration files backed up before proceeding.</p><p>Known issues: The MySQL NDB Cluster packages have dependencies on the python-paramiko and libclass-methodmaker-perl packages, which are currently NOT installed automatically when you install the NDB Cluster packages; install those required packages yourself with this command before installing the NDB Cluster packages:</p><p>shell&gt; sudo apt-get install python-paramiko libclass-methodmaker-perl<br>Adding the MySQL APT Repository for MySQL NDB Cluster<br>Follow the steps in Adding the MySQL APT Repository to add the MySQL APT repository to your system’s repository list. During the installation process of the configuration package, when you are asked which MySQL product you want to configure, choose “MySQL Server &amp; Cluster”; when asked which version you wish to receive, choose “mysql-cluster-x.y.” After returning to the command prompt, go to Step 2 below.</p><p>If you already have the configuration package installed on your system, make sure it is up-to-date by running the following command:</p><p>shell&gt; sudo apt-get install mysql-apt-config<br>Then, use the same method described in Selecting a Major Release Version to select MySQL NDB Cluster for installation. When you are asked which MySQL product you want to configure, choose “MySQL Server &amp; Cluster”; when asked which version you wish to receive, choose “mysql-cluster-x.y.” After returning to the command prompt, update package information from the MySQL APT repository with this command:</p><p>shell&gt; sudo apt-get update<br>Installing MySQL NDB Cluster<br>For a minimal installation of MySQL NDB Cluster, follow these steps:</p><p>Install the components for SQL nodes:</p><p>shell&gt; sudo apt-get install mysql-cluster-community-server<br>You will be asked to provide a password for the root user for your SQL node; see important information on the root password given in Installing MySQL with APT above. You might also be asked other questions regarding the installation.</p><p>Install the executables for management nodes:</p><p>shell&gt; sudo apt-get install mysql-cluster-community-management-server<br>Install the executables for data nodes:</p><p>shell&gt; sudo apt-get install mysql-cluster-community-data-node<br>Configuring and Starting MySQL NDB Cluster<br>See Initial Configuration of NDB Cluster on how to configure MySQL NDB Cluster and Initial Startup of NDB Cluster on how to start it for the first time. When following those instructions, adjust them according to the following details regarding the SQL nodes of your NDB Cluster installation:</p><p>All configuration files (like my.cnf) are under /etc/mysql</p><p>All binaries, libraries, headers, etc., are under /usr/bin and /usr/sbin</p><p>The data directory is /var/lib/mysql</p><p>Installing Additional MySQL NDB Cluster Products and Components<br>You can use APT to install individual components and additional products of MySQL NDB Cluster from the MySQL APT repository (see Available Packages from the MySQL APT Repository for a list). To do that, assuming you already have the MySQL APT repository on your system’s repository list (see Adding the MySQL Yum Repository for MySQL NDB Cluster), follow the same steps given in Installing Additional MySQL Products and Components with APT.</p><p>Note<br>Known issue: Currently, not all components required for running the MySQL NDB Cluster test suite are installed automatically when you install the test suite package (mysql-cluster-community-test). Install the following packages with apt-get install before you run the test suite:</p><p>mysql-cluster-community-auto-installer</p><p>mysql-cluster-community-management-server</p><p>mysql-cluster-community-data-node</p><p>mysql-cluster-community-memcached</p><p>mysql-cluster-community-java</p><p>ndbclient-dev</p><p>Available Packages from the MySQL APT Repository<br>Table 1 Available Packages from the MySQL APT Repository</p><p>Package Name    Description<br>mysql-server</p><p>Metapackage for installing the MySQL server</p><p>mysql-community-server</p><p>MySQL server</p><p>mysql-client</p><p>Metapackage for installing the MySQL client</p><p>mysql-cluster-community-auto-installer</p><p>Auto installer for NDB Cluster</p><p>mysql-cluster-community-client</p><p>MySQL client for NDB Cluster</p><p>mysql-cluster-community-data-node</p><p>NDB Cluster data node</p><p>mysql-cluster-community-java</p><p>NDB Cluster Java drivers</p><p>mysql-cluster-community-management-server</p><p>NDB Cluster management node</p><p>mysql-cluster-community-memcached</p><p>NDB Cluster memcached server</p><p>mysql-cluster-community-server</p><p>MySQL server for NDB Cluster</p><p>mysql-cluster-community-source</p><p>Source package for NDB Cluster</p><p>mysql-cluster-community-test</p><p>NDB Cluster testsuite</p><p>mysql-community-client</p><p>MySQL client</p><p>mysql-common</p><p>MySQL database common files</p><p>libmysqlclient20</p><p>MySQL database client library</p><p>libmysqlclient-dev</p><p>MySQL database development files</p><p>libmysqld-dev</p><p>MySQL embedded database development files</p><p>mysql-testsuite</p><p>Metapackage for installing the MySQL test suite</p><p>mysql-community-test</p><p>MySQL test suite</p><p>mysql-community-bench</p><p>MySQL benchmark suite</p><p>mysql-community-source</p><p>MySQL source code</p><p>mysql-workbench-community<br>MySQL Workbench (not available for Debian platforms)</p><p>mysql-connector-python-py3<br>MySQL Connector/Python for Ubuntu 14.04, 14.10, and 15.04 with Python 3.2 or later</p><p>mysql-connector-python<br>MySQL Connector/Python for Debian 7.x or Debian 8.x with Python 2.6.3 or later, and for Ubuntu 14.04, 14.10, or 15.04 with Python 2.6.3 to 3.1</p><p>mysql-utilities    MySQL Utilities (currently not available for Debian 8.x)<br>mysql-router    MySQL Router<br>ndbclient    NDB Cluster client<br>ndbclient-dev    NDB Cluster client development library</p><p>Appendix A: Adding and Configuring the MySQL APT Repository Manually<br>Here are the steps for adding manually the MySQL APT repository to your system’s software repository list and configuring it, without using the release packages provided by MySQL:</p><p>Download the MySQL GPG Public key (see Signature Checking Using GnuPG on how to do that) and save it to a file, without adding any spaces or special characters. Then, add the key to your system’s GPG keyring with the following command:</p><p>shell&gt; sudo apt-key add path/to/signature-file<br>Alternatively, you can download the GPG key to your APT keyring directly using the apt-key utility:</p><p>shell&gt; sudo apt-key adv –keyserver pgp.mit.edu –recv-keys 5072E1F5<br>Create a file named /etc/apt/sources.list.d/mysql.list, and put into it repository entries in the following format:</p><p>deb <a href="http://repo.mysql.com/apt/{debian|ubuntu}/" target="_blank" rel="noopener">http://repo.mysql.com/apt/{debian|ubuntu}/</a> {jessie|wheezy|trusty|utopic|vivid} {mysql-5.6|mysql-5.7|workbench-6.2|utilities-1.4|connector-python-2.0}<br>Pick the relevant options for your repository set up:</p><p>Choose “debian” or “ubuntu” according to whether you are on a Debian or Ubuntu platform.</p><p>Choose “jessie,” “ wheezy,” “trusty,” “utopic,” or “vivid,” according to the version of your operating system.</p><p>For installing MySQL server, client, and database common files, choose “mysql-5.6” or “mysql-5.7” according to the MySQL version you want. To switch to another release series later, come back and adjust the entry with your new choice.</p><p>Note<br>If you already have a version of MySQL installed on your system, do not choose a lower version at this step, or it might result in an unsupported downgrade operation.</p><p>For installing components like MySQL Workbench, MySQL Utilities, or MySQL Connector Python, create a single entry for each of them, specifying respectively “workbench-6.2,” “utilities-1.4,” or “connector-python-2.0” at the end of each entry.</p><p>As an example, for a Ubuntu 14.04 platform, here are the lines in your mysql.list files for installing MySQL 5.6 and MySQL Connector/Python from the MySQL APT repository:</p><p>deb <a href="http://repo.mysql.com/apt/ubuntu/" target="_blank" rel="noopener">http://repo.mysql.com/apt/ubuntu/</a> trusty mysql-5.6<br>deb <a href="http://repo.mysql.com/apt/ubuntu/" target="_blank" rel="noopener">http://repo.mysql.com/apt/ubuntu/</a> trusty connector-python-2.0<br>Use the following command to get the most up-to-date package information from the MySQL APT repository:</p><p>shell&gt; sudo apt-get update<br>You have configured your system to use the MySQL APT repository and are now ready to continue with Installing MySQL with APT or Installing Additional MySQL Products and Components with APT.</p><p>Appendix B: Installing MySQL Non-interactively with MySQL APT Repository<br>For non-interactive installations of MySQL with the MySQL APT repository, answer the interactive questions asked by the server package by setting the relevant debconf variables in, for example, your installation script. These are the variables to set:</p><p>root_password: This is the root password for the server installation.</p><p>root_password_again: This is the root password, entered a second time for confirmation.</p><p>The following are steps from a sample script that set the debconf variables and then install MySQL non-interactively by setting the environment variable DEBIAN_FRONTEND to noninteractive:</p><p>sudo debconf-set-selections &lt;&lt;&lt; “mysql-community-server mysql-community-server/root-pass password mypassword”<br>sudo debconf-set-selections &lt;&lt;&lt; “mysql-community-server mysql-community-server/re-root-pass password mypassword”<br>sudo DEBIAN_FRONTEND=noninteractive apt-get -y install mysql-server<br>The password variables are erased automatically after MySQL has been installed, so they need to be set again if the installation is to be repeated.</p><p>Appendix C: Errors with Missing Entries in the Repository Sources List<br>Users who configured their systems some time ago with an early and now outdated version of the release package for the MySQL APT repository might see a warning similar to the one below when running the apt-get update command:</p><p>shell&gt; sudo apt-get update<br>W: Failed to fetch <a href="http://repo.mysql.com/apt/ubuntu/dists/trusty/InRelease" target="_blank" rel="noopener">http://repo.mysql.com/apt/ubuntu/dists/trusty/InRelease</a><br>Unable to find expected entry ‘utilities-1.4/binary-amd64/Packages’ in<br>Release file (Wrong sources.list entry or malformed file)<br>The apt-get update command fails with this, and it is no longer possible to update package information for the MySQL APT repository. This is due to outdated entries in the sources list, and you can resolve the problem by the following steps:</p><p>Delete the file /etc/apt/sources.list.d/mysql.list from your system. That removes all sources list entries for the MySQL APT repository.</p><p>Download and install the latest version of the release package for the MySQL repository by following the steps given in Adding the MySQL APT Repository, including the sudo apt-get update step. It reconfigures your system properly for using the MySQL APT repository.</p><p>Legal Notices<br>Copyright © 1997, 2018, Oracle and/or its affiliates. All rights reserved.</p><p>This software and related documentation are provided under a license agreement containing restrictions on use and disclosure and are protected by intellectual property laws. Except as expressly permitted in your license agreement or allowed by law, you may not use, copy, reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish, or display any part, in any form, or by any means. Reverse engineering, disassembly, or decompilation of this software, unless required by law for interoperability, is prohibited.</p><p>The information contained herein is subject to change without notice and is not warranted to be error-free. If you find any errors, please report them to us in writing.</p><p>If this is software or related documentation that is delivered to the U.S. Government or anyone licensing it on behalf of the U.S. Government, then the following notice is applicable:</p><p>U.S. GOVERNMENT END USERS: Oracle programs, including any operating system, integrated software, any programs installed on the hardware, and/or documentation, delivered to U.S. Government end users are “commercial computer software” pursuant to the applicable Federal Acquisition Regulation and agency-specific supplemental regulations. As such, use, duplication, disclosure, modification, and adaptation of the programs, including any operating system, integrated software, any programs installed on the hardware, and/or documentation, shall be subject to license terms and license restrictions applicable to the programs. No other rights are granted to the U.S. Government.</p><p>This software or hardware is developed for general use in a variety of information management applications. It is not developed or intended for use in any inherently dangerous applications, including applications that may create a risk of personal injury. If you use this software or hardware in dangerous applications, then you shall be responsible to take all appropriate fail-safe, backup, redundancy, and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any damages caused by use of this software or hardware in dangerous applications.</p><p>Oracle and Java are registered trademarks of Oracle and/or its affiliates. Other names may be trademarks of their respective owners.</p><p>Intel and Intel Xeon are trademarks or registered trademarks of Intel Corporation. All SPARC trademarks are used under license and are trademarks or registered trademarks of SPARC International, Inc. AMD, Opteron, the AMD logo, and the AMD Opteron logo are trademarks or registered trademarks of Advanced Micro Devices. UNIX is a registered trademark of The Open Group.</p><p>This software or hardware and documentation may provide access to or information about content, products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and expressly disclaim all warranties of any kind with respect to third-party content, products, and services unless otherwise set forth in an applicable agreement between you and Oracle. Oracle Corporation and its affiliates will not be responsible for any loss, costs, or damages incurred due to your access to or use of third-party content, products, or services, except as set forth in an applicable agreement between you and Oracle.</p><p>This documentation is NOT distributed under a GPL license. Use of this documentation is subject to the following terms:</p><p>You may create a printed copy of this documentation solely for your own personal use. Conversion to other formats is allowed as long as the actual content is not altered or edited in any way. You shall not publish or distribute this documentation in any form or on any media, except if you distribute the documentation in a manner similar to how Oracle disseminates it (that is, electronically for download on a Web site with the software) or on a CD-ROM or similar medium, provided however that the documentation is disseminated together with the software on the same medium. Any other use, such as any dissemination of printed copies or use of this documentation, in whole or in part, in another publication, requires the prior written consent from an authorized representative of Oracle. Oracle and/or its affiliates reserve any and all rights to this documentation not expressly granted above.</p><p>Documentation Accessibility<br>For information about Oracle’s commitment to accessibility, visit the Oracle Accessibility Program website at <a href="http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=docacc" target="_blank" rel="noopener">http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=docacc</a>.</p><p>Access to Oracle Support<br>Oracle customers that have purchased support have access to electronic support through My Oracle Support. For information, visit <a href="http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=info" target="_blank" rel="noopener">http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=info</a> or visit <a href="http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=trs" target="_blank" rel="noopener">http://www.oracle.com/pls/topic/lookup?ctx=acc&amp;id=trs</a> if you are hearing impaired.</p><p>  [37ml#repo-qg-apt-replace-direct</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签： MySQL APT Repository&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;【来自：&lt;a href=&quot;https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/】&quot; target=&quot;_blank&quot; rel=&quot;noopene
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="MySQL" scheme="http://www.lifayu.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>树莓派 RASPBERRY PI SD卡系统备份与还原</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%A0%91%E8%8E%93%E6%B4%BE-RASPBERRY-PI-SD%E5%8D%A1%E7%B3%BB%E7%BB%9F%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F/"/>
    <id>http://www.lifayu.com/2019/01/10/树莓派-RASPBERRY-PI-SD卡系统备份与还原/</id>
    <published>2019-01-09T19:34:49.000Z</published>
    <updated>2019-01-09T11:35:49.604Z</updated>
    
    <content type="html"><![CDATA[<p>标签： 树莓派 Linux 系统备份</p><hr><p>【<strong>原文链接</strong>：<a href="http://www.fendou.info/raspberry-pi-sd-card-backup-and-recovery/comment-page-1/】" target="_blank" rel="noopener">http://www.fendou.info/raspberry-pi-sd-card-backup-and-recovery/comment-page-1/】</a><br><strong>【没看到作者的声明，转侵删】</strong></p><hr><p>近半年时间用来监控陆龟的树莓派 Raspberry Pi  还算稳定，可到了冬天龟箱里的加热灯长时间加热导致树莓派温度很高，时不时的自动重启。如果每次都能正常起来也就罢了，可偶尔会挂不上SD卡的文件系统直接宕了，还得用备份还原SD卡(如果没备份那就悲催了)。</p><p>买树莓派的时候只想到存储空间大能多存的东西于是买了个16GB的SD卡，可实际用了2G空间不到。最开始备份树莓派SD卡是用windwos下的<a href="https://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">Win32DiskImager</a>，这种备份恢复树莓派的方式最简单，Windows+读卡器+Win32DiskImager 就可以对树莓派的SD做完整的镜像备份，可我的树莓派用的16GB的SD卡，备份还原既浪费空间又浪费时间。</p><p>后来发现一种直接用dd备份树莓派的方法，就是先在树莓派上mount一个共享目录(空间大于SD卡的即可)，然后用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/mmcblk0 of=raspberrypi.img bs=1M</span><br></pre></td></tr></table></figure></p><p>备份成raspberrypi.img镜像文件，恢复的方式有两种：一是用Win32DiskImager在windows系统上直接写到SD卡中；二是在Linux系统中用(先fdisk -l查看设备)</p><p>dd if=/path/to/image/raspberrypi.img of=/dev/sdx<br>这种方式要考虑网络环境，如果你的树莓派接的无线网卡，最好放弃这种方式，太慢！</p><p>最后介绍最终极的备份还原树莓派的方式，利用dump 和 restore。先说明一下这种备份方式的好处：一是可以像Windows的Ghost只dump有效数据，也就是说可以最有效的节省备份空间，树莓派有多少数据就生成多大的镜像文件；二是可以恢复到比原来SD卡空间的小的SD卡上，我原来用的树莓派是16GB，现在可以把镜像恢复到8GB或者4GB的SD中。下面看详细步骤(不想看可以直接跳到最后的脚本)</p><p><strong>一、安装需要的软件</strong></p><p>dosfstools：fat32分区格式化工具<br>dump：dump &amp; restore 备份工具<br>parted &amp; kpartx：虚拟磁盘工具</p><p>执行安装脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install dosfstools</span><br><span class="line">sudo apt-get install dump</span><br><span class="line">sudo apt-get install parted</span><br><span class="line">sudo apt-get install kpartx</span><br></pre></td></tr></table></figure></p><p><strong>二、生成新的img文件</strong><br>先df -h查看下树莓派实际使用空间然后在决定生成文件大小，下面命令生成块大小为1MB总大小为2500MB的镜像文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dd if=/dev/zero of=raspberrypi.img bs=1MB count=2500</span><br></pre></td></tr></table></figure></p><p><strong>三、分割虚拟磁盘</strong></p><p>利用parted将刚才生成的虚拟盘分割成两个分区</p><p>第一个分割区采用FAT32格式，由sector 8192开始到sector 12879，约62.9MB<br>第二个分割区采用EXT4，由sector 122880开始到结束。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo parted raspberrypi.img --script -- mklabel msdos</span><br><span class="line">sudo parted raspberrypi.img --script -- mkpart primary fat32 8192s 122879s</span><br><span class="line">sudo parted raspberrypi.img --script -- mkpart primary ext4 122880s -1</span><br></pre></td></tr></table></figure></p><p><strong>四、挂载虚拟磁盘并格式化</strong></p><p>loopdevice：执行 losetup 连接 img 文件的 loop device<br>device：执行完 kpartx 后，虚拟磁盘代号。<br>partBoot：由 device 加上 p1 组合而成的 FAT32 虚拟磁盘分区。<br>partRoot：由 device 加上 p2 组合而成的 EXT4 虚拟磁盘分区。<br>首先建立虚拟磁盘并分区<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loopdevice=`sudo losetup -f --show raspberrypi.img`</span><br><span class="line">device=`sudo kpartx -va $loopdevice | sed -E &apos;s/.*(loop[0-9])p.*/\1/g&apos; | head -1`</span><br><span class="line">device=&quot;/dev/mapper/$&#123;device&#125;&quot;</span><br><span class="line">partBoot=&quot;$&#123;device&#125;p1&quot;</span><br><span class="line">partRoot=&quot;$&#123;device&#125;p2&quot;</span><br></pre></td></tr></table></figure></p><p>格式化虚拟磁盘分区<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkfs.vfat $partBoot</span><br><span class="line">sudo mkfs.ext4 $partRoot</span><br></pre></td></tr></table></figure></p><p><strong>五、开始备份</strong><br>fat32虚拟磁盘分区建立好后直接用cp命令备份文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t vfat $partBoot /media</span><br><span class="line">sudo cp -rfp /boot/* /media/</span><br><span class="line">sudo umount /media</span><br></pre></td></tr></table></figure></p><p>ext4 linux虚拟磁盘分区用dump &amp; restore 备份<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t ext4 $partRoot /media/</span><br><span class="line">cd /media</span><br><span class="line">sudo dump -0uaf - / |  sudo restore -rf -</span><br><span class="line">cd</span><br><span class="line">sudo umount /media</span><br></pre></td></tr></table></figure></p><p><strong>六、卸载虚拟磁盘</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo kpartx -d $loopdevice</span><br><span class="line">sudo losetup -d $loopdevice</span><br></pre></td></tr></table></figure></p><p>经过以上六步树莓派中的数据文件就全部备份到raspberrypi.img中了，你既可以在Windows中用Win32DiskImager将镜像恢复到SD卡，也可以在Linux用dd还原到SD卡，而且不要求恢复SD卡的大小跟原来的一样(不同品牌相同大小的SD卡实际可用空间不一样的，坑！)，这样就可以很方便的更换SD卡。当用此SD卡启动树莓派的时候执行raspi-config -&gt;Expand Filesystem 即可扩展未使用的空间。</p><p>这里就是最后的脚本，包含了以上六步，只需要编辑<code>sudo vi backup.sh</code>复制以下内容，<code>sudo chmod 777 backup.sh</code>，然后<code>sudo ./backup.sh</code>就可以在当前脚本目录中生成树莓派的SD卡镜像了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">sudo dd if=/dev/zero of=raspberrypi.img bs=1MB count=2500</span><br><span class="line">sudo parted raspberrypi.img --script -- mklabel msdos</span><br><span class="line">sudo parted raspberrypi.img --script -- mkpart primary fat32 8192s 122879s</span><br><span class="line">sudo parted raspberrypi.img --script -- mkpart primary ext4 122880s -1</span><br><span class="line"></span><br><span class="line">loopdevice=`sudo losetup -f --show raspberrypi.img`</span><br><span class="line">device=`sudo kpartx -va $loopdevice | sed -E &apos;s/.*(loop[0-9])p.*/\1/g&apos; | head -1`</span><br><span class="line">device=&quot;/dev/mapper/$&#123;device&#125;&quot;</span><br><span class="line">partBoot=&quot;$&#123;device&#125;p1&quot;</span><br><span class="line">partRoot=&quot;$&#123;device&#125;p2&quot;</span><br><span class="line">sudo mkfs.vfat $partBoot</span><br><span class="line">sudo mkfs.ext4 $partRoot</span><br><span class="line">sudo mount -t vfat $partBoot /media</span><br><span class="line">sudo cp -rfp /boot/* /media/</span><br><span class="line">sudo umount /media</span><br><span class="line">sudo mount -t ext4 $partRoot /media/</span><br><span class="line">cd /media</span><br><span class="line">sudo dump -0uaf - / | sudo restore -rf -</span><br><span class="line">cd</span><br><span class="line">sudo umount /media</span><br><span class="line">sudo kpartx -d $loopdevice</span><br><span class="line">sudo losetup -d $loopdevice</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;标签： 树莓派 Linux 系统备份&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;【&lt;strong&gt;原文链接&lt;/strong&gt;：&lt;a href=&quot;http://www.fendou.info/raspberry-pi-sd-card-backup-and-recovery/comment-pa
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>Nextcloud个人云存储绝佳选择：一键自动安装方法和云盘使用体验</title>
    <link href="http://www.lifayu.com/2019/01/10/Nextcloud%E4%B8%AA%E4%BA%BA%E4%BA%91%E5%AD%98%E5%82%A8%E7%BB%9D%E4%BD%B3%E9%80%89%E6%8B%A9%EF%BC%9A%E4%B8%80%E9%94%AE%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%92%8C%E4%BA%91%E7%9B%98%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C/"/>
    <id>http://www.lifayu.com/2019/01/10/Nextcloud个人云存储绝佳选择：一键自动安装方法和云盘使用体验/</id>
    <published>2019-01-09T19:33:37.000Z</published>
    <updated>2019-01-09T11:35:19.899Z</updated>
    
    <content type="html"><![CDATA[<p>【原文链接：<a href="https://wzfou.com/nextcloud/】" target="_blank" rel="noopener">https://wzfou.com/nextcloud/】</a></p><hr><p>搭建个人云存储一般会想到ownCloud，堪称是自建云存储服务的经典。而<a href="https://wzfou.com/tag/nextcloud/" target="_blank" rel="noopener">Nextcloud</a>是ownCloud原开发团队打造的号称是“下一代”存储。初一看觉得“口气”不小，刚推出来就重新“定义”了Cloud，真正试用过后就由衷地赞同这个Nextcloud：它是个人云存储服务的绝佳选择。</p><p>与ownCloud相比，Nextcloud的功能丝毫没有减弱，甚至由于可以安装云存储服务应用，自制性更强，也更符合用户的需求。Nextcloud官网的帮助文档写得相当地详细，几乎任何关于Nextcloud的问题都可以找到答案，这说明Nextcloud开发团队确实比ownCloud更加优秀。</p><p>一开始以为Nextcloud只是一个网盘<a href="https://wzfou.com/tag/siyou-yuncunchu/" target="_blank" rel="noopener">云存储</a>，后来看到Nextcloud内置了Office文档、图片相册、日历联系人、两步验证、文件管理、RSS阅读等丰富的应用，我发现Nextcloud已经仅仅可以用作个人或者团队存储与共享，还可以打造成为一个个人办公平台，几乎相当于一个个人的Dropbox了。</p><p>Nextcloud运行环境与平常我们常用的程序差不多，LAMP是官方首选，不过LNMP也照样可以运行，只不过需要自己写URL重写规则。当然，官方还提供了SNAP一键安装包，一分钟内就可以在VPS上部署好Nextcloud，非常地方便。本篇文章就来分享SNAP安装Nextcloud的方法。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_00.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-e69e08a7b67df2bc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Nextcloud个人云存储绝佳选择:一键安装自带免费客户端内置文档\相册\日历丰富应用"></a> </p><p>更多的关于邮件分发、CDN加速和<a href="https://wzfou.com/tag/vps-tongbu/" target="_blank" rel="noopener">VPS同步</a>等工具，你还可以看看：</p><ol><li><a href="https://wzfou.com/mailchimp/" target="_blank" rel="noopener">利用MailChimp建立RSS邮件订阅平台-每月免费12000封邮件可加2000用户</a></li><li><a href="https://wzfou.com/fikker/" target="_blank" rel="noopener">用Fikker自建CDN-支持Https,页面缓存,实时监控,流量统计,防CC攻击</a></li><li><a href="https://wzfou.com/lsyncd/" target="_blank" rel="noopener">Lsyncd搭建同步镜像-用Lsyncd实现本地和远程服务器之间实时同步</a></li></ol><p><strong>PS：2017年9月27日更新，</strong>想要利用Nextcloud实现离线下载可以看这里：<a href="https://wzfou.com/nextcloud-aria2/" target="_blank" rel="noopener">Nextcloud离线下载搭建方法-整合Aria2和AriaNg、Aria2 WebUI实现离线下载</a>。</p><h2 id="一、Nextcloud一键安装"><a href="#一、Nextcloud一键安装" class="headerlink" title="一、Nextcloud一键安装"></a>一、Nextcloud一键安装</h2><p>Nextcloud官网：</p><blockquote><ol><li><a href="https://nextcloud.com/" target="_blank" rel="noopener">https://nextcloud.com/</a></li><li>nextcloud snap：<a href="https://github.com/nextcloud/nextcloud-snap" target="_blank" rel="noopener">https://github.com/nextcloud/nextcloud-snap</a></li></ol></blockquote><p><a href="https://wzfou.com/tag/nextcloud-snap/" target="_blank" rel="noopener">nextcloud snap</a>目前包含以下组件（会自动更新升级，请及时关注）：</p><blockquote><p>Nextcloud 11.0.3<br>Apache 2.4<br>PHP 7<br>MySQL 5.7<br>Redis 3.2<br>mDNS for network discovery</p></blockquote><p><strong>安装前修改好hostname。</strong>在终端窗口中输入命令：hostname或uname –n，均可以查看到当前主机的主机名，修改参考如下（Ubuntu修改可参考我之前的一篇文章：<a href="https://wzfou.com/ispconfig-3-1/#ISPConfig_31" target="_blank" rel="noopener">ISPConfig 3.1 安装方法</a>）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line">150.95.150.57 pan.wzfou.net pan  </span><br><span class="line"></span><br><span class="line">vim /etc/hostname</span><br><span class="line">pan.wzfou.net</span><br><span class="line">hostname -F /etc/hostname #重启</span><br><span class="line">hostname #再次查看</span><br></pre></td></tr></table></figure><p><strong>一键安装方法：</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install snap</span><br><span class="line">sudo apt-get install snapd</span><br><span class="line">sudo snap install nextcloud</span><br></pre></td></tr></table></figure><p>如下图表示安装成功了。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_01.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-eb4a774214ed86ce.gif?imageMogr2/auto-orient/strip" alt="Nextcloud一键安装成功"></a> </p><p>接着，打开你的域名或者IP地址，然后会让你设置好管理员账号与密码，确定，完成安装。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_02.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-982b42de3adc185e.gif?imageMogr2/auto-orient/strip" alt="Nextcloud打开域名"></a> </p><p>可能有的人不想使用Snap安装方法，可以看看手动在VPS上部署LNMP/LAMP安装Nextcloud方法：<a href="https://wzfou.com/nextcloud-install/" target="_blank" rel="noopener">手动安装NextCloud教程</a>。</p><p><strong>选择Snap还是VPS手动？</strong>不用纠结，以下官方的回答：</p><blockquote><p><strong>snap优点</strong>：The snap is nice for getting up and running quickly with minimal space, and will work great if you’re happy not messing with it. Since it’s a snap you also get the benefit of automatic updates and the ability to rollback without worrying about needing to take a snapshot, etc.</p><p>#翻译：snap安装快捷，傻瓜式一键安装，几分钟内搞定。同时，snap支持自动升级、回滚等，你无需使用复杂的命令工具。</p><p><strong>snap缺点：</strong>However, the snap is very opinionated. Don’t want to use Apache? Sorry, the snap uses it. Don’t want to use MySQL? Sorry, MariaDB does not run on ARM. Something other than PHP 7.0.15? We picked the version we feel gives the best results. In other words, it’s not very tinker-friendly. We don’t do this to be mean, <strong>we do this so that we can reliably update it without your needing to worry about it</strong>.</p><p>#翻译：snap不能自定义，只能使用snap既定的MysqL、apache、PHP等。不过，这样的好处就是经过官方测试过的运行稳定且有利于后期自动升级。</p><p><strong>VPS手动安装优缺点：</strong>The VM is much more flexible. It’s a full version of Ubuntu server edition, allowing you to tweak whatever you need and it comes with many apps which are not that easy to configure for inexperienced administrators. This of course makes it larger. You’ll also need to make sure you maintain it and keep the OS up-to-date. Since it’s virtualized you can assign disk, CPU, memory, and network quotas to it (you’d need to install the snap in an lxc container or a VM to get the same abilities).</p><p>#翻译：VPS手动则比较灵活，你可以自已配置磁盘、CPU、内存和网络，但是同时你需要懂得如何维护好VPS操作系统。</p></blockquote><h2 id="二、Nextcloud管理使用"><a href="#二、Nextcloud管理使用" class="headerlink" title="二、Nextcloud管理使用"></a>二、Nextcloud管理使用</h2><p>以下就是Nextcloud的管理中心面板，是不是与我们用过的Dropbox有点类似-简洁。左边就是分享的链接、收藏、WebDav地址，中间就是我们上传的图片、文档、程序等了，点击可以查看详情。右边有管理、个人、用户等。（点击放大）</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_04.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-a240e4fa4be90359.gif?imageMogr2/auto-orient/strip" alt="Nextcloud用户中心"></a> </p><p>Nextcloud上传的视频支持在线播放。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_05.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-433dedd13a82925d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Nextcloud视频播放"></a> </p><p>Nextcloud上传的图片可以像幻灯片一样浏览。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_06.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-9da8d4e1293d6e2f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Nextcloud浏览图片"></a> </p><p>Nextcloud支持给分享的文档、图片等设置有效期、密码保护等，有点类似于百度网盘了。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_07.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-77af3f35cd4c4380.gif?imageMogr2/auto-orient/strip" alt="Nextcloud分享文档"></a> </p><p>别人打开你的共享链接后就可以预览到图片或者视频了，也可以直接点击下载了。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_08.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-d26cfb414d533d6a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Nextcloud下载文件"></a> </p><p>在Nextcloud的个人中心页面，可以修改个人信息、应用密码、同步客户端等。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_09.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-c605433b3494a0d8.gif?imageMogr2/auto-orient/strip" alt="Nextcloud个人中心"></a> </p><p>Nextcloud在服务器管理页面，则可以查看CPU、内存等使用情况、切换Nextcloud主题、是否对存储在Nextcloud的文件进行加密、激活插件等。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_09_1.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-ddeb550d0e1941a8.gif?imageMogr2/auto-orient/strip" alt="Nextcloud服务器设置"></a> </p><h2 id="三、Nextcloud同步客户端"><a href="#三、Nextcloud同步客户端" class="headerlink" title="三、Nextcloud同步客户端"></a>三、Nextcloud同步客户端</h2><p>Nextcloud提供了免费的同步客户端供大家下载使用，支持PC和手机。下载地址：<a href="https://nextcloud.com/install/#install-clients" target="_blank" rel="noopener">https://nextcloud.com/install/#install-clients</a></p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_03.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-b74c49cc33c3535d.gif?imageMogr2/auto-orient/strip" alt="Nextcloud客户端"></a> </p><p>在电脑上运行Nextcloud同步客户端，先填入你的Nextcloud地址。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_10.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-4cde727258fbae71.gif?imageMogr2/auto-orient/strip" alt="Nextcloud运行客户端"></a> </p><p>然后就是输入Nextcloud的用户名以及客户端专用密码，这个专用密码需要到Nextcloud的个人中心页面生成。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_11.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-f256ff2944190fbd.gif?imageMogr2/auto-orient/strip" alt="Nextcloud填入专用密码"></a> </p><p>Nextcloud允许你选择同步某一个文件夹，还是同步整个Nextcloud账户。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_12.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-e10ce193154227e8.gif?imageMogr2/auto-orient/strip" alt="Nextcloud同步文件夹设置"></a> </p><p>连接好了后，你就可以在本地看到Nextcloud同步过来的文件了，你在本地的操作都会影响到Nextcloud云端的文件存储，自动实现同步。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_13.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-59af2fd8d7529b28.gif?imageMogr2/auto-orient/strip" alt="Nextcloud本地同步"></a> </p><p>以下是Nextcloud的手机同步客户端，功能差不多。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_14.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-a1daedbdc4b9ca51.gif?imageMogr2/auto-orient/strip" alt="Nextcloud手机端"></a> </p><p>Nextcloud手机客户端支持自动上传文件，还有设置下载路径等等。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_15.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-4447adcb122a9212.gif?imageMogr2/auto-orient/strip" alt="Nextcloud备份手机文件"></a> </p><h2 id="四、Nextcloud添加应用"><a href="#四、Nextcloud添加应用" class="headerlink" title="四、Nextcloud添加应用"></a>四、Nextcloud添加应用</h2><p>Nextcloud官方提供了非常多的应用：<a href="https://apps.nextcloud.com/，Office文档、图片相册、日历联系人、两步验证、文件管理、RSS阅读等丰富的应用。这些应用你可以手动下载安装，也可以直接在Nextcloud后台一键激活。" target="_blank" rel="noopener">https://apps.nextcloud.com/，Office文档、图片相册、日历联系人、两步验证、文件管理、RSS阅读等丰富的应用。这些应用你可以手动下载安装，也可以直接在Nextcloud后台一键激活。</a></p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_22.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-548824b2c121e5e8.gif?imageMogr2/auto-orient/strip" alt="Nextcloud添加应用"></a> </p><p><strong>Office文档插件</strong>：<a href="https://apps.nextcloud.com/apps/documents" target="_blank" rel="noopener">Documents</a>。有Collabora Online、Markdown Editor、Calendar、Onlyoffice、Documents等，其中Documents安装比较简单，直接启用即可。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_23.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-eb499d68860ac3dc.gif?imageMogr2/auto-orient/strip" alt="Nextcloud查看Office文档"></a> </p><p>如果不支持打开Doc（X），你需要在你的Ubuntu安装以下包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install libreoffice-writer</span><br><span class="line">apt-get install libreoffice-common</span><br><span class="line">apt-get install unoconv</span><br></pre></td></tr></table></figure><p>Documents插件安装好了后就可以在线查看和编辑Office文档了。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_24.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-ee9424510371210f.gif?imageMogr2/auto-orient/strip" alt="Nextcloud在线编辑文档"></a> </p><p><strong>安全类插件</strong>：<a href="https://apps.nextcloud.com/apps/twofactor_totp" target="_blank" rel="noopener">Two Factor TOTP Provider</a>。这个插件可以让你的Nextcloud账号支持开启登录两步验证。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_25.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-3db89324235221ba.gif?imageMogr2/auto-orient/strip" alt="Nextcloud两步验证"></a> </p><p><strong>RSS阅读器插件</strong>：<a href="https://apps.nextcloud.com/apps/news" target="_blank" rel="noopener">News</a>。这个插件真的让我感觉眼前一亮，有了它我们可以将Nextcloud变身为一个RSS在线阅读器了。这个比之前我们<a href="https://wzfou.com/huginn-rss/" target="_blank" rel="noopener">利用Huginn抓取任意网站RSS</a>的方法可以简单了。（点击放大）</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_26.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-23978e91c5ef5b40.gif?imageMogr2/auto-orient/strip" alt="Nextcloud阅读器"></a> </p><h2 id="五、Nextcloud高级设置"><a href="#五、Nextcloud高级设置" class="headerlink" title="五、Nextcloud高级设置"></a>五、Nextcloud高级设置</h2><p>Nextcloud支持使用PHP发送邮件，但是自带的邮局发出去的邮件基本上是被各大邮箱判定为垃圾邮件，所以我们需要利用好Nextcloud提供的SMTP发信功能。</p><h3 id="4-1-Nextcloud用SMTP发信"><a href="#4-1-Nextcloud用SMTP发信" class="headerlink" title="4.1  Nextcloud用SMTP发信"></a>4.1  Nextcloud用SMTP发信</h3><p>在Nextcloud的管理页面，找到“其他设置”，然后选择发信方式为SMTP，填写你的SMTP信息，这里我用的是腾讯企业邮箱的，你也可以使用Gmail、163等免费SMTP发信功能。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_20.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-202288546a7abced.gif?imageMogr2/auto-orient/strip" alt="Nextcloud设置发信"></a> </p><p>填写完成后，点击测试看看是不是可以成功发出邮件。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_21.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-f113887797b40580.gif?imageMogr2/auto-orient/strip" alt="Nextcloud成功发出邮件"></a> </p><h3 id="4-2-Nextcloud安装SSL证书"><a href="#4-2-Nextcloud安装SSL证书" class="headerlink" title="4.2  Nextcloud安装SSL证书"></a>4.2  Nextcloud安装SSL证书</h3><p>如果你使用Snap安装的Nextcloud，那么添加SSL加密访问将是一件非常简单的事情。先确保你的域名已经成功解析到你的VPS主机上，然后执行命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nextcloud.enable-https lets-encrypt #安装Let&apos;s Encrypt SSL</span><br><span class="line">#如果你想使用自己的证书，请执行：</span><br><span class="line">sudo nextcloud.enable-https self-signed</span><br></pre></td></tr></table></figure><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_16.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-eb3b7c16a56fd403.gif?imageMogr2/auto-orient/strip" alt="Nextcloud添加SSL证书"></a> </p><p>如果你是使用自已的证书，请在执行命令后找到SSL证书的路径，将自己的证书上传替换生成的自签名证书文件即可。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_17.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-b762185569f65121.gif?imageMogr2/auto-orient/strip" alt="Nextcloud自己的证书"></a> </p><h3 id="4-3-Nextcloud备份与恢复"><a href="#4-3-Nextcloud备份与恢复" class="headerlink" title="4.3  Nextcloud备份与恢复"></a>4.3  Nextcloud备份与恢复</h3><p><strong>备份MysqL数据库</strong>。使用Snap安装的Nextcloud，数据库文件在以下路径中，你直接将Nextcloud这个数据库全部备份即可。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_18.gif" target="_blank" rel="noopener">[图片上传失败…(image-1fd742-1525492497608)]</a> </p><p><strong>备份文件。</strong>Nextcloud上传的文件存储在以下路径中，将里面的Data文件全部备份即可。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud_19.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-a5b470dc55adef65.gif?imageMogr2/auto-orient/strip" alt="Nextcloud备份存储文件"></a> </p><p><strong>Nextcloud恢复。</strong>重装安装了Nextcloud后，将上面的数据库文件与文件数据全部导入到新的服务器，保持原来的路径即可。对于大量的文件迁移，推荐使用远程搬家方法：<a href="https://wzfou.com/rsync-scp-tar/" target="_blank" rel="noopener">三个命令工具Rsync,SCP,Tar-快速解决Linux VPS远程网站搬家数据同步烦恼</a>。</p><h2 id="六、总结"><a href="#六、总结" class="headerlink" title="六、总结"></a>六、总结</h2><p>Nextcloud采用Snap的安装方法简单方便，适合不想折腾的朋友，并且官方打包的<a href="https://wzfou.com/tag/nextcloud-install/" target="_blank" rel="noopener">Nextcloud Snap自动部署</a>好了LAMP，如果你想迁移服务器，只需要将新的服务器按照同样的方法安装Nextcloud，然后导入之前的数据库与存储文件即可。</p><p>Nextcloud如果用来存储一些私人的照片或者文件的话，最让人担心的恐怕是安全问题了。目前来看，Nextcloud本身的安全措施已经做得非常到位，例如账号两步验证、程序与存储文件分开、数据加密等。可能唯一需要我们自己做的就是保证服务器不要出现漏洞。</p><p>文章出自：<a href="https://wzfou.com/" target="_blank" rel="noopener">挖站否</a> <a href="https://wzfou.com/nextcloud/" target="_blank" rel="noopener">https://wzfou.com/nextcloud/</a>，版权所有。本站文章除注明出处外，皆为作者原创文章，可自由引用，但请注明来源。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;【原文链接：&lt;a href=&quot;https://wzfou.com/nextcloud/】&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://wzfou.com/nextcloud/】&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;搭建个人云存储一般会想到ow
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="NextCloud" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/NextCloud/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="NextCloud" scheme="http://www.lifayu.com/tags/NextCloud/"/>
    
  </entry>
  
  <entry>
    <title>手动安装NextCloud教程-免费开源的私有云存储网盘可播放图片音乐</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85NextCloud%E6%95%99%E7%A8%8B-%E5%85%8D%E8%B4%B9%E5%BC%80%E6%BA%90%E7%9A%84%E7%A7%81%E6%9C%89%E4%BA%91%E5%AD%98%E5%82%A8%E7%BD%91%E7%9B%98%E5%8F%AF%E6%92%AD%E6%94%BE%E5%9B%BE%E7%89%87%E9%9F%B3%E4%B9%90/"/>
    <id>http://www.lifayu.com/2019/01/10/手动安装NextCloud教程-免费开源的私有云存储网盘可播放图片音乐/</id>
    <published>2019-01-09T19:32:09.000Z</published>
    <updated>2019-01-09T11:36:45.761Z</updated>
    
    <content type="html"><![CDATA[<p>【原文链接：<a href="https://wzfou.com/nextcloud-install/】" target="_blank" rel="noopener">https://wzfou.com/nextcloud-install/】</a></p><hr><p>NextCloud由原ownCloud联合创始人Frank Karlitschek创建的，继承原ownCloud的核心技术又有不少的创新。在功能上NextCloud和ownCloud差不多，甚至还要丰富一些，在用户使用体验方面，NextCloud安装与使用都非常地顺手，最重要的是NextCloud完全开源免费。</p><p><a href="https://wzfou.com/tag/nextcloud/" target="_blank" rel="noopener">NextCloud</a>不仅是一个私人云网盘平台，也支持多用户同步协作使用。NextCloud支持账号注册，可以为账号开启两步验证，以确保账号安全。同时，NextCloud对于公开分享的文件可以设置有效期，对于上传的视频、音乐、Office文档等直接支持在线预览和播放。</p><p>NextCloud还提供了上百种的免费应用和插件，这些<a href="https://wzfou.com/tag/nextcloud-yingyong/" target="_blank" rel="noopener">NextCloud应用</a>与插件可以将NextCloud打造成为一个在线文档共享与编辑平台、音乐与视频娱乐平台以及文件存储下载平台。当然，如果是自己手动安装的NextCloud的话，那么这些插件也得自己配置好环境才行。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_00.jpg" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-142f8ca689e7d524.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="手动安装NextCloud教程-免费开源私人云存储网盘可在线预览图片播放音乐"></a> </p><p>本篇文章就来分享一下手动安装<a href="https://wzfou.com/tag/nextcloud-jiaocheng/" target="_blank" rel="noopener">NextCloud教程</a>，更多的站长自建服务与平台，你还可以试试：</p><ol><li><a href="https://wzfou.com/lsyncd/" target="_blank" rel="noopener">Lsyncd搭建同步镜像-用Lsyncd实现本地和远程服务器之间实时同步</a></li><li><a href="https://wzfou.com/vestacp-whmcs/" target="_blank" rel="noopener">VestaCP与WHMCS整合教程-实现自助开通虚拟主机销售主机空间产品</a></li><li><a href="https://wzfou.com/ispconfig-whmcs/" target="_blank" rel="noopener">ISPConfig与WHMCS整合方法-自动激活开通虚拟主机和管理空间用户</a></li></ol><p><strong>PS：2017年9月20日更新，</strong>觉得手动安装麻烦的朋友，可以使用一键安装的方法，参考：<a href="https://wzfou.com/nextcloud/" target="_blank" rel="noopener">Nextcloud个人云存储绝佳选择：一键自动安装方法和云盘使用体验</a>。</p><h2 id="一、LAMP安装NextCloud"><a href="#一、LAMP安装NextCloud" class="headerlink" title="一、LAMP安装NextCloud"></a>一、LAMP安装NextCloud</h2><p>NextCloud官网：</p><ol><li><a href="https://nextcloud.com/" target="_blank" rel="noopener">https://nextcloud.com/</a></li></ol><p><strong>准备好LAMP环境。</strong>LAMP即Apache、MysqL或Mariadb、PHP环境，NextCloud官方推荐使用Apache运行NextCloud，自带了.htaccess规则。而Nginx的话还需要自己手动编写NextCloud的URL重写规则。推荐以下方法一键安装LAMP：</p><ol><li><a href="https://wzfou.com/lnmp-1-4/" target="_blank" rel="noopener">Linux VPS建站工具LNMP 1.4安装与使用-SSL自动配置续期和多版本PHP支持</a></li><li><a href="https://wzfou.com/oneinstack/" target="_blank" rel="noopener">OneinStack一键安装脚本-轻松部署Let’s Encrypt证书配置Https站点</a></li></ol><p>LNMP 1.4和OneinStack都可以一键安装LAMP环境，这里我以OneinStack来作为操作演示，在安装OneinStack时选择组件时选择Apache即可，PHP建议使用7.0以上，数据库的话建议Mariadb。其它的缓存组件也可以安装。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_01.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-2d4e7c6a373b3b67.gif?imageMogr2/auto-orient/strip" alt="NextCloud安装Apache"></a> </p><p><strong>绑定好域名与添加SSL证书。</strong>OneinStack在添加网站时直接就可以添加SSL证书了，同时要求绑定的域名必须提前解析到服务器的IP上，这样才可以一键生成Lets免费证书。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_02.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-eb982f15f1949705.gif?imageMogr2/auto-orient/strip" alt="NextCloud添加SSL证书"></a> </p><p><strong>下载NextCloud程度包安装。</strong>到官网：<a href="https://nextcloud.com/install/#instructions-server，下载最新的程序包解压上传到网站的根目录。" target="_blank" rel="noopener">https://nextcloud.com/install/#instructions-server，下载最新的程序包解压上传到网站的根目录。</a></p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_03_1.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-35bad6780fd4c569.gif?imageMogr2/auto-orient/strip" alt="NextCloud下载程序包"></a> </p><p>为NextCloud建立新的数据库。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_03.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-9d165b0781ecc8fe.gif?imageMogr2/auto-orient/strip" alt="NextCloud新建数据库"></a> </p><p>访问域名就会自动进入到NextCloud的安装页面了，填写你的管理员账号与密码，然后在下方设置好文件存储路径，最好与程序不要在同一个目录下。同时填入SQL数据库信息，完成安装。（点击放大）</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_04.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-516d8fe28cf6a69d.gif?imageMogr2/auto-orient/strip" alt="NextCloud点击安装"></a> </p><p>完成后，你就可以登录到NextCloud后台，这就是NextCloud的用户管理界面。（点击放大）</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_05.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-c8e9f87eb15e3eab.gif?imageMogr2/auto-orient/strip" alt="NextCloud用户管理界面"></a> </p><h2 id="二、LNMP安装NextCloud"><a href="#二、LNMP安装NextCloud" class="headerlink" title="二、LNMP安装NextCloud"></a>二、LNMP安装NextCloud</h2><p>准备<a href="https://wzfou.com/tag/lnmp/" target="_blank" rel="noopener">LNMP</a>环境和上面一样，只是在LNMP 1.4和OneinStack安装时选择Nginx环境即可，其它的组件都一样有选择性地安装。如果安装了Zend OPcache，可能在安装时会提示错误：<code>“PHP 被设置为移除内联块, 这将导致多个核心应用无法访问</code>。</p><p><strong>解决方法：</strong>修改php.ini中Opcache的参数进行修改，如果是Oneinstack的话需要在/usr/local/php/etc/php.d/ext-opcache.ini 中修改。找到此代码并改成：opcache.save_comments=1 ，因为默认是0，改完重启php-fpm就行。</p><p><strong>编写URL地址重写规则。</strong>出现错误：No input file specified.，主要是Nginx还需要自己写重写规则，你可以将以下规则复制粘贴到/usr/local/nginx/conf/vhost/你的网站.conf，由于规则太多，你也可单独建立一个文件，然后在你的网站.conf引用即可。具体规则如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#(可选)添加如下header主要为了安全</span><br><span class="line">  add_header X-Content-Type-Options nosniff;</span><br><span class="line">  add_header X-XSS-Protection &quot;1; mode=block&quot;;</span><br><span class="line">  add_header X-Robots-Tag none;</span><br><span class="line">  add_header X-Download-Options noopen;</span><br><span class="line">  add_header X-Permitted-Cross-Domain-Policies none;</span><br><span class="line">  #(可选)为了支持user_webfinger app</span><br><span class="line">  rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span><br><span class="line">  rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;</span><br><span class="line"></span><br><span class="line">  #日历和联系人，建议加上</span><br><span class="line">  location = /.well-known/carddav &#123;</span><br><span class="line">  return 301 $scheme://$host/remote.php/dav;</span><br><span class="line">  &#125;</span><br><span class="line">  location = /.well-known/caldav &#123;</span><br><span class="line">  return 301 $scheme://$host/remote.php/dav;</span><br><span class="line">  &#125;</span><br><span class="line">  #设置上传文件的最大大小</span><br><span class="line">  client_max_body_size 512M;</span><br><span class="line">  fastcgi_buffers 64 4K;</span><br><span class="line">  #将所有请求转发到index.php上</span><br><span class="line">  location / &#123;</span><br><span class="line">  rewrite ^ /index.php$uri;</span><br><span class="line">  &#125;</span><br><span class="line">  #安全设置，禁止访问部分敏感内容</span><br><span class="line">  location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ &#123;</span><br><span class="line">  deny all;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console) &#123;</span><br><span class="line">  deny all;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #默认有，替换原来的就行</span><br><span class="line">  location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+)\.php(?:$|/) &#123;</span><br><span class="line">  fastcgi_split_path_info ^(.+\.php)(/.*)$;</span><br><span class="line">  fastcgi_param PATH_INFO $fastcgi_path_info;</span><br><span class="line">  fastcgi_param modHeadersAvailable true;</span><br><span class="line">  fastcgi_param front_controller_active true;</span><br><span class="line">  fastcgi_pass unix:/dev/shm/php-cgi.sock; #这边我改过，参照原来的</span><br><span class="line">  fastcgi_intercept_errors on;</span><br><span class="line">  fastcgi_request_buffering off;</span><br><span class="line">  include fastcgi.conf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #安全设置，禁止访问部分敏感内容</span><br><span class="line">  location ~ ^/(?:updater|ocs-provider)(?:$|/) &#123;</span><br><span class="line">  try_files $uri/ =404;</span><br><span class="line">  index index.php;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ~ \.(?:css|js|woff|svg|gif)$ &#123;</span><br><span class="line">  try_files $uri /index.php$uri$is_args$args;</span><br><span class="line">  add_header Cache-Control &quot;public, max-age=15778463&quot;;</span><br><span class="line">  add_header X-Content-Type-Options nosniff;</span><br><span class="line">  add_header X-XSS-Protection &quot;1; mode=block&quot;;</span><br><span class="line">  add_header X-Robots-Tag none;</span><br><span class="line">  add_header X-Download-Options noopen;</span><br><span class="line">  add_header X-Permitted-Cross-Domain-Policies none;</span><br><span class="line">  access_log off;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ \.(?:png|html|ttf|ico|jpg|jpeg)$ &#123;</span><br><span class="line">  try_files $uri /index.php$uri$is_args$args;</span><br><span class="line">  access_log off;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>fileinfo\Memcached\Redis等都可以通过OneinStack一键安装。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_06.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-77182db0bdd0121b.gif?imageMogr2/auto-orient/strip" alt="NextCloud安装附加组件"></a> </p><p><strong>NextCloud安全与性能优化：</strong>这种提示一般在NextCloud的服务器管理中可以看到，建议缓存类的直接安装一个即可，安装多了也没有什么用。</p><blockquote><p>为了您服务的安全和性能, 请将所有设置配置正确. 我们将会进行一些自动化检查以帮助您完成这项工作. 详情请查看 “小提示” 部分及相关文档.</p><p>PHP 模块 ‘fileinfo’ 缺失. 我们强烈建议启用此模块以便在 MIME 类型检测时获得最准确的结果.</p><p>HTTP 请求头 “Strict-Transport-Security” 没有配置为至少 “15552000” 秒. 出于增强安全性考虑, 我们推荐按照安全提示中的说明启用 HSTS.</p><p>内存缓存未配置. 如果可用, 请配置 memcache 以增强性能. 更多信息请查看我们的文档.<br>PHP 的组件 OPcache 没有正确配置. 为了提供更好的性能, 我们建议在php.ini文件中使用下列设置:</p><p>opcache.enable=1<br>opcache.enable_cli=1<br>opcache.interned_strings_buffer=8<br>opcache.max_accelerated_files=10000<br>opcache.memory_consumption=128<br>opcache.save_comments=1<br>opcache.revalidate_freq=1</p></blockquote><p><strong>NextCloud添加Memcached缓存。</strong>修改程序目录下的config目录中的config.php文件，在配置文件中添加如下，这个是多个Memcached实例，单个自己改：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&apos;memcache.local&apos; =&gt; &apos;\OC\Memcache\APCu&apos;,</span><br><span class="line">&apos;memcache.distributed&apos; =&gt; &apos;\OC\Memcache\Memcached&apos;,</span><br><span class="line">&apos;memcached_servers&apos; =&gt; array(</span><br><span class="line">     array(&apos;localhost&apos;, 11211),</span><br><span class="line">     array(&apos;server1.example.com&apos;, 11211),</span><br><span class="line">     array(&apos;server2.example.com&apos;, 11211),</span><br><span class="line">     ),</span><br></pre></td></tr></table></figure><p><strong>NextCloud添加Redis缓存。</strong>在配置文件中添加如下，这个是通过TCP连接的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;memcache.local&apos; =&gt; &apos;\OC\Memcache\Redis&apos;,</span><br><span class="line">&apos;redis&apos; =&gt; array(</span><br><span class="line">     &apos;host&apos; =&gt; &apos;localhost&apos;,</span><br><span class="line">     &apos;port&apos; =&gt; 6379,</span><br><span class="line">      ),</span><br></pre></td></tr></table></figure><p>还有性能更好的UNIX连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&apos;memcache.local&apos; =&gt; &apos;\OC\Memcache\Redis&apos;,</span><br><span class="line">&apos;redis&apos; =&gt; array(</span><br><span class="line">     &apos;host&apos; =&gt; &apos;/var/run/redis/redis.sock&apos;,</span><br><span class="line">     &apos;port&apos; =&gt; 0,</span><br><span class="line">     &apos;dbindex&apos; =&gt; 0,</span><br><span class="line">     &apos;password&apos; =&gt; &apos;secret&apos;,</span><br><span class="line">     &apos;timeout&apos; =&gt; 1.5,</span><br><span class="line">      ),</span><br></pre></td></tr></table></figure><p>同时，官方还推荐加入如下，来用于存储文件锁</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;memcache.locking&apos; =&gt; &apos;\OC\Memcache\Redis&apos;,</span><br></pre></td></tr></table></figure><p>Nginx运行NextCloud一切正常。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_11.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-d2cbe62dbd888ac1.gif?imageMogr2/auto-orient/strip" alt="NextCloud运行正常"></a> </p><h2 id="三、NextCloud添加应用"><a href="#三、NextCloud添加应用" class="headerlink" title="三、NextCloud添加应用"></a>三、NextCloud添加应用</h2><p>NextCloud提供了丰富了内置应用，并且这些应用可以直接在NextCloud的后台下载并安装，有点像我们的Wordpress插件一样直接安装。这些介绍几个有用的<a href="https://wzfou.com/tag/nextcloud-pluin/" target="_blank" rel="noopener">NextCloud插件</a>，相信大家一定会用到。</p><p><strong>SMTP发信与限制最大上传文件。</strong>这个直接在NextCloud的后台设置中就可以设置选项，SMTP可以让我们调用第三方的发信服务来发送NextCloud的邮件，自带的PHP发信也可以，但是基本上会被各大邮箱判定为垃圾邮件。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_07.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-6dfb933da287375a.gif?imageMogr2/auto-orient/strip" alt="NextCloud发信设置"></a> </p><p><strong>数据存储加密与外挂存储。</strong>首先到NextCloud应用中激活Default encryption module、External storage support这两个插件。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_08.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-2d976dc9a6f9afa6.gif?imageMogr2/auto-orient/strip" alt="NextCloud存储加密"></a> </p><p><strong>启用数据加密需要谨慎：</strong>因为数据一旦加密被启用, 之后上传到服务器的所有文件都将服务器上加密，只有当启用状态的加密模块支持解密并且所有前提都满足时 (例如: 设定恢复密钥) 才能解除加密。请注意, 加密会增加文件大小，单独的加密不能保证系统的安全性，你需要同时设置恢复密钥。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_09.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-16a8467ded56a63b.gif?imageMogr2/auto-orient/strip" alt="NextCloud启用文件加密"></a> </p><p>外挂存储主要是可以让NextCloud通过SMB / CIFS 登录 OC 的方式挂载第三方的存储应用，启用这个插件有些麻烦，可能提示：没有安装 “smbclient”. 安装命令：apt-get install smbclient和apt-get install php-smbclient。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_10.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-3134ebe01ad560e7.gif?imageMogr2/auto-orient/strip" alt="NextCloud外挂存储"></a> </p><h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>至于选择Apache还是Nginx来运行NextCloud主要还是取决你对Nginx或者Apache的熟悉程度，LNMP 1.4和OneinStack对Nginx都做了很好了优化，Http 2.0、SSL证书还有缓存组件和PHP函数都可以一键安装与配置，省去了不少的麻烦。</p><p><a href="https://wzfou.b0.upaiyun.com/wp-content/uploads/2017/08/nextcloud-install_12.gif" target="_blank" rel="noopener"><img src="http://upload-images.jianshu.io/upload_images/3832962-cb0df8aa0851ed0d.gif?imageMogr2/auto-orient/strip" alt="NextCloud私有云"></a> </p><p>NextCloud的图片预览、音乐视频在线播放等基本功能都是没有问题了，在使用NextCloud应用过程中倒是遇到了不少的问题。首要的问题就是NextCloud的应用配置比较难，例如Office文档插件、RSS在线阅读器插件等，都需要自己手动配置好服务器环境。</p><p>文章出自：<a href="https://wzfou.com/" target="_blank" rel="noopener">挖站否</a> <a href="https://wzfou.com/nextcloud-install/" target="_blank" rel="noopener">https://wzfou.com/nextcloud-install/</a>，部分内容参考自：<a href="https://www.zrj96.com/post-542.html" target="_blank" rel="noopener">zrj96</a>  版权所有。本站文章除注明出处外，皆为作者原创文章，可自由引用，但请注明来源。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;【原文链接：&lt;a href=&quot;https://wzfou.com/nextcloud-install/】&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://wzfou.com/nextcloud-install/】&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="NextCloud" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/NextCloud/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="NextCloud" scheme="http://www.lifayu.com/tags/NextCloud/"/>
    
  </entry>
  
  <entry>
    <title>RASPBIAN STRETCH 安装桌面</title>
    <link href="http://www.lifayu.com/2019/01/10/RASPBIAN-STRETCH-%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2/"/>
    <id>http://www.lifayu.com/2019/01/10/RASPBIAN-STRETCH-安装桌面/</id>
    <published>2019-01-09T19:30:38.000Z</published>
    <updated>2019-01-09T11:31:38.185Z</updated>
    
    <content type="html"><![CDATA[<p>首先更新系统<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></p><p>如果需要卸载原来的桌面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove raspberrypi-ui-mods lxterminal gvfs</span><br></pre></td></tr></table></figure></p><blockquote><p>–no-install-recommends参数来避免安装非必须的文件，从而减小镜像的体积</p></blockquote><p>安装GUI显示服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install xserver-xorg</span><br></pre></td></tr></table></figure></p><p>安装MATE桌面环境<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mate-desktop-environment-core</span><br></pre></td></tr></table></figure></p><p>安装登陆服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lightdm</span><br></pre></td></tr></table></figure></p><p>启动你的桌面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startx</span><br></pre></td></tr></table></figure></p><p>同理，如果想换回官方桌面的话，只需要卸载MATE桌面并安装原来的就行了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mate-desktop*  //为了卸载干净直接用了 * 号</span><br><span class="line">// 安装官方桌面</span><br><span class="line">sudo apt-get install raspberrypi-ui-mods lxterminal gvfs</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先更新系统&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;b
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>树莓派安装Chromium</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85Chromium/"/>
    <id>http://www.lifayu.com/2019/01/10/树莓派安装Chromium/</id>
    <published>2019-01-09T19:28:28.000Z</published>
    <updated>2019-01-09T11:29:46.808Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><p>【原文链接：<a href="https://blog.csdn.net/zbgjhy88/article/details/60323047】" target="_blank" rel="noopener">https://blog.csdn.net/zbgjhy88/article/details/60323047】</a></p><hr><p>Chromium是谷歌Chrome的开源版本，在此介绍一下当下该如何安装Chromium。</p><p>1.访问<a href="http://ports.ubuntu.com/pool/universe/c/chromium-browser/" target="_blank" rel="noopener"><strong>Ubuntu的源</strong></a>下载Chromium安装包，建议在pc中下载然后通过winscp传到树莓派中：</p><p>这个源对Chromium还在不断更新维护中，可以选择下载最新的包，截止收稿，最新的为65.0.3325.181-0ubuntu0.17.10.1，需要下载的是下面三个包：</p><blockquote><p>chromium-browser_65.0.3325.181-0ubuntu0.17.10.1_armhf.deb<br>chromium-codecs-ffmpeg-extra_65.0.3325.181-0ubuntu1_armhf.deb<br>chromium-browser-l10n_56.0.2924.76-0ubuntu0.16.10.1335_all.deb </p></blockquote><p>网速不是很给力，我放到我的资源中了，大家可以点此下载（注意解压成三个文件再传到树莓派中）：<a href="http://download.csdn.net/detail/zbgjhy88/9770147" target="_blank" rel="noopener">树莓派Chromium-browser离线安装包</a></p><p>2.进入存放三个deb包的文件夹，执行命令：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i chromium-browser_56.0.2924.76-0ubuntu0.16.10.1335_armhf.deb </span><br><span class="line">sudo dpkg -i chromium-codecs-ffmpeg-extra_56.0.2924.76-0ubuntu0.16.10.1335_armhf.deb</span><br><span class="line">sudo dpkg -i chromium-browser-l10n_65.0.3325.181-0ubuntu1_all.deb</span><br></pre></td></tr></table></figure></p><p>安装过程中可能会遇到依赖关系问题，因为你的树莓派上可能安装了更新的一些lib包。可以尝试运行<code>apt-get -f install</code>或<code>aptitude install</code>解决。</p><p>完成。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;【原文链接：&lt;a href=&quot;https://blog.csdn.net/zbgjhy88/article/details/60323047】&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.cs
      
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="Chromium" scheme="http://www.lifayu.com/tags/Chromium/"/>
    
  </entry>
  
  <entry>
    <title>树莓派安装OctoPrint，搭建3D打印服务器</title>
    <link href="http://www.lifayu.com/2019/01/10/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85OctoPrint/"/>
    <id>http://www.lifayu.com/2019/01/10/树莓派安装OctoPrint/</id>
    <published>2019-01-09T19:23:34.000Z</published>
    <updated>2019-01-09T11:36:19.472Z</updated>
    
    <content type="html"><![CDATA[<hr><p>【参考链接】<br>官方文档：<a href="https://octoprint.org/download/" target="_blank" rel="noopener">https://octoprint.org/download/</a></p><hr><h1 id="一、在树莓派上搭建OctoPrint服务："><a href="#一、在树莓派上搭建OctoPrint服务：" class="headerlink" title="一、在树莓派上搭建OctoPrint服务："></a>一、在树莓派上搭建OctoPrint服务：</h1><ol><li>安装包含 <a href="https://pip.pypa.io/en/latest/installing.html" target="_blank" rel="noopener">pip</a> 和 <a href="https://virtualenv.pypa.io/en/stable/installation/" target="_blank" rel="noopener">virtualenv</a> 的 <a href="https://www.python.org/" target="_blank" rel="noopener">Python 2.7</a> .<br>树莓派最新版本的系统已经自带 <a href="https://www.python.org/" target="_blank" rel="noopener">Python2.7</a>，如果没有，可以手动安装：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt upgrade</span><br><span class="line">$ sudo apt install python virtualenv</span><br></pre></td></tr></table></figure></li></ol><a id="more"></a><ol start="2"><li>用以下两种方式获取源码:<ol><li>克隆 <a href="https://github.com/foosel/OctoPrint.git" target="_blank" rel="noopener">软件仓库</a>: <code>git clone https://github.com/foosel/OctoPrint.git</code></li><li>从Github上下载<a href="https://github.com/foosel/OctoPrint/archive/master.zip" target="_blank" rel="noopener">当前稳定版本</a>的压缩包并解压</li></ol></li><li><p>在源码目录创建一个Python虚拟环境（所有者为当前用户）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd OctoPrint</span><br><span class="line">$ virtualenv venv</span><br></pre></td></tr></table></figure></li><li><p>安装OctoPrint到上一步创建的虚拟环境目录：<code>./venv/bin/python setup.py install</code></p></li><li>然后就可以通过运行 <code>./venv/bin/octoprint serve</code> 命令启动OctoPrint，或者使用绝对路径：<code>/path/to/OctoPrint/venv/bin/octoprint</code>。另外也可以使用 <code>daemon</code> 参数在后台启动、重启、停止服务：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /path/to/OctoPrint/venv/bin/octoprint dameon &#123;start|restart|stop&#125;</span><br></pre></td></tr></table></figure></li></ol><p>之后就可以通过IP加端口号访问到了：</p><blockquote><p>在浏览器输入：http://树莓派的ip地址:5000</p></blockquote><p>首次打开会运行设置向导，一步步按照自己的需求设置即可。其中 CuraEngine 路径部分，需要编译安装 CuraEngine 才可以填写，可以先跳过，按照后面的步骤执行完毕后再填写。</p><h1 id="二、编译安装-CuraEngine"><a href="#二、编译安装-CuraEngine" class="headerlink" title="二、编译安装 CuraEngine"></a>二、编译安装 <strong><a href="https://github.com/duyi324/CuraEngine" target="_blank" rel="noopener">CuraEngine</a></strong></h1><p>如果要用树莓派切片，需要安装切片引擎 <a href="https://github.com/duyi324/CuraEngine" target="_blank" rel="noopener">CuraEngine</a>。编译安装步骤如下：</p><h2 id="1-安装-Protobuf-gt-3-0-0"><a href="#1-安装-Protobuf-gt-3-0-0" class="headerlink" title="1. 安装 Protobuf &gt;= 3.0.0"></a>1. 安装 <a href="https://github.com/duyi324/CuraEngine#installing-protobuf" target="_blank" rel="noopener">Protobuf</a> &gt;= 3.0.0</h2><ul><li>安装libtool：<code>apt install libtool</code></li><li>从  <a href="https://github.com/google/protobuf/releases" target="_blank" rel="noopener">https://github.com/google/protobuf/releases</a>下载 protobuf (下载ZIP并解压缩，或者克隆仓库)。Protocol Buffer 用于在CuraEngine 和用户界面之间通信。<br>下载链接：<a href="https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.tar.gz" target="_blank" rel="noopener">https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.tar.gz</a></li><li>进入protobuf目录并运行 <code>$ ./autogen.sh</code></li></ul><blockquote><p>这一步可能报错误信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&apos;+ autoreconf -f -i -Wall,no-obsolete</span><br><span class="line">&gt;./autogen.sh: 50: ./autogen.sh: autoreconf: not found</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>解决方法：<br><code>sudo apt-get install autoconf</code></p></blockquote><ul><li>然后依次执行如下命令，配置并编译安装：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install  #注意安装需要root权限</span><br></pre></td></tr></table></figure></li></ul><ul><li>(如果在Linux系统中不能加载共享库，可以尝试执行 <code>sudo ldconfig</code>)</li></ul><h1 id="2-编译安装-libArcus"><a href="#2-编译安装-libArcus" class="headerlink" title="2. 编译安装 libArcus"></a>2. 编译安装 <a href="https://github.com/Ultimaker/libArcus" target="_blank" rel="noopener">libArcus</a></h1><p>要编译 libArcus，需要以下几个包：</p><ul><li><a href="https://github.com/google/protobuf" target="_blank" rel="noopener">Protobuf 3</a> (3.0+)</li><li><a href="https://www.cmake.org/" target="_blank" rel="noopener">CMake</a></li><li>python3-dev (3.4+)</li><li>python3-sip-dev (4.16+)<br>按照上一步编译安装Protobuf，并检查后面三个包：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install cmake python3-dev python3-sip-dev</span><br></pre></td></tr></table></figure></li></ul><p>然后开始<a href="https://github.com/Ultimaker/libArcus#building" target="_blank" rel="noopener">编译</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/Ultimaker/libArcus.git</span><br><span class="line">$ cd libArcus</span><br><span class="line">$ mkdir build &amp;&amp; cd build</span><br><span class="line">$ cmake ..</span><br><span class="line">$ make</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure></p><p>这将会将 Arcus 库安装到CMake的默认安装位置：<code>/usr/local</code>。要改变默认值，请设置 <code>CMAKE_INSTALL_PREFIX</code>。示例目录默认也会创建，如果需要关闭，设置 <code>BUILD_EXAMPLES</code> 为 <code>off</code>。</p><blockquote><p><strong>注意：执行 <code>cmake ..</code> 命令的时候可能会报如下错误</strong><br>/usr/local/bin/protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file:<br>  No such file or directory<br>  CMake Warning at /usr/share/cmake-3.7/Modules/FindProtobuf.cmake:387 (message):<br>  Protobuf compiler version doesn’t match library version 3.5.1<br>  Call Stack (most recent call first):<br>  CMakeLists.txt:19 (find_package)<br>这里需要安装一下 <code>protobuf-compiler</code> 再重新 <code>cmake</code> 即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; $ sudo apt install protobuf-compiler</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p></blockquote><h1 id="3-编译安装-CuraEngine"><a href="#3-编译安装-CuraEngine" class="headerlink" title="3. 编译安装 CuraEngine"></a>3. 编译安装 <a href="https://github.com/Ultimaker/CuraEngine.git" target="_blank" rel="noopener">CuraEngine</a></h1><p>进入 CuraEngine 目录并执行以下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir build &amp;&amp; cd build</span><br><span class="line">$ cmake ..</span><br><span class="line">$ make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure></p><p>如果正常执行完毕，终端会提示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Install the project...</span><br><span class="line">-- Install configuration: &quot;&quot;</span><br><span class="line">-- Installing: /usr/local/bin/CuraEngine</span><br><span class="line">-- Set runtime path of &quot;/usr/local/bin/CuraEngine&quot; to &quot;/usr/local/lib&quot;</span><br></pre></td></tr></table></figure></p><p>最后在浏览器中打开 OctoPrint 界面，进入设置界面，导航至 <code>CuraEngine (&lt;= 15.04)</code> 选项卡，在右侧的 <code>Path to CuraEngine</code> 填写上面的路径 <code>/usr/local/bin/CuraEngine</code>，点击 <code>Test</code> 按钮，如果提示 <code>The path is valid</code> 表示 CuraEngine 安装成功。</p><h1 id="4-添加开机自启动"><a href="#4-添加开机自启动" class="headerlink" title="4. 添加开机自启动"></a>4. 添加开机自启动</h1><p>修改 <code>rc.local</code> 文件，在终端输入并回车：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/rc.local</span><br></pre></td></tr></table></figure></p><p>在打开的文本中找到exit 0，在此之前添加的代码在启动时都会被执行，在exit 0 之前添加一行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># su命令是指定在root用户下执行这条命令，-c 表示执行完这条命令之后恢复原来的用户。</span><br><span class="line"># 这里直接用 sudo 以 root 用户执行</span><br><span class="line">sudo  /path/to/OctoPrint/venv/bin/octoprint daemon start</span><br></pre></td></tr></table></figure></p><p><code>trl+o</code> 保存，<code>ctrl+x</code> 退出，然后在终端输入：<code>sudo reboot</code> ,重启系统测试。</p><h1 id="5-OctoPrint-中的其他设置项目"><a href="#5-OctoPrint-中的其他设置项目" class="headerlink" title="5. OctoPrint 中的其他设置项目"></a>5. OctoPrint 中的其他设置项目</h1><p><strong>Serial Connection</strong></p><ul><li>Serial Port：<code>Auto</code></li><li>Baudrate：<code>115200</code></li></ul><p><strong>Server</strong></p><ul><li>Restart OctoPrint：<code>sudo /path/to/OctoPrint/venv/bin/octoprint daemon restart</code></li><li>Restart system：<code>sudo reboot</code></li><li>Shutdown system：<code>sudo shutdown -h now</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;【参考链接】&lt;br&gt;官方文档：&lt;a href=&quot;https://octoprint.org/download/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://octoprint.org/download/&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&quot;一、在树莓派上搭建OctoPrint服务：&quot;&gt;&lt;a href=&quot;#一、在树莓派上搭建OctoPrint服务：&quot; class=&quot;headerlink&quot; title=&quot;一、在树莓派上搭建OctoPrint服务：&quot;&gt;&lt;/a&gt;一、在树莓派上搭建OctoPrint服务：&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;安装包含 &lt;a href=&quot;https://pip.pypa.io/en/latest/installing.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;pip&lt;/a&gt; 和 &lt;a href=&quot;https://virtualenv.pypa.io/en/stable/installation/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;virtualenv&lt;/a&gt; 的 &lt;a href=&quot;https://www.python.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Python 2.7&lt;/a&gt; .&lt;br&gt;树莓派最新版本的系统已经自带 &lt;a href=&quot;https://www.python.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Python2.7&lt;/a&gt;，如果没有，可以手动安装：&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt upgrade&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ sudo apt install python virtualenv&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="树莓派" scheme="http://www.lifayu.com/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="OctoPrint" scheme="http://www.lifayu.com/tags/OctoPrint/"/>
    
  </entry>
  
  <entry>
    <title>Android PopupWindow怎么合理控制弹出位置</title>
    <link href="http://www.lifayu.com/2018/08/26/Android-PopupWindow%E6%80%8E%E4%B9%88%E5%90%88%E7%90%86%E6%8E%A7%E5%88%B6%E5%BC%B9%E5%87%BA%E4%BD%8D%E7%BD%AE%EF%BC%88showAtLocation%EF%BC%89/"/>
    <id>http://www.lifayu.com/2018/08/26/Android-PopupWindow怎么合理控制弹出位置（showAtLocation）/</id>
    <published>2018-08-26T09:07:33.000Z</published>
    <updated>2018-08-26T01:09:16.125Z</updated>
    
    <content type="html"><![CDATA[<p>说到PopupWindow，应该都会有种熟悉的感觉，使用起来也很简单</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 一个自定义的布局，作为显示的内容</span><br><span class="line">Context context = null;　　// 真实环境中要赋值</span><br><span class="line">int layoutId = 0;　　　　　　// 布局ID</span><br><span class="line">View contentView = LayoutInflater.from(context).inflate(layoutId, null);</span><br><span class="line">      </span><br><span class="line">final PopupWindow popupWindow = new PopupWindow(contentView,</span><br><span class="line">                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, true);</span><br><span class="line"></span><br><span class="line">popupWindow.setTouchable(true);</span><br><span class="line">// 如果不设置PopupWindow的背景，有些版本就会出现一个问题：无论是点击外部区域还是Back键都无法dismiss弹框</span><br><span class="line">// 这里单独写一篇文章来分析</span><br><span class="line">popupWindow.setBackgroundDrawable(new ColorDrawable());</span><br><span class="line">// 设置好参数之后再show</span><br><span class="line">popupWindow.showAsDropDown(contentView);</span><br></pre></td></tr></table></figure><a id="more"></a><p>如果创建PopupWindow的时候没有指定高宽，那么showAsDropDown默认只会向下弹出显示，这种情况有个最明显的缺点就是：弹窗口可能被屏幕截断，显示不全，所以需要使用到另外一个方法showAtLocation,这个的坐标是相对于整个屏幕的，所以需要我们自己计算位置。</p><p>如下图所示，我们可以根据屏幕左上角的坐标A，屏幕高宽，点击View的左上角的坐标C，点击View的大小以及PopupWindow布局的大小计算出PopupWindow的显示位置B</p><p><img src="leanote://file/getImage?fileId=5ad403cc06b76875c7000000" alt=""></p><p>计算方法源码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 计算出来的位置，y方向就在anchorView的上面和下面对齐显示，x方向就是与屏幕右边对齐显示</span><br><span class="line"> * 如果anchorView的位置有变化，就可以适当自己额外加入偏移来修正</span><br><span class="line"> * @param anchorView  呼出window的view</span><br><span class="line"> * @param contentView   window的内容布局</span><br><span class="line"> * @return window显示的左上角的xOff,yOff坐标</span><br><span class="line"> */</span><br><span class="line">private static int[] calculatePopWindowPos(final View anchorView, final View contentView) &#123;</span><br><span class="line">    final int windowPos[] = new int[2];</span><br><span class="line">    final int anchorLoc[] = new int[2];</span><br><span class="line">　　 // 获取锚点View在屏幕上的左上角坐标位置</span><br><span class="line">    anchorView.getLocationOnScreen(anchorLoc);</span><br><span class="line">    final int anchorHeight = anchorView.getHeight();</span><br><span class="line">    // 获取屏幕的高宽</span><br><span class="line">    final int screenHeight = ScreenUtils.getScreenHeight(anchorView.getContext());</span><br><span class="line">    final int screenWidth = ScreenUtils.getScreenWidth(anchorView.getContext());</span><br><span class="line">    contentView.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);</span><br><span class="line">    // 计算contentView的高宽</span><br><span class="line">    final int windowHeight = contentView.getMeasuredHeight();</span><br><span class="line">    final int windowWidth = contentView.getMeasuredWidth();</span><br><span class="line">    // 判断需要向上弹出还是向下弹出显示</span><br><span class="line">    final boolean isNeedShowUp = (screenHeight - anchorLoc[1] - anchorHeight &lt; windowHeight);</span><br><span class="line">    if (isNeedShowUp) &#123;</span><br><span class="line">        windowPos[0] = screenWidth - windowWidth;</span><br><span class="line">        windowPos[1] = anchorLoc[1] - windowHeight;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        windowPos[0] = screenWidth - windowWidth;</span><br><span class="line">        windowPos[1] = anchorLoc[1] + anchorHeight;</span><br><span class="line">    &#125;</span><br><span class="line">    return windowPos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来调用showAtLoaction显示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">View windowContentViewRoot = 我们要设置给PopupWindow进行显示的View</span><br><span class="line">int windowPos[] = calculatePopWindowPos(view, windowContentViewRoot);</span><br><span class="line">int xOff = 20；// 可以自己调整偏移</span><br><span class="line">windowPos[0] -= xOff;</span><br><span class="line">popupwindow.showAtLocation(view, Gravity.TOP | Gravity.START, windowPos[0], windowPos[1]);</span><br><span class="line">// windowContentViewRoot是根布局View</span><br></pre></td></tr></table></figure><p>上面的例子只是提供了一种计算方式，在实际开发中可以根据需求自己计算，比如anchorView在左边的情况，在中间的情况，可以根据实际需求写一个弹出位置能够自适应的PopupWindow。</p><p>补充上获取屏幕高宽的代码ScreenUtils.java：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 获取屏幕高度(px)</span><br><span class="line"> */</span><br><span class="line">public static int getScreenHeight(Context context) &#123;</span><br><span class="line">    return context.getResources().getDisplayMetrics().heightPixels;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * 获取屏幕宽度(px)</span><br><span class="line"> */</span><br><span class="line">public static int getScreenWidth(Context context) &#123;</span><br><span class="line">    return context.getResources().getDisplayMetrics().widthPixels;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Demo截图展示：<br><img src="leanote://file/getImage?fileId=5ad4043506b76875c7000002" alt=""></p><p><img src="leanote://file/getImage?fileId=5ad4043a06b76875c7000003" alt=""></p><p><img src="leanote://file/getImage?fileId=5ad4044206b76875c7000004" alt=""></p><p>看完觉得有用记得点击推荐支持一下，谢谢</p><p>Demo下载地址：<a href="https://github.com/PopFisher/SmartPopupWindow" target="_blank" rel="noopener">https://github.com/PopFisher/SmartPopupWindow</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;说到PopupWindow，应该都会有种熟悉的感觉，使用起来也很简单&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// 一个自定义的布局，作为显示的内容&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Context context = null;　　// 真实环境中要赋值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int layoutId = 0;　　　　　　// 布局ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;View contentView = LayoutInflater.from(context).inflate(layoutId, null);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;final PopupWindow popupWindow = new PopupWindow(contentView,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;popupWindow.setTouchable(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 如果不设置PopupWindow的背景，有些版本就会出现一个问题：无论是点击外部区域还是Back键都无法dismiss弹框&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 这里单独写一篇文章来分析&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;popupWindow.setBackgroundDrawable(new ColorDrawable());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 设置好参数之后再show&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;popupWindow.showAsDropDown(contentView);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Android PopupWindow" scheme="http://www.lifayu.com/tags/Android-PopupWindow/"/>
    
  </entry>
  
  <entry>
    <title>AndroidSwitch控件修改样式</title>
    <link href="http://www.lifayu.com/2018/05/22/AndroidSwitch%E6%8E%A7%E4%BB%B6%E4%BF%AE%E6%94%B9%E6%A0%B7%E5%BC%8F/"/>
    <id>http://www.lifayu.com/2018/05/22/AndroidSwitch控件修改样式/</id>
    <published>2018-05-22T11:17:38.000Z</published>
    <updated>2018-05-22T03:33:00.163Z</updated>
    
    <content type="html"><![CDATA[<p>Android中自带的Switch控件在很多时候总觉得和整体系统风格不符，很多时候，自定义Switch是一种方法。</p><p>但其实不用这么麻烦，安卓自带的Switch通过修改一些属性，也可以达到和自定义Switch差不多的一个效果。</p><p>个人感觉，Switch的属性设置和其他控件还是有挺大区别的。因此，写下此文，方便有需要的同学参考。</p><a id="more"></a><p>先上效果图：</p><p><img src="https://upload-images.jianshu.io/upload_images/3832962-561e47393fbb170a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果图"></p><p><img src="https://upload-images.jianshu.io/upload_images/3832962-c5cfcef0e5ece66c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果图"></p><p>以上便是修改后效果 与 原生Switch的效果对比。代码在文章底部给出</p><p>实现方式：</p><h3 id="1-底部滑动条，在开关打开状态为绿色，开关关闭状态为灰色"><a href="#1-底部滑动条，在开关打开状态为绿色，开关关闭状态为灰色" class="headerlink" title="1.底部滑动条，在开关打开状态为绿色，开关关闭状态为灰色"></a>1.底部滑动条，在开关打开状态为绿色，开关关闭状态为灰色</h3><p>在 res/drawable 文件夹下面，写两个滑动条的底图 ，通过一个选择器selector进行控制。</p><p>gray_track.xml ：非打开状态，灰色的底图</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shapexmlns:android="http:</span>//<span class="attr">schemas.android.com</span>/<span class="attr">apk</span>/<span class="attr">res</span>/<span class="attr">android</span>"</span></span><br><span class="line"><span class="tag"><span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--高度30此处设置宽度无效--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">"30dp"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--圆角弧度15--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"15dp"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--变化率定义从左到右的颜色不变--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:endColor</span>=<span class="string">"#888888"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:startColor</span>=<span class="string">"#888888"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><p>green_track.xml：打开状态下，绿色的底图。 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shapexmlns:android="http:</span>//<span class="attr">schemas.android.com</span>/<span class="attr">apk</span>/<span class="attr">res</span>/<span class="attr">android</span>"&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--高度40--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sizeandroid:height="30dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--圆角弧度20--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cornersandroid:radius="15dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--变化率--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:endColor</span>=<span class="string">"#33da33"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:startColor</span>=<span class="string">"#33da33"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><p>选择器 track.xml   用于控制Switch不同状态下，滑动条的底图 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="comment">&lt;!--底层下滑条的样式选择器，可控制Switch在不同状态下，底下下滑条的颜色--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/green_track"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/gray_track"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-滑动按钮：底色我用的接近白色的淡灰色，打开时，边上的一圈线条为灰色，关闭时，边上的一圈线条为绿色"><a href="#2-滑动按钮：底色我用的接近白色的淡灰色，打开时，边上的一圈线条为灰色，关闭时，边上的一圈线条为绿色" class="headerlink" title="2. 滑动按钮：底色我用的接近白色的淡灰色，打开时，边上的一圈线条为灰色，关闭时，边上的一圈线条为绿色"></a>2. 滑动按钮：底色我用的接近白色的淡灰色，打开时，边上的一圈线条为灰色，关闭时，边上的一圈线条为绿色</h4><p>实现方式和底部滑动一致</p><p>gray_thumb.xml  :关闭状态，按钮边上一圈颜色为深灰色</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shapexmlns:android="http:</span>//<span class="attr">schemas.android.com</span>/<span class="attr">apk</span>/<span class="attr">res</span>/<span class="attr">android</span>"</span></span><br><span class="line"><span class="tag"><span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--高度40--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sizeandroid:height="40dp"android:width="40dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--圆角弧度20--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cornersandroid:radius="20dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--变化率--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:endColor</span>=<span class="string">"#eeeeee"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startColor</span>=<span class="string">"#eeeeee"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strokeandroid:width="1dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:color</span>=<span class="string">"#666666"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><p>green_thumb.xml : 打开状态，按钮边上一圈的颜色为绿色 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shapexmlns:android="http:</span>//<span class="attr">schemas.android.com</span>/<span class="attr">apk</span>/<span class="attr">res</span>/<span class="attr">android</span>"</span></span><br><span class="line"><span class="tag"><span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--高度40--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span> <span class="attr">android:height</span>=<span class="string">"40dp"</span> <span class="attr">android:width</span>=<span class="string">"40dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--圆角弧度20--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"20dp"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--变化率--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:endColor</span>=<span class="string">"#eeeeee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:startColor</span>=<span class="string">"#eeeeee"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"1dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:color</span>=<span class="string">"#33da33"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><p>选择器 thumb.xml   用于控制Switch不同状态下，按钮的显示状态</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="comment">&lt;!--按钮的选择器，可以设置按钮在不同状态下的时候，按钮不同的颜色--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">"true"</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/green_thumb"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/gray_thumb"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-将以上选择器设置给Switch，就好了"><a href="#3-将以上选择器设置给Switch，就好了" class="headerlink" title="3. 将以上选择器设置给Switch，就好了"></a>3. 将以上选择器设置给Switch，就好了</h4><p>界面  activity_main.xml </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xmlversion="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:switchMinWidth</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOn</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOff</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:thumb</span>=<span class="string">"@drawable/thumb"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:track</span>=<span class="string">"@drawable/track"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--用于对比使用的不设置任何属性的Switch--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-高度，宽度的设置"><a href="#4-高度，宽度的设置" class="headerlink" title="4.高度，宽度的设置"></a>4.高度，宽度的设置</h4><p>细心的同学会发现，修改  android:layout_width  ， android:layout_height  这两个属性，并不会实际修改Switch的大小</p><p>设置大了，边上会出现空白部分，设置小了，Switch显示不全。</p><p>实际设置高度方法：</p><p>上面定义滑动条和按钮底图的地方相信大家都注意到，   <size android:height="30dp">  这行代码，</size></p><p>修改  green_track.xml,gray_track.xml  中的高度，即可修改高度（修改green_thumb.xml  gray_thumb.xml  中的高度貌似无效）。</p><p>实际修改宽度的方法：</p><p>（1）修改滑动按钮的宽度：滑动按钮的宽度和按钮上的文字有关，</p><p>想要按钮变长，在按钮显示的文字上添加几个空字符串即可，想要按钮变短的话，减少按钮上显示的字即可（修改按钮上字体大小也可以试试）</p><p>Switch的属性</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:textOn="  "</span><br><span class="line">android:textOff="  "</span><br></pre></td></tr></table></figure><p>（2）修改按钮  打开，关闭  两种状态之间滑动距离（貌似小到一定程度，再改小就无效了）</p><p>Switch的属性</p><p><code>android:switchMinWidth=&quot;20dp&quot;</code></p><p>通过以上的设置，相信能满足大部分实际使用的需求了，希望对大家有帮助。</p><p>相信源代码才是大家最关注的吧，哈哈，我也是！<br>下载地址：   <a href="http://download.csdn.net/detail/qq_34763699/9751234" target="_blank" rel="noopener">http://download.csdn.net/detail/qq_34763699/9751234</a></p><p>百度网盘：<a href="http://pan.baidu.com/s/1slp1CZV" target="_blank" rel="noopener">http://pan.baidu.com/s/1slp1CZV</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Android中自带的Switch控件在很多时候总觉得和整体系统风格不符，很多时候，自定义Switch是一种方法。&lt;/p&gt;
&lt;p&gt;但其实不用这么麻烦，安卓自带的Switch通过修改一些属性，也可以达到和自定义Switch差不多的一个效果。&lt;/p&gt;
&lt;p&gt;个人感觉，Switch的属性设置和其他控件还是有挺大区别的。因此，写下此文，方便有需要的同学参考。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://www.lifayu.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>ArcGIS Runtime中坐标的转换</title>
    <link href="http://www.lifayu.com/2018/05/12/ArcGIS-Runtime%E4%B8%AD%E5%9D%90%E6%A0%87%E7%9A%84%E8%BD%AC%E6%8D%A2/"/>
    <id>http://www.lifayu.com/2018/05/12/ArcGIS-Runtime中坐标的转换/</id>
    <published>2018-05-11T17:33:36.000Z</published>
    <updated>2018-05-13T05:21:37.195Z</updated>
    
    <content type="html"><![CDATA[<p>【原文链接：<a href="https://blog.csdn.net/bit_kaki/article/details/76252181】" target="_blank" rel="noopener">https://blog.csdn.net/bit_kaki/article/details/76252181】</a></p><hr><p>在我们的GIS应用项目里，常常遇见坐标转换的问题。最常见的就是WGS84坐标转其他坐标系，原因是WGS84坐标系是目前GPS数据采集所用的坐标系，而我国实际生产项目里常用的地图却是北京54坐标系，西安80坐标系以及中国大地2000坐标系等。所以当我们用设备采集到GPS经纬度以后，需要将其进行坐标转换才可以正确显示到我们使用的地图上。</p><a id="more"></a><p>对于坐标转换，有一种高精度而且任何时候都可以采用的方法是七参数坐标转换法，对于这种方法，我在之前一篇博客进行了详细的说明，地址是：<a href="http://blog.csdn.net/bit_kaki/article/details/52733429" target="_blank" rel="noopener">http://blog.csdn.net/bit_kaki/article/details/52733429</a> 。</p><p>但是在实际情况下，我们不一定拥有七参数，而且对采集的精度要求也并不那么高。在这个时候，其实ArcGIS for Android的库里已经给我们封装了个一个方法，我们可以直接调用就可以。这个方法就是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static Geometry project(Geometry geometry, SpatialReference inputSR, SpatialReference outputSR) &#123;</span><br><span class="line">    return GeometryEngineCore.project(geometry, inputSR, outputSR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这个方法里三个参数分别是需要转换矢量对象（点、线、面），输入对象的空间参考坐标系，输出对象的空间参考坐标系。最后得到一个转换后的矢量对象。</p><p>比如我们程序里的MapView参数为mMapView，那么要将一个点从WGS84坐标系转换为MapView上加载图层的坐标系，我们只需要：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point point=(Point) GeometryEngine.project(wgs, SpatialReference.create(4326),mMapView.getSpatialReference());</span><br></pre></td></tr></table></figure></p><p>其中wgs是一个WGS84坐标系上的点的坐标，SpatialReference.create（4326）指的是输入点的空间坐标系mMapView.getSpatialReference（）是mMapView目前加载图层所使用的坐标系。</p><p>方法挺简单的，但是对于这个方法我们可以稍作一下研究里面SpatialReference参数的意义。</p><p>SpatialReference在指的ArcGIS里的地理坐标系对象，里面主要包含了五个参数：</p><ul><li>WKID：空间参考系统编号。</li><li>WKT：空间参考系统文本。</li><li>Unit：空间参考系统单位。</li><li>Tolerance：系统容差。</li><li>GCS：地理坐标系。</li></ul><p>这五个参数里第一个或者第二个是必须存在的，根据编号或者文本就可以获取到对应的空间坐标系。其中通过WKID来建立地理坐标系对象是最常见的，WKID，全称是Well Known ID，即ArcGIS对众多的空间坐标系进行的编号。只要我们知道空间参考坐标系所对应的编号，就可以通过这个编号获取到该控件参考坐标系。比如上个例子用到的SpatialReference.create（4326），4326对应的是WGS84坐标系，所以SpatialReference.create（4326）就是WGS85地理坐标系对象了。<br>通过阅读Esri官方SDK文档，可以知道投影坐标枚举esriSRProjCSType包含1442个WKID,esriSRProjCS4Type包含1224个WKID。在这里将国内常用坐标系统的WKID整理如下：</p><table><thead><tr><th style="text-align:center">类别</th><th style="text-align:center">WKID</th><th>名称</th></tr></thead><tbody><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4214</td><td>GCS_Beijing_1954</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4326</td><td>GCS_WGS_1984</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4490</td><td>GCS_China_Geodetic_Coordinate_System_2000</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4555</td><td>GCS_New_Beijing</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4610</td><td>GCS_Xian_1980</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2327</td><td>Xian_1980_GK_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2328</td><td>Xian_1980_GK_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2329</td><td>Xian_1980_GK_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2330</td><td>Xian_1980_GK_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2331</td><td>Xian_1980_GK_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2332</td><td>Xian_1980_GK_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2333</td><td>Xian_1980_GK_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2334</td><td>Xian_1980_GK_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2335</td><td>Xian_1980_GK_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2336</td><td>Xian_1980_GK_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2337</td><td>Xian_1980_GK_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2338</td><td>Xian_1980_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2339</td><td>Xian_1980_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2340</td><td>Xian_1980_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2341</td><td>Xian_1980_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2342</td><td>Xian_1980_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2343</td><td>Xian_1980_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2344</td><td>Xian_1980_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2345</td><td>Xian_1980_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2346</td><td>Xian_1980_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2347</td><td>Xian_1980_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2348</td><td>Xian_1980_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2349</td><td>Xian_1980_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2350</td><td>Xian_1980_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2351</td><td>Xian_1980_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2352</td><td>Xian_1980_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2353</td><td>Xian_1980_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2354</td><td>Xian_1980_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2355</td><td>Xian_1980_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2356</td><td>Xian_1980_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2357</td><td>Xian_1980_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2358</td><td>Xian_1980_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2359</td><td>Xian_1980_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2360</td><td>Xian_1980_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2361</td><td>Xian_1980_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2362</td><td>Xian_1980_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2363</td><td>Xian_1980_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2364</td><td>Xian_1980_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2365</td><td>Xian_1980_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2366</td><td>Xian_1980_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2367</td><td>Xian_1980_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2368</td><td>Xian_1980_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2369</td><td>Xian_1980_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2370</td><td>Xian_1980_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2371</td><td>Xian_1980_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2372</td><td>Xian_1980_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2373</td><td>Xian_1980_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2374</td><td>Xian_1980_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2375</td><td>Xian_1980_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2376</td><td>Xian_1980_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2377</td><td>ian_1980_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2378</td><td>Xian_1980_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2379</td><td>Xian_1980_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2380</td><td>Xian_1980_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2381</td><td>Xian_1980_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2382</td><td>Xian_1980_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2383</td><td>Xian_1980_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2384</td><td>Xian_1980_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2385</td><td>Xian_1980_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2386</td><td>Xian_1980_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2387</td><td>Xian_1980_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2388</td><td>Xian_1980_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2389</td><td>Xian_1980_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2390</td><td>Xian_1980_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2401</td><td>Beijing_1954_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2402</td><td>Beijing_1954_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2403</td><td>Beijing_1954_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2404</td><td>Beijing_1954_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2405</td><td>Beijing_1954_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2406</td><td>Beijing_1954_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2407</td><td>Beijing_1954_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2408</td><td>Beijing_1954_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2409</td><td>Beijing_1954_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2410</td><td>Beijing_1954_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2411</td><td>Beijing_1954_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2412</td><td>Beijing_1954_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2413</td><td>Beijing_1954_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2414</td><td>Beijing_1954_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2415</td><td>Beijing_1954_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2416</td><td>Beijing_1954_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2417</td><td>Beijing_1954_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2418</td><td>Beijing_1954_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2419</td><td>Beijing_1954_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2420</td><td>Beijing_1954_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2421</td><td>Beijing_1954_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2422</td><td>Beijing_1954_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2423</td><td>Beijing_1954_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2424</td><td>Beijing_1954_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2425</td><td>Beijing_1954_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2426</td><td>Beijing_1954_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2427</td><td>Beijing_1954_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2428</td><td>Beijing_1954_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2429</td><td>Beijing_1954_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2430</td><td>Beijing_1954_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2431</td><td>Beijing_1954_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2432</td><td>Beijing_1954_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2433</td><td>Beijing_1954_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2434</td><td>Beijing_1954_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2435</td><td>Beijing_1954_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2436</td><td>Beijing_1954_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2437</td><td>Beijing_1954_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2438</td><td>Beijing_1954_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2439</td><td>Beijing_1954_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2440</td><td>Beijing_1954_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2441</td><td>Beijing_1954_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2442</td><td>Beijing_1954_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">3395</td><td>WGS_1984_World_Mercator</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4491</td><td>CGCS2000_GK_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4492</td><td>CGCS2000_GK_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4493</td><td>CGCS2000_GK_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4494</td><td>CGCS2000_GK_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4495</td><td>CGCS2000_GK_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4496</td><td>CGCS2000_GK_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4497</td><td>CGCS2000_GK_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4498</td><td>CGCS2000_GK_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4499</td><td>CGCS2000_GK_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4500</td><td>CGCS2000_GK_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4501</td><td>CGCS2000_GK_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4502</td><td>CGCS2000_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4503</td><td>CGCS2000_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4504</td><td>CGCS2000_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4505</td><td>CGCS2000_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4506</td><td>CGCS2000_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4507</td><td>CGCS2000_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4508</td><td>CGCS2000_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4509</td><td>CGCS2000_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4510</td><td>CGCS2000_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4511</td><td>CGCS2000_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4512</td><td>CGCS2000_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4513</td><td>CGCS2000_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4514</td><td>CGCS2000_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4515</td><td>CGCS2000_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4516</td><td>CGCS2000_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4517</td><td>CGCS2000_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4518</td><td>CGCS2000_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4519</td><td>CGCS2000_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4520</td><td>CGCS2000_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4521</td><td>CGCS2000_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4522</td><td>CGCS2000_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4523</td><td>CGCS2000_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4524</td><td>CGCS2000_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4525</td><td>CGCS2000_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4526</td><td>CGCS2000_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4527</td><td>CGCS2000_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4528</td><td>CGCS2000_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4529</td><td>CGCS2000_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4530</td><td>CGCS2000_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4531</td><td>CGCS2000_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4532</td><td>CGCS2000_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4533</td><td>CGCS2000_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4534</td><td>CGCS2000_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4535</td><td>CGCS2000_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4536</td><td>CGCS2000_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4537</td><td>CGCS2000_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4538</td><td>CGCS2000_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4539</td><td>CGCS2000_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4540</td><td>CGCS2000_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4541</td><td>CGCS2000_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4542</td><td>CGCS2000_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4543</td><td>CGCS2000_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4544</td><td>CGCS2000_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4545</td><td>CGCS2000_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4546</td><td>CGCS2000_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4547</td><td>CGCS2000_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4548</td><td>CGCS2000_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4549</td><td>CGCS2000_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4550</td><td>CGCS2000_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4551</td><td>CGCS2000_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4552</td><td>CGCS2000_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4553</td><td>CGCS2000_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4554</td><td>CGCS2000_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4568</td><td>New_Beijing_Gauss_Kruger_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4569</td><td>New_Beijing_Gauss_Kruger_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4570</td><td>New_Beijing_Gauss_Kruger_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4571</td><td>New_Beijing_Gauss_Kruger_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4572</td><td>New_Beijing_Gauss_Kruger_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4573</td><td>New_Beijing_Gauss_Kruger_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4574</td><td>New_Beijing_Gauss_Kruger_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4575</td><td>New_Beijing_Gauss_Kruger_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4576</td><td>New_Beijing_Gauss_Kruger_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4577</td><td>New_Beijing_Gauss_Kruger_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4578</td><td>New_Beijing_Gauss_Kruger_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4579</td><td>New_Beijing_Gauss_Kruger_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4580</td><td>New_Beijing_Gauss_Kruger_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4581</td><td>New_Beijing_Gauss_Kruger_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4582</td><td>New_Beijing_Gauss_Kruger_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4583</td><td>New_Beijing_Gauss_Kruger_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4584</td><td>New_Beijing_Gauss_Kruger_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4585</td><td>New_Beijing_Gauss_Kruger_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4586</td><td>New_Beijing_Gauss_Kruger_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4587</td><td>New_Beijing_Gauss_Kruger_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4588</td><td>New_Beijing_Gauss_Kruger_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4589</td><td>New_Beijing_Gauss_Kruger_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4652</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4653</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4654</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4655</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4656</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4766</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4767</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4768</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4769</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4770</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4771</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4772</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4773</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4774</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4775</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4776</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4777</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4778</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4779</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4780</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4781</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4782</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4783</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4784</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4785</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4786</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4787</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4788</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4789</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4790</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4791</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4792</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4793</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4794</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4795</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4796</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4797</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4798</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4799</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4800</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4822</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_135E</td></tr></tbody></table><p>以后需要坐标转换，直接查询这个表就可以了。</p><p>参考文章：<br><a href="http://www.cnblogs.com/liweis/p/5951032.html" target="_blank" rel="noopener">http://www.cnblogs.com/liweis/p/5951032.html</a><br><a href="http://blog.sina.com.cn/s/blog_80a9926b0101g0e0.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_80a9926b0101g0e0.html</a><br><a href="http://blog.csdn.net/zhouxuguang236/article/details/10752199" target="_blank" rel="noopener">http://blog.csdn.net/zhouxuguang236/article/details/10752199</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;【原文链接：&lt;a href=&quot;https://blog.csdn.net/bit_kaki/article/details/76252181】&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://blog.csdn.net/bit_kaki/article/details/76252181】&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;在我们的GIS应用项目里，常常遇见坐标转换的问题。最常见的就是WGS84坐标转其他坐标系，原因是WGS84坐标系是目前GPS数据采集所用的坐标系，而我国实际生产项目里常用的地图却是北京54坐标系，西安80坐标系以及中国大地2000坐标系等。所以当我们用设备采集到GPS经纬度以后，需要将其进行坐标转换才可以正确显示到我们使用的地图上。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.lifayu.com/categories/Android/"/>
    
      <category term="ArcGIS Runtime" scheme="http://www.lifayu.com/categories/Android/ArcGIS-Runtime/"/>
    
    
      <category term="Android" scheme="http://www.lifayu.com/tags/Android/"/>
    
      <category term="ArcGIS Runtime" scheme="http://www.lifayu.com/tags/ArcGIS-Runtime/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.lifayu.com/2018/05/11/hello-world/"/>
    <id>http://www.lifayu.com/2018/05/11/hello-world/</id>
    <published>2018-05-11T07:45:36.078Z</published>
    <updated>2018-05-13T05:23:56.339Z</updated>
    
    <content type="html"><![CDATA[<p>欢迎来到 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! 来发布你的第一篇博客吧. 查看 <a href="https://hexo.io/docs/" target="_blank" rel="noopener">文档</a> 以获取更多信息. 如果你在使用Hexo的过程中遇到任何问题, 你可以来 <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> 寻找答案或者在 <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>上提问.</p><a id="more"></a><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="创建新博客"><a href="#创建新博客" class="headerlink" title="创建新博客"></a>创建新博客</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="运行服务"><a href="#运行服务" class="headerlink" title="运行服务"></a>运行服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="推送到远程站点"><a href="#推送到远程站点" class="headerlink" title="推送到远程站点"></a>推送到远程站点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;欢迎来到 &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! 来发布你的第一篇博客吧. 查看 &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;文档&lt;/a&gt; 以获取更多信息. 如果你在使用Hexo的过程中遇到任何问题, 你可以来 &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; 寻找答案或者在 &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;上提问.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>树莓派：通过红外控制蓝牙音乐播放</title>
    <link href="http://www.lifayu.com/2016/11/19/Raspberry-IR-COntrol-BluetoothMusic/"/>
    <id>http://www.lifayu.com/2016/11/19/Raspberry-IR-COntrol-BluetoothMusic/</id>
    <published>2016-11-19T13:55:51.000Z</published>
    <updated>2018-05-11T10:48:47.969Z</updated>
    
    <content type="html"><![CDATA[<p><strong>【参考资料】</strong><br><a href="http://blog.csdn.net/xukai871105/article/details/22713925" target="_blank" rel="noopener">树莓派学习笔记——UART使用</a><br><a href="http://blog.csdn.net/sidely/article/details/40181463" target="_blank" rel="noopener">linux下串口调试（只用shell）</a></p><p>本文的目的是在上一篇文章（<a href="http://duyi324.github.io/2016/11/18/Raspberry-IR-Control/" target="_blank" rel="noopener">树莓派红外遥控测试</a>）的基础上，用红外控制树莓派，向蓝牙模块发送串口指令，进而控制蓝牙模块的音乐播放。</p><a id="more"></a><p><strong>【准备材料】</strong></p><ol><li>树莓派一个</li><li>红外接收器（本文用的是VS1838B）</li><li>红外遥控器</li><li>蓝牙模块（BK8000L）</li><li>杜邦线若干条</li></ol><p><strong>【详细步骤】</strong><br> <strong>1.将所有配件连接起来</strong><br>这是上次用到的遥控器和红外接收器（VS1838B）：<br><img src="http://z4a.net/images/2016/11/18/237f7e5db91441bd.jpg" alt="红外遥控器"><br><img src="http://z4a.net/images/2016/11/18/VS1838B.png" alt="红外接收器VS1838B"><br>还有本次用到的蓝牙模块（BK8000L）：<br><img src="http://z4a.net/images/2016/11/19/3eab953b6e0d7cac.png" alt="蓝牙模块"><br>树莓派引脚编号参考：<br><img src="http://z4a.net/images/2016/11/18/40Pin.png" alt="树莓派引脚参考图"><br>将蓝牙模块的串口接到树莓派的串口上面，TX接RX，RX接TX，VCC接3.3V，GND接GND，所有配件连接起来后：<br><img src="http://z4a.net/images/2016/11/19/4272ff9e7906dec1.png" alt="配件连接图"><br><strong>2.修改树莓派系统文件</strong><br>因为树莓派的串口默认用来远程登录用，所有先修改系统文件，将其功能恢复。<br>【1】修改 /boot/cmdline.txt<br>执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /boot/cmdline.txt</span><br></pre></td></tr></table></figure></p><p>删除加粗部分：<br>dwc_otg.lpm_enable=0 <strong><em>console=serial0,115200</em></strong> console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait<br>最终变为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dwc_otg.lpm_enable=0 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait</span><br></pre></td></tr></table></figure></p><blockquote><p>网上还说要修改 /etc/inittab，不过在我的系统里面没有这个文件，不知道为什么。<br>网上说要注释掉最后一行内容：<br>T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100</p></blockquote><p>最后重启树莓派。</p><p> <strong>2.测试蓝牙模块串口通信</strong><br>根据模块资料：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">控制指令格式：AT+&lt;CMD&gt;[&lt;param&gt;]\r\n</span><br><span class="line">数据反馈格式：&lt;IND&gt;[&lt;param&gt;]\r\n</span><br><span class="line">说明：控制指令是控制主机给蓝牙的控制命令，以“AT+”开始后面紧跟&lt;CMD&gt;控制</span><br><span class="line">指令，如果该指令带参数，则紧跟指令后继续传输&lt;param&gt;参数，最后以”\r\n”结束。</span><br><span class="line">数据反馈是蓝牙把各种状态和数据信息反馈给主机，&lt;IND&gt;是反馈指令，如果需要带参</span><br><span class="line">数，则紧跟&lt;IND&gt;之后继续传输&lt;param&gt;参数。</span><br><span class="line">注意：</span><br><span class="line">  \r\n：字符型为 换行，十六进制为 0x0D ，0x0A。</span><br></pre></td></tr></table></figure></p><p><img src="http://z4a.net/images/2016/11/19/BK8000L.png" alt="BK8000L串口控制指令"><br><img src="http://z4a.net/images/2016/11/19/BK8000L44ae4.png" alt="BK8000L串口查询/反馈指令"><br>树莓派上串口通信可以用Python的serial模块，这里只做测试用，为了方便就用shell直接发送命令了。<br>树莓派中打开终端，输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># echo -e 可以发送回车等特殊字符</span><br><span class="line">echo -e &quot;AT+MN\r&quot; &gt;/dev/ttyAMA0</span><br><span class="line">cat /dev/ttyAMA0</span><br></pre></td></tr></table></figure></p><p>第一条指令为向蓝牙模块发送串口指令<strong>“AT+MN\r”</strong>，即请求蓝牙模块的名称。<strong>“ttyAMA0”</strong>为树莓派的串口设备名字<br>第二条指令为接收来自串口设备<strong>“ttyAMA0”</strong>的数据，例如上述命令执行完毕后，如果顺利的话，终端会返回蓝牙模块的名字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NA: BK8000L</span><br></pre></td></tr></table></figure></p><p>表示串口通信没有问题。</p><p><strong>3.实现红外控制蓝牙模块</strong><br>要想实现对应功能，只需要通过树莓派向蓝牙模块发送串口指令即可，如要向实现播放/暂停功能，需要通过串口想蓝牙模块发送：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AT+MA\r    </span><br><span class="line">#\r为换行符</span><br></pre></td></tr></table></figure></p><p>在上篇文章（<a href="http://duyi324.github.io/2016/11/18/Raspberry-IR-Control/" target="_blank" rel="noopener">树莓派红外遥控测试</a>）中已经实现了红外控制树莓派执行相应的命令，其中按键与对应命令的配置文件存储在 <strong>/home/pi/.lircrc</strong> 文件中。所以这次打开这个文件并编辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /home/pi/.lircrc</span><br></pre></td></tr></table></figure></p><p>添加如下代码并保存：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PLAY</span><br><span class="line">    config = sudo echo -e &quot;AT+MA\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_NEXT</span><br><span class="line">    config = sudo echo -e &quot;AT+MD\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PREVIOUS</span><br><span class="line">    config = sudo echo -e &quot;AT+ME\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_VOLUMEUP</span><br><span class="line">    config = sudo echo -e &quot;AT+CK\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_VOLUMEDOWN</span><br><span class="line">    config = sudo echo -e &quot;AT+CL\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><p>编辑完毕后保存退出，重启红外控制服务，然后执行 <strong>irexec</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br><span class="line">irexec</span><br></pre></td></tr></table></figure></p><p>最后手机连接蓝牙模块（BK8000L）并播放音乐，用遥控器的按键进行测试。<br>以上代码只写了五个键（上一曲、下一曲、播放/暂停、增加音量、降低音量），更多功能以后再继续添加。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;【参考资料】&lt;/strong&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/xukai871105/article/details/22713925&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;树莓派学习笔记——UART使用&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/sidely/article/details/40181463&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;linux下串口调试（只用shell）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本文的目的是在上一篇文章（&lt;a href=&quot;http://duyi324.github.io/2016/11/18/Raspberry-IR-Control/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;树莓派红外遥控测试&lt;/a&gt;）的基础上，用红外控制树莓派，向蓝牙模块发送串口指令，进而控制蓝牙模块的音乐播放。&lt;/p&gt;
    
    </summary>
    
    
      <category term="红外" scheme="http://www.lifayu.com/tags/%E7%BA%A2%E5%A4%96/"/>
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
      <category term="蓝牙" scheme="http://www.lifayu.com/tags/%E8%93%9D%E7%89%99/"/>
    
      <category term="串口" scheme="http://www.lifayu.com/tags/%E4%B8%B2%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>树莓派红外遥控测试</title>
    <link href="http://www.lifayu.com/2016/11/19/Raspberry-IR-Control/"/>
    <id>http://www.lifayu.com/2016/11/19/Raspberry-IR-Control/</id>
    <published>2016-11-18T16:10:06.000Z</published>
    <updated>2019-01-09T11:42:59.963Z</updated>
    
    <content type="html"><![CDATA[<p>网上淘到了一个红外接收器（VS1838B）和一个红外遥控器，准备放到树莓派上学习一下红外控制。</p><a id="more"></a><p><img src="http://z4a.net/images/2016/11/18/237f7e5db91441bd.jpg" alt="红外遥控器"><br><img src="http://z4a.net/images/2016/11/18/VS1838B.png" alt="红外接收器VS1838B"></p><p>本文参考资料：<br><a href="http://blog.csdn.net/cqbamboo/article/details/37959103" target="_blank" rel="noopener">树莓派的红外遥控</a><br><a href="http://bbs.ickey.cn/community/forum.php?mod=viewthread&amp;tid=46041" target="_blank" rel="noopener">树莓派作品：红外遥控+2维度步进电机+超声波测距+语音输出</a><br><a href="http://www.eeboard.com/bbs/thread-6940-1-1.html" target="_blank" rel="noopener">【分享】给树莓派安装红外接收管并控制XBMC（连载二）</a><br><a href="http://blog.csdn.net/ohhpo/article/details/44354687" target="_blank" rel="noopener">树莓派 红外接收 RPi2 gpio chip not found lirc_rpi</a><br><a href="http://www.hdpfans.com/thread-182957-1-1.html" target="_blank" rel="noopener">3901方案学习、修改遥控码的方法</a></p><p><strong>目标：给树莓派给安装个红外接收管并遥控它</strong></p><ol><li>树莓派一个</li><li>红外接收器（本文用的是VS1838B）</li><li>红外遥控器</li><li>继电器一个（可选，也可用LED等）</li><li>杜邦线若干条</li></ol><p><img src="http://z4a.net/images/2016/11/18/5152a9c82f2473c3.png" alt="用到的材料"><br><strong>具体步骤：</strong></p><p> <strong>1.</strong>首先找到VS1838B的引脚定义：<br><img src="http://z4a.net/images/2016/11/18/8b47d08054eb76aa.jpg" alt="VS1838B引脚定义"><br>按照图示，把红外接收模块用杜邦线连接到树莓派上。<br><strong>2.</strong>安装lirc，修改配置文件<br>LIRC (Linux Infrared remote control)是一个linux系统下开源的软件包。这个软件可以让Linux系统接收及发送红外线信号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lirc</span><br><span class="line">sudo leafpad /etc/lirc/hardware.conf</span><br></pre></td></tr></table></figure></p><p>修改以下几处：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LIRCD_ATGS=&quot;&quot;</span><br><span class="line">DRIVER=&quot;default&quot;</span><br><span class="line">DEVICE=&quot;/dev/lirc0&quot;</span><br><span class="line">MODULES=&quot;lirc-rpi</span><br></pre></td></tr></table></figure></p><p><strong>3.</strong>终端执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /etc/modules</span><br></pre></td></tr></table></figure></p><p>添加下面两行到模块配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lirc-dev</span><br><span class="line">#我把红外接收模块的OUT接口接到了树莓派的GPIO18</span><br><span class="line">#因为本例中未用到红外发射模块，所以后面的gpio_out_pin可以不写</span><br><span class="line">lirc-rpi gpio_in_pin=18 gpio_out_pin=17</span><br></pre></td></tr></table></figure></p><p>配置完成后，重启一下树莓派，让配置生效。<br><img src="http://z4a.net/images/2016/11/18/RaspberryPiGPIOPins.png" alt="树莓派40pin引脚对照表"></p><p> <strong>4.</strong>重新开启lirc功能，至此lirc软件就配置完成了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br></pre></td></tr></table></figure></p><p> <strong>5.</strong>红外线接收功能<br> 首先关闭lirc软件，然后执行如下命令：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc stop</span><br><span class="line">mode2 -d /dev/lirc0</span><br></pre></td></tr></table></figure></p><p> 这时候提示<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no such file or directory</span><br></pre></td></tr></table></figure></p><p> 经过查看发现 <em>/dev</em> 下面没有 <em>lirc0</em> 这个module，度娘一番后，发现在<em>/boot/config.txt</em>里面把<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dtoverlay=lirc-rpi</span><br></pre></td></tr></table></figure></p><p> 取消注释，然后<em>reboot</em>，问题解决。<br> 再次执行<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mode2 -d /dev/lirc0</span><br></pre></td></tr></table></figure></p><p> 用红外遥控器，对着接收器按下任意按键，屏幕会打印类似下面的内容，说明红外接收功能正常。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">space 16300</span><br><span class="line">pulse 95</span><br><span class="line">space 28794</span><br><span class="line">pulse 80</span><br><span class="line">space 19395</span><br></pre></td></tr></table></figure></p><p> <strong>6.</strong>红外编码录制<br> 首先关闭lirc软件，然后查看可用的按键名<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc stop</span><br><span class="line">irrecord -list-namespace</span><br></pre></td></tr></table></figure></p><p> 根据我的遥控器，我选择了以下几个按键名并记录下来：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">KEY_CHANNELDOWN</span><br><span class="line">KEY_CHANNELUP</span><br><span class="line">KEY_CHANNEL</span><br><span class="line">KEY_PREVIOUS</span><br><span class="line">KEY_NEXT</span><br><span class="line">KEY_PLAY</span><br><span class="line">KEY_VOLUMEDOWN</span><br><span class="line">KEY_VOLUMEUP</span><br><span class="line">KEY_EQUAL</span><br><span class="line">KEY_NUMERIC_0 ~ KEY_NUMERIC_9</span><br></pre></td></tr></table></figure></p><p> 然后执行红外线编码录制命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">irrecord -d /dev/lirc0 ~/lircd.conf</span><br></pre></td></tr></table></figure></p><p>一直回车，直到看到<em>“Press RETURN now to start recording.”</em>，再回车一次，然后把遥控器上的每一个按键依次按一下，每个按键持续1s以上，每次按键屏幕上都会出现一个<strong>“.”</strong>。<br>按满两行后屏幕提示<em>“Please enter the name for the next button (press <enter> to finish recording)”</enter></em>，然后依次输入想要录制的按键，例如输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KEY_PLAY</span><br></pre></td></tr></table></figure></p><p>然后提示<em>“Now hold down button “KEY_LEFT”.”</em>，这时候按下遥控器上的播放按钮，软件会自动记录并跳转回<em>“Please enter the name for the next button (press <enter> to finish recording)”</enter></em>，把每一个想录制的按钮全部输入一遍，最后直接回车结束，配置文件就保存了。最后，将录制好的配置文件覆盖lirc软件的相应文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp ~/lircd.conf /etc/lirc/lircd.conf</span><br></pre></td></tr></table></figure></p><p>重启lirc软件，并执行irw命令，测试遥控器与接收模块是否工作正常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc start</span><br><span class="line">irw</span><br></pre></td></tr></table></figure></p><p>执行完毕后，按下遥控器的任意键，确保能正确输出所按下按钮的名称。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0000000000ffa25d 00 KEY_CHANNELDOWN /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNELDOWN /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_CHANNELUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNELUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_CHANNEL /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNEL /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_PLAY /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_PLAY /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_VOLUMEUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_VOLUMEUP /etc/lirc/lircd.conf</span><br></pre></td></tr></table></figure></p><p> <strong>7.</strong>配置<strong>~/.lircrc</strong>文件把按键与需要出发的行为进行关联，在<strong>~/.lircrc</strong>文件中增加如下内容：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PLAY</span><br><span class="line">    config = sudo python /home/pi/testIR.py</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_CHANNEL</span><br><span class="line">    config = sudo python /home/pi/test_CHANNEL.py</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><p> 本例中使用继电器测试功能，目的是当按下遥控器的Play按钮时，继电器接通，再次按下时，继电器断开。<br> 关于继电器的连接不再赘述，本例中将继电器的IN接口接到了树莓派的GPIO-27，testIR.py的内容如下：<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"></span><br><span class="line">PIN = <span class="number">27</span></span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line">GPIO.setwarnings(<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">GPIO.setup(PIN, GPIO.IN)</span><br><span class="line">GPIO.setup(PIN, GPIO.OUT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本例中GPIO的电平与继电器的开合对应情况为：</span></span><br><span class="line"><span class="comment"># 低电平--LOW--input值为0--继电器接通</span></span><br><span class="line"><span class="comment"># 高电平--HIGH--input值为1--继电器断开</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> GPIO.input(PIN) == <span class="number">0</span>:</span><br><span class="line">    GPIO.output(PIN, GPIO.HIGH)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    GPIO.output(PIN, GPIO.LOW)</span><br></pre></td></tr></table></figure></p><p> 将<strong>“.lircrc”</strong>文件与上述的py文件放到<strong>“/home/pi/“</strong>目录下，保存。<br> 最后，重启lirc软件并执行<strong>“irexec”</strong>命令：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br><span class="line">irexec</span><br></pre></td></tr></table></figure></p><p> 当按下遥控器的Play按钮时，继电器接通，再次按下时，继电器断开。表示测试成功。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;网上淘到了一个红外接收器（VS1838B）和一个红外遥控器，准备放到树莓派上学习一下红外控制。&lt;/p&gt;
    
    </summary>
    
    
      <category term="红外" scheme="http://www.lifayu.com/tags/%E7%BA%A2%E5%A4%96/"/>
    
      <category term="树莓派" scheme="http://www.lifayu.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>C# WinForm中RichTextBox自动滚动到最新行</title>
    <link href="http://www.lifayu.com/2016/11/08/TextBox-AutoScroll/"/>
    <id>http://www.lifayu.com/2016/11/08/TextBox-AutoScroll/</id>
    <published>2016-11-08T15:47:22.000Z</published>
    <updated>2018-05-13T05:22:48.283Z</updated>
    
    <content type="html"><![CDATA[<p>C#中一个RichTextBox，当新写入内容时，超过当前显示区域后，没法自动滚动到最低端，不方便查看内容。</p><a id="more"></a><p>【解决方法】<br>在TextBox的TextChanged事件中，添加如下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private void rtbLog_TextChanged(object sender, EventArgs e)</span><br><span class="line">&#123;</span><br><span class="line">    //将光标位置设置到当前内容的末尾</span><br><span class="line">    rtbLog.SelectionStart = rtbLog.Text.Length;</span><br><span class="line">    //滚动到光标位置</span><br><span class="line">    rtbLog.ScrollToCaret();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果就是所希望的了，当内容变化后，自动滚动到最底端：<br><img src="http://z4a.net/images/2016/11/08/AutoScroll.png" alt="自动滚动"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;C#中一个RichTextBox，当新写入内容时，超过当前显示区域后，没法自动滚动到最低端，不方便查看内容。&lt;/p&gt;
    
    </summary>
    
    
      <category term="C#" scheme="http://www.lifayu.com/tags/C/"/>
    
      <category term="WinForm" scheme="http://www.lifayu.com/tags/WinForm/"/>
    
      <category term="TextBox" scheme="http://www.lifayu.com/tags/TextBox/"/>
    
  </entry>
  
</feed>
