<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>ArcGIS Runtime中坐标的转换</title>
      <link href="/2018/05/12/ArcGIS-Runtime%E4%B8%AD%E5%9D%90%E6%A0%87%E7%9A%84%E8%BD%AC%E6%8D%A2/"/>
      <url>/2018/05/12/ArcGIS-Runtime%E4%B8%AD%E5%9D%90%E6%A0%87%E7%9A%84%E8%BD%AC%E6%8D%A2/</url>
      <content type="html"><![CDATA[<p>【原文链接：<a href="https://blog.csdn.net/bit_kaki/article/details/76252181】" target="_blank" rel="noopener">https://blog.csdn.net/bit_kaki/article/details/76252181】</a></p><hr><p>在我们的GIS应用项目里，常常遇见坐标转换的问题。最常见的就是WGS84坐标转其他坐标系，原因是WGS84坐标系是目前GPS数据采集所用的坐标系，而我国实际生产项目里常用的地图却是北京54坐标系，西安80坐标系以及中国大地2000坐标系等。所以当我们用设备采集到GPS经纬度以后，需要将其进行坐标转换才可以正确显示到我们使用的地图上。</p><p>对于坐标转换，有一种高精度而且任何时候都可以采用的方法是七参数坐标转换法，对于这种方法，我在之前一篇博客进行了详细的说明，地址是：<a href="http://blog.csdn.net/bit_kaki/article/details/52733429" target="_blank" rel="noopener">http://blog.csdn.net/bit_kaki/article/details/52733429</a> 。</p><p>但是在实际情况下，我们不一定拥有七参数，而且对采集的精度要求也并不那么高。在这个时候，其实ArcGIS for Android的库里已经给我们封装了个一个方法，我们可以直接调用就可以。这个方法就是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public static Geometry project(Geometry geometry, SpatialReference inputSR, SpatialReference outputSR) &#123;</span><br><span class="line">    return GeometryEngineCore.project(geometry, inputSR, outputSR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这个方法里三个参数分别是需要转换矢量对象（点、线、面），输入对象的空间参考坐标系，输出对象的空间参考坐标系。最后得到一个转换后的矢量对象。</p><p>比如我们程序里的MapView参数为mMapView，那么要将一个点从WGS84坐标系转换为MapView上加载图层的坐标系，我们只需要：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point point=(Point) GeometryEngine.project(wgs, SpatialReference.create(4326),mMapView.getSpatialReference());</span><br></pre></td></tr></table></figure></p><p>其中wgs是一个WGS84坐标系上的点的坐标，SpatialReference.create（4326）指的是输入点的空间坐标系mMapView.getSpatialReference（）是mMapView目前加载图层所使用的坐标系。</p><p>方法挺简单的，但是对于这个方法我们可以稍作一下研究里面SpatialReference参数的意义。</p><p>SpatialReference在指的ArcGIS里的地理坐标系对象，里面主要包含了五个参数：</p><ul><li>WKID：空间参考系统编号。</li><li>WKT：空间参考系统文本。</li><li>Unit：空间参考系统单位。</li><li>Tolerance：系统容差。</li><li>GCS：地理坐标系。</li></ul><p>这五个参数里第一个或者第二个是必须存在的，根据编号或者文本就可以获取到对应的空间坐标系。其中通过WKID来建立地理坐标系对象是最常见的，WKID，全称是Well Known ID，即ArcGIS对众多的空间坐标系进行的编号。只要我们知道空间参考坐标系所对应的编号，就可以通过这个编号获取到该控件参考坐标系。比如上个例子用到的SpatialReference.create（4326），4326对应的是WGS84坐标系，所以SpatialReference.create（4326）就是WGS85地理坐标系对象了。<br>通过阅读Esri官方SDK文档，可以知道投影坐标枚举esriSRProjCSType包含1442个WKID,esriSRProjCS4Type包含1224个WKID。在这里将国内常用坐标系统的WKID整理如下：</p><table><thead><tr><th style="text-align:center">类别</th><th style="text-align:center">WKID</th><th>名称</th></tr></thead><tbody><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4214</td><td>GCS_Beijing_1954</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4326</td><td>GCS_WGS_1984</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4490</td><td>GCS_China_Geodetic_Coordinate_System_2000</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4555</td><td>GCS_New_Beijing</td></tr><tr><td style="text-align:center">地理坐标</td><td style="text-align:center">4610</td><td>GCS_Xian_1980</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2327</td><td>Xian_1980_GK_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2328</td><td>Xian_1980_GK_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2329</td><td>Xian_1980_GK_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2330</td><td>Xian_1980_GK_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2331</td><td>Xian_1980_GK_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2332</td><td>Xian_1980_GK_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2333</td><td>Xian_1980_GK_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2334</td><td>Xian_1980_GK_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2335</td><td>Xian_1980_GK_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2336</td><td>Xian_1980_GK_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2337</td><td>Xian_1980_GK_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2338</td><td>Xian_1980_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2339</td><td>Xian_1980_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2340</td><td>Xian_1980_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2341</td><td>Xian_1980_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2342</td><td>Xian_1980_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2343</td><td>Xian_1980_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2344</td><td>Xian_1980_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2345</td><td>Xian_1980_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2346</td><td>Xian_1980_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2347</td><td>Xian_1980_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2348</td><td>Xian_1980_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2349</td><td>Xian_1980_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2350</td><td>Xian_1980_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2351</td><td>Xian_1980_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2352</td><td>Xian_1980_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2353</td><td>Xian_1980_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2354</td><td>Xian_1980_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2355</td><td>Xian_1980_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2356</td><td>Xian_1980_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2357</td><td>Xian_1980_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2358</td><td>Xian_1980_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2359</td><td>Xian_1980_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2360</td><td>Xian_1980_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2361</td><td>Xian_1980_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2362</td><td>Xian_1980_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2363</td><td>Xian_1980_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2364</td><td>Xian_1980_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2365</td><td>Xian_1980_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2366</td><td>Xian_1980_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2367</td><td>Xian_1980_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2368</td><td>Xian_1980_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2369</td><td>Xian_1980_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2370</td><td>Xian_1980_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2371</td><td>Xian_1980_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2372</td><td>Xian_1980_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2373</td><td>Xian_1980_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2374</td><td>Xian_1980_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2375</td><td>Xian_1980_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2376</td><td>Xian_1980_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2377</td><td>ian_1980_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2378</td><td>Xian_1980_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2379</td><td>Xian_1980_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2380</td><td>Xian_1980_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2381</td><td>Xian_1980_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2382</td><td>Xian_1980_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2383</td><td>Xian_1980_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2384</td><td>Xian_1980_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2385</td><td>Xian_1980_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2386</td><td>Xian_1980_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2387</td><td>Xian_1980_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2388</td><td>Xian_1980_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2389</td><td>Xian_1980_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2390</td><td>Xian_1980_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2401</td><td>Beijing_1954_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2402</td><td>Beijing_1954_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2403</td><td>Beijing_1954_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2404</td><td>Beijing_1954_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2405</td><td>Beijing_1954_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2406</td><td>Beijing_1954_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2407</td><td>Beijing_1954_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2408</td><td>Beijing_1954_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2409</td><td>Beijing_1954_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2410</td><td>Beijing_1954_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2411</td><td>Beijing_1954_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2412</td><td>Beijing_1954_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2413</td><td>Beijing_1954_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2414</td><td>Beijing_1954_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2415</td><td>Beijing_1954_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2416</td><td>Beijing_1954_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2417</td><td>Beijing_1954_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2418</td><td>Beijing_1954_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2419</td><td>Beijing_1954_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2420</td><td>Beijing_1954_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2421</td><td>Beijing_1954_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2422</td><td>Beijing_1954_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2423</td><td>Beijing_1954_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2424</td><td>Beijing_1954_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2425</td><td>Beijing_1954_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2426</td><td>Beijing_1954_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2427</td><td>Beijing_1954_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2428</td><td>Beijing_1954_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2429</td><td>Beijing_1954_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2430</td><td>Beijing_1954_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2431</td><td>Beijing_1954_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2432</td><td>Beijing_1954_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2433</td><td>Beijing_1954_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2434</td><td>Beijing_1954_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2435</td><td>Beijing_1954_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2436</td><td>Beijing_1954_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2437</td><td>Beijing_1954_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2438</td><td>Beijing_1954_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2439</td><td>Beijing_1954_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2440</td><td>Beijing_1954_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2441</td><td>Beijing_1954_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">2442</td><td>Beijing_1954_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">3395</td><td>WGS_1984_World_Mercator</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4491</td><td>CGCS2000_GK_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4492</td><td>CGCS2000_GK_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4493</td><td>CGCS2000_GK_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4494</td><td>CGCS2000_GK_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4495</td><td>CGCS2000_GK_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4496</td><td>CGCS2000_GK_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4497</td><td>CGCS2000_GK_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4498</td><td>CGCS2000_GK_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4499</td><td>CGCS2000_GK_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4500</td><td>CGCS2000_GK_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4501</td><td>CGCS2000_GK_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4502</td><td>CGCS2000_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4503</td><td>CGCS2000_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4504</td><td>CGCS2000_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4505</td><td>CGCS2000_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4506</td><td>CGCS2000_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4507</td><td>CGCS2000_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4508</td><td>CGCS2000_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4509</td><td>CGCS2000_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4510</td><td>CGCS2000_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4511</td><td>CGCS2000_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4512</td><td>CGCS2000_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4513</td><td>CGCS2000_3_Degree_GK_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4514</td><td>CGCS2000_3_Degree_GK_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4515</td><td>CGCS2000_3_Degree_GK_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4516</td><td>CGCS2000_3_Degree_GK_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4517</td><td>CGCS2000_3_Degree_GK_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4518</td><td>CGCS2000_3_Degree_GK_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4519</td><td>CGCS2000_3_Degree_GK_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4520</td><td>CGCS2000_3_Degree_GK_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4521</td><td>CGCS2000_3_Degree_GK_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4522</td><td>CGCS2000_3_Degree_GK_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4523</td><td>CGCS2000_3_Degree_GK_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4524</td><td>CGCS2000_3_Degree_GK_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4525</td><td>CGCS2000_3_Degree_GK_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4526</td><td>CGCS2000_3_Degree_GK_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4527</td><td>CGCS2000_3_Degree_GK_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4528</td><td>CGCS2000_3_Degree_GK_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4529</td><td>CGCS2000_3_Degree_GK_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4530</td><td>CGCS2000_3_Degree_GK_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4531</td><td>CGCS2000_3_Degree_GK_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4532</td><td>CGCS2000_3_Degree_GK_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4533</td><td>CGCS2000_3_Degree_GK_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4534</td><td>CGCS2000_3_Degree_GK_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4535</td><td>CGCS2000_3_Degree_GK_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4536</td><td>CGCS2000_3_Degree_GK_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4537</td><td>CGCS2000_3_Degree_GK_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4538</td><td>CGCS2000_3_Degree_GK_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4539</td><td>CGCS2000_3_Degree_GK_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4540</td><td>CGCS2000_3_Degree_GK_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4541</td><td>CGCS2000_3_Degree_GK_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4542</td><td>CGCS2000_3_Degree_GK_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4543</td><td>CGCS2000_3_Degree_GK_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4544</td><td>CGCS2000_3_Degree_GK_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4545</td><td>CGCS2000_3_Degree_GK_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4546</td><td>CGCS2000_3_Degree_GK_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4547</td><td>CGCS2000_3_Degree_GK_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4548</td><td>CGCS2000_3_Degree_GK_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4549</td><td>CGCS2000_3_Degree_GK_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4550</td><td>CGCS2000_3_Degree_GK_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4551</td><td>CGCS2000_3_Degree_GK_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4552</td><td>CGCS2000_3_Degree_GK_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4553</td><td>CGCS2000_3_Degree_GK_CM_132E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4554</td><td>CGCS2000_3_Degree_GK_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4568</td><td>New_Beijing_Gauss_Kruger_Zone_13</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4569</td><td>New_Beijing_Gauss_Kruger_Zone_14</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4570</td><td>New_Beijing_Gauss_Kruger_Zone_15</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4571</td><td>New_Beijing_Gauss_Kruger_Zone_16</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4572</td><td>New_Beijing_Gauss_Kruger_Zone_17</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4573</td><td>New_Beijing_Gauss_Kruger_Zone_18</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4574</td><td>New_Beijing_Gauss_Kruger_Zone_19</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4575</td><td>New_Beijing_Gauss_Kruger_Zone_20</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4576</td><td>New_Beijing_Gauss_Kruger_Zone_21</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4577</td><td>New_Beijing_Gauss_Kruger_Zone_22</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4578</td><td>New_Beijing_Gauss_Kruger_Zone_23</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4579</td><td>New_Beijing_Gauss_Kruger_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4580</td><td>New_Beijing_Gauss_Kruger_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4581</td><td>New_Beijing_Gauss_Kruger_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4582</td><td>New_Beijing_Gauss_Kruger_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4583</td><td>New_Beijing_Gauss_Kruger_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4584</td><td>New_Beijing_Gauss_Kruger_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4585</td><td>New_Beijing_Gauss_Kruger_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4586</td><td>New_Beijing_Gauss_Kruger_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4587</td><td>New_Beijing_Gauss_Kruger_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4588</td><td>New_Beijing_Gauss_Kruger_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4589</td><td>New_Beijing_Gauss_Kruger_CM_135E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4652</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_25</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4653</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_26</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4654</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_27</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4655</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_28</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4656</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_29</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4766</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_30</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4767</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_31</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4768</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_32</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4769</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_33</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4770</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_34</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4771</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_35</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4772</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_36</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4773</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_37</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4774</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_38</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4775</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_39</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4776</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_40</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4777</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_41</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4778</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_42</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4779</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_43</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4780</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_44</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4781</td><td>New_Beijing_3_Degree_Gauss_Kruger_Zone_45</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4782</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_75E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4783</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_78E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4784</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_81E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4785</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_84E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4786</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_87E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4787</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_90E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4788</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_93E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4789</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_96E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4790</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_99E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4791</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_102E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4792</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_105E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4793</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_108E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4794</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_111E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4795</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_114E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4796</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_117E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4797</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_120E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4798</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_123E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4799</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_126E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4800</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_129E</td></tr><tr><td style="text-align:center">投影坐标</td><td style="text-align:center">4822</td><td>New_Beijing_3_Degree_Gauss_Kruger_CM_135E</td></tr></tbody></table><p>以后需要坐标转换，直接查询这个表就可以了。</p><p>参考文章：<br><a href="http://www.cnblogs.com/liweis/p/5951032.html" target="_blank" rel="noopener">http://www.cnblogs.com/liweis/p/5951032.html</a><br><a href="http://blog.sina.com.cn/s/blog_80a9926b0101g0e0.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_80a9926b0101g0e0.html</a><br><a href="http://blog.csdn.net/zhouxuguang236/article/details/10752199" target="_blank" rel="noopener">http://blog.csdn.net/zhouxuguang236/article/details/10752199</a></p>]]></content>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> ArcGIS Runtime </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/05/11/hello-world/"/>
      <url>/2018/05/11/hello-world/</url>
      <content type="html"><![CDATA[<p>欢迎来到 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! 来发布你的第一篇博客吧. 查看 <a href="https://hexo.io/docs/" target="_blank" rel="noopener">文档</a> 以获取更多信息. 如果你在使用Hexo的过程中遇到任何问题, 你可以来 <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> 寻找答案或者在 <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>上提问.</p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="创建新博客"><a href="#创建新博客" class="headerlink" title="创建新博客"></a>创建新博客</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="运行服务"><a href="#运行服务" class="headerlink" title="运行服务"></a>运行服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="推送到远程站点"><a href="#推送到远程站点" class="headerlink" title="推送到远程站点"></a>推送到远程站点</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>更多信息: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>树莓派：通过红外控制蓝牙音乐播放</title>
      <link href="/2016/11/19/Raspberry-IR-COntrol-BluetoothMusic/"/>
      <url>/2016/11/19/Raspberry-IR-COntrol-BluetoothMusic/</url>
      <content type="html"><![CDATA[<p><strong>【参考资料】</strong><br><a href="http://blog.csdn.net/xukai871105/article/details/22713925" target="_blank" rel="noopener">树莓派学习笔记——UART使用</a><br><a href="http://blog.csdn.net/sidely/article/details/40181463" target="_blank" rel="noopener">linux下串口调试（只用shell）</a></p><p>本文的目的是在上一篇文章（<a href="http://duyi324.github.io/2016/11/18/Raspberry-IR-Control/" target="_blank" rel="noopener">树莓派红外遥控测试</a>）的基础上，用红外控制树莓派，向蓝牙模块发送串口指令，进而控制蓝牙模块的音乐播放。</p><a id="more"></a><p><strong>【准备材料】</strong></p><ol><li>树莓派一个</li><li>红外接收器（本文用的是VS1838B）</li><li>红外遥控器</li><li>蓝牙模块（BK8000L）</li><li>杜邦线若干条</li></ol><p><strong>【详细步骤】</strong><br> <strong>1.将所有配件连接起来</strong><br>这是上次用到的遥控器和红外接收器（VS1838B）：<br><img src="http://z4a.net/images/2016/11/18/237f7e5db91441bd.jpg" alt="红外遥控器"><br><img src="http://z4a.net/images/2016/11/18/VS1838B.png" alt="红外接收器VS1838B"><br>还有本次用到的蓝牙模块（BK8000L）：<br><img src="http://z4a.net/images/2016/11/19/3eab953b6e0d7cac.png" alt="蓝牙模块"><br>树莓派引脚编号参考：<br><img src="http://z4a.net/images/2016/11/18/40Pin.png" alt="树莓派引脚参考图"><br>将蓝牙模块的串口接到树莓派的串口上面，TX接RX，RX接TX，VCC接3.3V，GND接GND，所有配件连接起来后：<br><img src="http://z4a.net/images/2016/11/19/4272ff9e7906dec1.png" alt="配件连接图"><br><strong>2.修改树莓派系统文件</strong><br>因为树莓派的串口默认用来远程登录用，所有先修改系统文件，将其功能恢复。<br>【1】修改 /boot/cmdline.txt<br>执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /boot/cmdline.txt</span><br></pre></td></tr></table></figure></p><p>删除加粗部分：<br>dwc_otg.lpm_enable=0 <strong><em>console=serial0,115200</em></strong> console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait<br>最终变为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dwc_otg.lpm_enable=0 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait</span><br></pre></td></tr></table></figure></p><blockquote><p>网上还说要修改 /etc/inittab，不过在我的系统里面没有这个文件，不知道为什么。<br>网上说要注释掉最后一行内容：<br>T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100</p></blockquote><p>最后重启树莓派。</p><p> <strong>2.测试蓝牙模块串口通信</strong><br>根据模块资料：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">控制指令格式：AT+&lt;CMD&gt;[&lt;param&gt;]\r\n</span><br><span class="line">数据反馈格式：&lt;IND&gt;[&lt;param&gt;]\r\n</span><br><span class="line">说明：控制指令是控制主机给蓝牙的控制命令，以“AT+”开始后面紧跟&lt;CMD&gt;控制</span><br><span class="line">指令，如果该指令带参数，则紧跟指令后继续传输&lt;param&gt;参数，最后以”\r\n”结束。</span><br><span class="line">数据反馈是蓝牙把各种状态和数据信息反馈给主机，&lt;IND&gt;是反馈指令，如果需要带参</span><br><span class="line">数，则紧跟&lt;IND&gt;之后继续传输&lt;param&gt;参数。</span><br><span class="line">注意：</span><br><span class="line">  \r\n：字符型为 换行，十六进制为 0x0D ，0x0A。</span><br></pre></td></tr></table></figure></p><p><img src="http://z4a.net/images/2016/11/19/BK8000L.png" alt="BK8000L串口控制指令"><br><img src="http://z4a.net/images/2016/11/19/BK8000L44ae4.png" alt="BK8000L串口查询/反馈指令"><br>树莓派上串口通信可以用Python的serial模块，这里只做测试用，为了方便就用shell直接发送命令了。<br>树莓派中打开终端，输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># echo -e 可以发送回车等特殊字符</span><br><span class="line">echo -e &quot;AT+MN\r&quot; &gt;/dev/ttyAMA0</span><br><span class="line">cat /dev/ttyAMA0</span><br></pre></td></tr></table></figure></p><p>第一条指令为向蓝牙模块发送串口指令<strong>“AT+MN\r”</strong>，即请求蓝牙模块的名称。<strong>“ttyAMA0”</strong>为树莓派的串口设备名字<br>第二条指令为接收来自串口设备<strong>“ttyAMA0”</strong>的数据，例如上述命令执行完毕后，如果顺利的话，终端会返回蓝牙模块的名字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NA: BK8000L</span><br></pre></td></tr></table></figure></p><p>表示串口通信没有问题。</p><p><strong>3.实现红外控制蓝牙模块</strong><br>要想实现对应功能，只需要通过树莓派向蓝牙模块发送串口指令即可，如要向实现播放/暂停功能，需要通过串口想蓝牙模块发送：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AT+MA\r    </span><br><span class="line">#\r为换行符</span><br></pre></td></tr></table></figure></p><p>在上篇文章（<a href="http://duyi324.github.io/2016/11/18/Raspberry-IR-Control/" target="_blank" rel="noopener">树莓派红外遥控测试</a>）中已经实现了红外控制树莓派执行相应的命令，其中按键与对应命令的配置文件存储在 <strong>/home/pi/.lircrc</strong> 文件中。所以这次打开这个文件并编辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /home/pi/.lircrc</span><br></pre></td></tr></table></figure></p><p>添加如下代码并保存：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PLAY</span><br><span class="line">    config = sudo echo -e &quot;AT+MA\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_NEXT</span><br><span class="line">    config = sudo echo -e &quot;AT+MD\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PREVIOUS</span><br><span class="line">    config = sudo echo -e &quot;AT+ME\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_VOLUMEUP</span><br><span class="line">    config = sudo echo -e &quot;AT+CK\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_VOLUMEDOWN</span><br><span class="line">    config = sudo echo -e &quot;AT+CL\r&quot; &gt; /dev/ttyAMA0; cat /dev/ttyAMA0</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><p>编辑完毕后保存退出，重启红外控制服务，然后执行 <strong>irexec</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br><span class="line">irexec</span><br></pre></td></tr></table></figure></p><p>最后手机连接蓝牙模块（BK8000L）并播放音乐，用遥控器的按键进行测试。<br>以上代码只写了五个键（上一曲、下一曲、播放/暂停、增加音量、降低音量），更多功能以后再继续添加。</p>]]></content>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> 红外 </tag>
            
            <tag> 蓝牙 </tag>
            
            <tag> 串口 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>树莓派红外遥控测试</title>
      <link href="/2016/11/19/Raspberry-IR-Control/"/>
      <url>/2016/11/19/Raspberry-IR-Control/</url>
      <content type="html"><![CDATA[<p>网上淘到了一个红外接收器（VS1838B）和一个红外遥控器，准备放到树莓派上学习一下红外控制。</p><p><img src="http://z4a.net/images/2016/11/18/237f7e5db91441bd.jpg" alt="红外遥控器"><br><img src="http://z4a.net/images/2016/11/18/VS1838B.png" alt="红外接收器VS1838B"></p><p>本文参考资料：<br><a href="http://blog.csdn.net/cqbamboo/article/details/37959103" target="_blank" rel="noopener">树莓派的红外遥控</a><br><a href="http://bbs.ickey.cn/community/forum.php?mod=viewthread&amp;tid=46041" target="_blank" rel="noopener">树莓派作品：红外遥控+2维度步进电机+超声波测距+语音输出</a><br><a href="http://www.eeboard.com/bbs/thread-6940-1-1.html" target="_blank" rel="noopener">【分享】给树莓派安装红外接收管并控制XBMC（连载二）</a><br><a href="http://blog.csdn.net/ohhpo/article/details/44354687" target="_blank" rel="noopener">树莓派 红外接收 RPi2 gpio chip not found lirc_rpi</a><br><a href="http://www.hdpfans.com/thread-182957-1-1.html" target="_blank" rel="noopener">3901方案学习、修改遥控码的方法</a></p><a id="more"></a><p><strong>目标：给树莓派给安装个红外接收管并遥控它</strong></p><ol><li>树莓派一个</li><li>红外接收器（本文用的是VS1838B）</li><li>红外遥控器</li><li>继电器一个（可选，也可用LED等）</li><li>杜邦线若干条</li></ol><p><img src="http://z4a.net/images/2016/11/18/5152a9c82f2473c3.png" alt="用到的材料"><br><strong>具体步骤：</strong></p><p> <strong>1.</strong>首先找到VS1838B的引脚定义：<br><img src="http://z4a.net/images/2016/11/18/8b47d08054eb76aa.jpg" alt="VS1838B引脚定义"><br>按照图示，把红外接收模块用杜邦线连接到树莓派上。<br><strong>2.</strong>安装lirc，修改配置文件<br>LIRC (Linux Infrared remote control)是一个linux系统下开源的软件包。这个软件可以让Linux系统接收及发送红外线信号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lirc</span><br><span class="line">sudo leafpad /etc/lirc/hardware.conf</span><br></pre></td></tr></table></figure></p><p>修改以下几处：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LIRCD_ATGS=&quot;&quot;</span><br><span class="line">DRIVER=&quot;default&quot;</span><br><span class="line">DEVICE=&quot;/dev/lirc0&quot;</span><br><span class="line">MODULES=&quot;lirc-rpi</span><br></pre></td></tr></table></figure></p><p><strong>3.</strong>终端执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo leafpad /etc/modules</span><br></pre></td></tr></table></figure></p><p>添加下面两行到模块配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lirc-dev</span><br><span class="line">#我把红外接收模块的OUT接口接到了树莓派的GPIO18</span><br><span class="line">#因为本例中未用到红外发射模块，所以后面的gpio_out_pin可以不写</span><br><span class="line">lirc-rpi gpio_in_pin=18 gpio_out_pin=17</span><br></pre></td></tr></table></figure></p><p>配置完成后，重启一下树莓派，让配置生效。<br><img src="http://z4a.net/images/2016/11/18/RaspberryPiGPIOPins.png" alt="树莓派40pin引脚对照表"></p><p> <strong>4.</strong>重新开启lirc功能，至此lirc软件就配置完成了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br></pre></td></tr></table></figure></p><p> <strong>5.</strong>红外线接收功能<br> 首先关闭lirc软件，然后执行如下命令：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc stop</span><br><span class="line">mode2 -d /dev/lirc0</span><br></pre></td></tr></table></figure></p><p> 这时候提示<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no such file or directory</span><br></pre></td></tr></table></figure></p><p> 经过查看发现 <em>/dev</em> 下面没有 <em>lirc0</em> 这个module，度娘一番后，发现在<em>/boot/config.txt</em>里面把<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dtoverlay=lirc-rpi</span><br></pre></td></tr></table></figure></p><p> 取消注释，然后<em>reboot</em>，问题解决。<br> 再次执行<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mode2 -d /dev/lirc0</span><br></pre></td></tr></table></figure></p><p> 用红外遥控器，对着接收器按下任意按键，屏幕会打印类似下面的内容，说明红外接收功能正常。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">space 16300</span><br><span class="line">pulse 95</span><br><span class="line">space 28794</span><br><span class="line">pulse 80</span><br><span class="line">space 19395</span><br></pre></td></tr></table></figure></p><p> <strong>6.</strong>红外编码录制<br> 首先关闭lirc软件，然后查看可用的按键名<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc stop</span><br><span class="line">irrecord -list-namespace</span><br></pre></td></tr></table></figure></p><p> 根据我的遥控器，我选择了以下几个按键名并记录下来：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">KEY_CHANNELDOWN</span><br><span class="line">KEY_CHANNELUP</span><br><span class="line">KEY_CHANNEL</span><br><span class="line">KEY_PREVIOUS</span><br><span class="line">KEY_NEXT</span><br><span class="line">KEY_PLAY</span><br><span class="line">KEY_VOLUMEDOWN</span><br><span class="line">KEY_VOLUMEUP</span><br><span class="line">KEY_EQUAL</span><br><span class="line">KEY_NUMERIC_0 ~ KEY_NUMERIC_9</span><br></pre></td></tr></table></figure></p><p> 然后执行红外线编码录制命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">irrecord -d /dev/lirc0 ~/lircd.conf</span><br></pre></td></tr></table></figure></p><p>一直回车，直到看到<em>“Press RETURN now to start recording.”</em>，再回车一次，然后把遥控器上的每一个按键依次按一下，每个按键持续1s以上，每次按键屏幕上都会出现一个<strong>“.”</strong>。<br>按满两行后屏幕提示<em>“Please enter the name for the next button (press <enter> to finish recording)”</enter></em>，然后依次输入想要录制的按键，例如输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KEY_PLAY</span><br></pre></td></tr></table></figure></p><p>然后提示<em>“Now hold down button “KEY_LEFT”.”</em>，这时候按下遥控器上的播放按钮，软件会自动记录并跳转回<em>“Please enter the name for the next button (press <enter> to finish recording)”</enter></em>，把每一个想录制的按钮全部输入一遍，最后直接回车结束，配置文件就保存了。最后，将录制好的配置文件覆盖lirc软件的相应文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp ~/lircd.conf /etc/lirc/lircd.conf</span><br></pre></td></tr></table></figure></p><p>重启lirc软件，并执行irw命令，测试遥控器与接收模块是否工作正常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc start</span><br><span class="line">irw</span><br></pre></td></tr></table></figure></p><p>执行完毕后，按下遥控器的任意键，确保能正确输出所按下按钮的名称。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0000000000ffa25d 00 KEY_CHANNELDOWN /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNELDOWN /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_CHANNELUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNELUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_CHANNEL /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_CHANNEL /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_PLAY /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_PLAY /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 00 KEY_VOLUMEUP /etc/lirc/lircd.conf</span><br><span class="line">0000000000ffa25d 01 KEY_VOLUMEUP /etc/lirc/lircd.conf</span><br></pre></td></tr></table></figure></p><p> <strong>7.</strong>配置<strong>~/.lircrc</strong>文件把按键与需要出发的行为进行关联，在<strong>~/.lircrc</strong>文件中增加如下内容：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_PLAY</span><br><span class="line">    config = sudo python /home/pi/testIR.py</span><br><span class="line">end</span><br><span class="line">begin</span><br><span class="line">    prog = irexec</span><br><span class="line">    button = KEY_CHANNEL</span><br><span class="line">    config = sudo python /home/pi/test_CHANNEL.py</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><p> 本例中使用继电器测试功能，目的是当按下遥控器的Play按钮时，继电器接通，再次按下时，继电器断开。<br> 关于继电器的连接不再赘述，本例中将继电器的IN接口接到了树莓派的GPIO-27，testIR.py的内容如下：<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"></span><br><span class="line">PIN = <span class="number">27</span></span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line">GPIO.setwarnings(<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">GPIO.setup(PIN, GPIO.IN)</span><br><span class="line">GPIO.setup(PIN, GPIO.OUT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本例中GPIO的电平与继电器的开合对应情况为：</span></span><br><span class="line"><span class="comment"># 低电平--LOW--input值为0--继电器接通</span></span><br><span class="line"><span class="comment"># 高电平--HIGH--input值为1--继电器断开</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> GPIO.input(PIN) == <span class="number">0</span>:</span><br><span class="line">    GPIO.output(PIN, GPIO.HIGH)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    GPIO.output(PIN, GPIO.LOW)</span><br></pre></td></tr></table></figure></p><p> 将<strong>“.lircrc”</strong>文件与上述的py文件放到<strong>“/home/pi/“</strong>目录下，保存。<br> 最后，重启lirc软件并执行<strong>“irexec”</strong>命令：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/lirc restart</span><br><span class="line">irexec</span><br></pre></td></tr></table></figure></p><p> 当按下遥控器的Play按钮时，继电器接通，再次按下时，继电器断开。表示测试成功。</p>]]></content>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> 红外 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>C# WinForm中RichTextBox自动滚动到最新行</title>
      <link href="/2016/11/08/TextBox-AutoScroll/"/>
      <url>/2016/11/08/TextBox-AutoScroll/</url>
      <content type="html"><![CDATA[<p>C#中一个RichTextBox，当新写入内容时，超过当前显示区域后，没法自动滚动到最低端，不方便查看内容。<br>【解决方法】<br>在TextBox的TextChanged事件中，添加如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private void rtbLog_TextChanged(object sender, EventArgs e)</span><br><span class="line">&#123;</span><br><span class="line">    //将光标位置设置到当前内容的末尾</span><br><span class="line">    rtbLog.SelectionStart = rtbLog.Text.Length;</span><br><span class="line">    //滚动到光标位置</span><br><span class="line">    rtbLog.ScrollToCaret();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>效果就是所希望的了，当内容变化后，自动滚动到最底端：<br><img src="http://z4a.net/images/2016/11/08/AutoScroll.png" alt="自动滚动"></p>]]></content>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> WinForm </tag>
            
            <tag> TextBox </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>树莓派实现物联网第一步：控制LED</title>
      <link href="/2016/09/17/raspberry-iot/"/>
      <url>/2016/09/17/raspberry-iot/</url>
      <content type="html"><![CDATA[<p><strong>硬件部分</strong></p><p> 准备材料：</p><ul><li>树莓派</li><li>面包板（可选）</li><li>杜邦线（可选）</li><li>LED</li><li>继电器</li></ul><blockquote><p>LED、继电器等连接到面包板上，继电器连接到树莓派的GPIO11和GPIO13，LED连接到继电器，具体链接方法不再详述；<br><img src="http://z4a.net/images/2016/09/17/1da6087feb34689b.jpg" alt="硬件连接"></p></blockquote><a id="more"></a><p><strong>软件部分</strong></p><ol><li>安装FLask(<a href="http://www.pythondoc.com/flask-mega-tutorial/helloworld.html" target="_blank" rel="noopener">Flask安装教程</a>)</li><li>创建led.py，相同目录下创建templates文件夹，里面放一个led.html，代码分别如下：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template , request</span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">GPIO.setmode(GPIO.BOARD)</span><br><span class="line">GPIO.setup(<span class="number">11</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">13</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">3</span>, GPIO.OUT)</span><br><span class="line">GPIO.setup(<span class="number">5</span>, GPIO.OUT)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">time.sleep(<span class="number">0.1</span>)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.LOW)</span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.LOW)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">a = <span class="string">'checked'</span></span><br><span class="line"><span class="meta">@app.route('/',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> request.method ==<span class="string">'POST'</span>:</span><br><span class="line">        GPIO.output(<span class="number">5</span>, GPIO.LOW)</span><br><span class="line">        time.sleep(<span class="number">0.001</span>)</span><br><span class="line">        GPIO.output(<span class="number">5</span>, GPIO.HIGH)</span><br><span class="line">        a = request.form[<span class="string">"on2"</span>]</span><br><span class="line">        b = request.form[<span class="string">"radio"</span>]</span><br><span class="line">        <span class="keyword">if</span> b == <span class="string">'one'</span>:</span><br><span class="line">            <span class="keyword">if</span> a == <span class="string">'on'</span>:</span><br><span class="line">                GPIO.output(<span class="number">11</span>, GPIO.LOW)</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,i = <span class="string">'ON'</span>,a = <span class="string">'checked'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                GPIO.output(<span class="number">11</span>, GPIO.HIGH)</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,i = <span class="string">'OFF'</span>,a = <span class="string">'checked'</span>)</span><br><span class="line">        <span class="keyword">if</span> b == <span class="string">'two'</span>:</span><br><span class="line">                <span class="keyword">if</span> a == <span class="string">'on'</span>:</span><br><span class="line">                        GPIO.output(<span class="number">13</span>, GPIO.LOW)</span><br><span class="line">                        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,j = <span class="string">'ON'</span>,b = <span class="string">'checked'</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                        GPIO.output(<span class="number">13</span>, GPIO.HIGH)</span><br><span class="line">                        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,j = <span class="string">'OFF'</span>,b = <span class="string">'checked'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>,w = <span class="string">'please choose the botton!'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        GPIO.output(<span class="number">3</span>, GPIO.LOW)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        GPIO.output(<span class="number">3</span>, GPIO.HIGH)</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">'led.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">        app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">8888</span>, debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>led开关<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"favicon.ico"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">.aa&#123;</span></span><br><span class="line"><span class="undefined">fontcolor:FOO;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>led控制<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;w&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span> <span class="attr">name</span>=<span class="string">"form1"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"radio"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"one"</span> &#123;&#123;<span class="attr">a</span>&#125;&#125;=<span class="string">"&#123;&#123;a&#125;&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"radio"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">开关1&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"two"</span> &#123;&#123;<span class="attr">b</span>&#125;&#125;=<span class="string">"&#123;&#123;b&#125;&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"radio2"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">开关2</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>状态:&#123;&#123;i&#125;&#125; &amp;nbsp;&amp;nbsp;&amp;nbsp; 状态:&#123;&#123;j&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:300px; height:75px; background-color: #0F0; font-size:24px; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color:#FFF"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"on2"</span> <span class="attr">id</span>=<span class="string">"on2"</span> <span class="attr">value</span>=<span class="string">"on"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:300px; height:75px; background-color:#F00;font-size:24px; font-family:Verdana, Geneva, sans-serif; font-weight:bold; color:#FFF"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"on2"</span> <span class="attr">id</span>=<span class="string">"on2"</span> <span class="attr">value</span>=<span class="string">"off"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在同一局域网中的其他手机或电脑中输入树莓派的IP地址:8888，即可看到效果：<br><img src="http://z4a.net/images/2016/09/17/IOT.png" alt="网页效果图"></p><p>最后，选择开关1或者开关2，然后点击on或者off，即可看到LED灯会点亮或熄灭。</p>]]></content>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> 物联网 </tag>
            
            <tag> IOT </tag>
            
            <tag> LED </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ActionBar基础：实现顶部返回按钮</title>
      <link href="/2016/06/22/ActionBar-TopBackButton/"/>
      <url>/2016/06/22/ActionBar-TopBackButton/</url>
      <content type="html"><![CDATA[<p>在开写之前需要先引入工程包lib_v7_appcompat，里面为我们提供了ActionBarActivity等许多相关类。</p><a id="more"></a><p>先新建一个activity来继承ActionBarActivity，在里面进行一些基本设置，如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ActionBar基础activity，进行统一的属性设置</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * 所有顶部带有actionbar的类都继承此类。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> leetoney</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 2015年1月31日17:28:00</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActionBarActivity</span> <span class="keyword">extends</span> <span class="title">ActionBarActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置窗口风格为顶部显示Actionbar</span></span><br><span class="line">        supportRequestWindowFeature(WindowCompat.FEATURE_ACTION_BAR);</span><br><span class="line"></span><br><span class="line">        ActionBar actionBar = getSupportActionBar();</span><br><span class="line">        actionBar.setDisplayShowTitleEnabled(<span class="keyword">true</span>);</span><br><span class="line">        actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>); <span class="comment">// 决定左上角图标的右侧是否有向左的小箭头, true</span></span><br><span class="line">                                                    <span class="comment">// 有小箭头，并且图标可以点击</span></span><br><span class="line">        actionBar.setDisplayShowHomeEnabled(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">// 使左上角图标是否显示，如果设成false，则没有程序图标，仅仅就个标题，</span></span><br><span class="line">        <span class="comment">// 否则，显示应用程序图标，对应id为android.R.id.home，对应ActionBar.DISPLAY_SHOW_HOME</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// force use of overflow menu on devices with menu button</span></span><br><span class="line">        <span class="comment">// 在actionbar中显示溢出菜单选项</span></span><br><span class="line">        <span class="comment">// http://stackoverflow.com/questions/9286822/how-to-force-use-of-overflow-menu-on-devices-with-menu-button</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ViewConfiguration config = ViewConfiguration.get(<span class="keyword">this</span>);</span><br><span class="line">            Field menuKeyField = ViewConfiguration.class</span><br><span class="line">                    .getDeclaredField(sHasPermanentMenuKey);</span><br><span class="line">            <span class="keyword">if</span> (menuKeyField != <span class="keyword">null</span>) &#123;</span><br><span class="line">                menuKeyField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                menuKeyField.setBoolean(config, <span class="keyword">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">// Ignore</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">        <span class="keyword">case</span> android.R.id.home:<span class="comment">// 点击返回图标事件</span></span><br><span class="line">            <span class="keyword">this</span>.finish();</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>然后在自己的Activity中继承这个BaseActionBarActivity，这里只设置了标题。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">BaseActionBarActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        getSupportActionBar().setTitle(返回);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>效果如图：<br><img src="http://z4a.net/images/2016/06/22/ActionBar_.png" alt="ActionBar顶部返回按钮"></p>]]></content>
      
      
        <tags>
            
            <tag> ActionBar </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SQLite数据库的char,varchar,text,nchar,nvarchar,ntext的区别</title>
      <link href="/2016/06/15/sqlite-data-type/"/>
      <url>/2016/06/15/sqlite-data-type/</url>
      <content type="html"><![CDATA[<ol><li><p><strong>CHAR</strong><br> CHAR存储定长数据很方便，CHAR字段上的索引效率级高，比如定义char(10)，那么不论你存储的数据是否达到了10个字节，都要占去10个字节的空间,不足的自动用空格填充。</p> <a id="more"></a></li><li><p><strong>VARCHAR</strong></p><p>存储变长数据，但存储效率没有CHAR高。如果一个字段可能的值是不固定长度的，我们只知道它不可能超过10个字符，把它定义为 VARCHAR(10)是最合算的。VARCHAR类型的实际长度是它的值的实际长度+1。为什么“+1”呢？这一个字节用于保存实际使用了多大的长度。从空间上考虑，用varchar合适；从效率上考虑，用char合适，关键是根据实际情况找到权衡点。</p></li><li><p><strong>TEXT</strong><br>text存储可变长度的非Unicode数据，最大长度为2^31-1(2,147,483,647)个字符。</p></li><li><p><strong>NCHAR、NVARCHAR、NTEXT</strong><br>这三种从名字上看比前面三种多了个“N”。它表示存储的是Unicode数据类型的字符。我们知道字符中，英文字符只需要一个字节存储就足够了，但汉字众多，需要两个字节存储，英文与汉字同时存在时容易造成混乱，Unicode字符集就是为了解决字符集这种不兼容的问题而产生的，它所有的字符都用两个字节表示，即英文字符也是用两个字节表示。nchar、nvarchar的长度是在1到4000之间。和char、varchar比较起来，nchar、nvarchar则最多存储4000个字符，不论是英文还是汉字；而char、varchar最多能存储8000个英文，4000个汉字。可以看出使用nchar、nvarchar数据类型时不用担心输入的字符是英文还是汉字，较为方便，但在存储英文时数量上有些损失。</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">所以一般来说，如果含有中文字符，用nchar/nvarchar，如果纯英文和数字，用char/varchar。</span><br></pre></td></tr></table></figure><blockquote><p>SQLite最大的特点在于其数据类型为无数据类型(typelessness)。这意味着可以保存任何类型的数据到所想要保存的任何表的任何列中，无论这列声明的数据类型是什么。虽然在生成表结构的时候，要声明每个域的数据类型，但SQLite并不做任何检查。开发人员要靠自己的程序来控制输入与读出数据的类型。这里有一个例外，就是当主键为整型值时，如果要插入一个非整型值时会产生异常。</p></blockquote><p>虽然，SQLite允许忽略数据类型，但是，仍然建议在Create Table语句中指定数据类型，因为数据类型有利于增强程序的可读性。另外，虽然在插入或读出数据的时候是不区分类型的，但在比较的时候，不同数据类型是有区别的</p>]]></content>
      
      
        <tags>
            
            <tag> SQLite </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CMD命令提示符改编编码命令</title>
      <link href="/2016/06/08/chcp/"/>
      <url>/2016/06/08/chcp/</url>
      <content type="html"><![CDATA[<p>CMD中修改字符编码的命令为 chcp，以下为帮助文档：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\system32&gt;help chcp 显示或设置活动代码页编号。 CHCP [nnn]   nnn</span><br><span class="line">指定代码页编号。 不带参数键入 CHCP 以显示活动代码页编号。</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>输入:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;chcp 65001</span><br></pre></td></tr></table></figure></p><p>设置编码为UTF-8<br><img src="http://z4a.net/images/2016/06/08/UTF-8.png" alt="UTG-8"></p><p>输入:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chcp 936</span><br></pre></td></tr></table></figure></p><p>设置编码GBK</p><p><img src="http://z4a.net/images/2016/06/08/GBK.png" alt="GBK"></p>]]></content>
      
      
        <tags>
            
            <tag> CMD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Android Studio 自动提示代码设置</title>
      <link href="/2016/06/06/Android-Studio-settings/"/>
      <url>/2016/06/06/Android-Studio-settings/</url>
      <content type="html"><![CDATA[<p>Android Studio中默认设置自动提示代码首字母必须严格按照大小写来输入才能提示正确的代码，修改如下设置项，可实现忽略大小写，自动完成代码。<br>下面的两个时间为代码提示弹出的速度，单位：毫秒。</p><p><img src="http://www.z4a.net/images/2016/06/06/QQ20160531180345.png" alt="Android Studio自动提示代码设置"></p>]]></content>
      
      
        <tags>
            
            <tag> Android Studio </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
